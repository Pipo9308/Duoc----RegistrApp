"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1780],{1780:(b,C,l)=>{l.r(C),l.d(C,{PaginaCursoPageModule:()=>T});var h=l(177),u=l(4341),n=l(791),g=l(5260),d=l(467),e=l(3953),m=l(3471);function f(o,i){if(1&o&&(e.j41(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),e.EFF(3,"Detalles del Curso"),e.k0s()(),e.j41(4,"ion-card-content")(5,"p"),e.EFF(6),e.k0s()()()),2&o){const r=e.XpG();e.R7$(6),e.JRh(r.curso.descripcion)}}function p(o,i){if(1&o&&(e.j41(0,"ion-item")(1,"ion-label")(2,"h2"),e.EFF(3),e.k0s(),e.j41(4,"p"),e.EFF(5),e.k0s(),e.j41(6,"p"),e.EFF(7),e.k0s(),e.j41(8,"p"),e.EFF(9),e.k0s()()()),2&o){const r=i.$implicit;e.R7$(3),e.JRh(r.nombre),e.R7$(2),e.SpI("Fecha: ",r.fecha,""),e.R7$(2),e.SpI("Hora de inicio: ",r.hora_inicio,""),e.R7$(2),e.SpI("Hora de t\xe9rmino: ",r.hora_termino,"")}}function P(o,i){if(1&o&&(e.j41(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),e.EFF(3,"Clases del Curso"),e.k0s()(),e.j41(4,"ion-card-content")(5,"ion-list"),e.DNE(6,p,10,4,"ion-item",6),e.k0s()()()),2&o){const r=e.XpG();e.R7$(6),e.Y8G("ngForOf",r.clases)}}function F(o,i){1&o&&(e.j41(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),e.EFF(3,"No hay clases programadas"),e.k0s()(),e.j41(4,"ion-card-content")(5,"p"),e.EFF(6,"Este curso a\xfan no tiene clases programadas."),e.k0s()()())}function _(o,i){if(1&o){const r=e.RV6();e.j41(0,"form",7),e.bIt("ngSubmit",function(){e.eBV(r);const a=e.XpG();return e.Njj(a.onCreateClase(a.cursoId))}),e.j41(1,"ion-card")(2,"ion-card-header")(3,"ion-card-title"),e.EFF(4,"Crear nueva clase"),e.k0s()(),e.j41(5,"ion-card-content")(6,"ion-item")(7,"ion-label",8),e.EFF(8,"Fecha"),e.k0s(),e.j41(9,"ion-input",9),e.mxI("ngModelChange",function(a){e.eBV(r);const t=e.XpG();return e.DH7(t.fechaClase,a)||(t.fechaClase=a),e.Njj(a)}),e.k0s()(),e.j41(10,"ion-item")(11,"ion-label",8),e.EFF(12,"Hora de Inicio"),e.k0s(),e.j41(13,"ion-input",10),e.mxI("ngModelChange",function(a){e.eBV(r);const t=e.XpG();return e.DH7(t.horaInicioClase,a)||(t.horaInicioClase=a),e.Njj(a)}),e.k0s()(),e.j41(14,"ion-item")(15,"ion-label",8),e.EFF(16,"Hora de T\xe9rmino"),e.k0s(),e.j41(17,"ion-input",11),e.mxI("ngModelChange",function(a){e.eBV(r);const t=e.XpG();return e.DH7(t.horaTerminoClase,a)||(t.horaTerminoClase=a),e.Njj(a)}),e.k0s()(),e.j41(18,"ion-button",12),e.EFF(19,"Crear Clase"),e.k0s()()()()}if(2&o){const r=e.XpG();e.R7$(9),e.R50("ngModel",r.fechaClase),e.R7$(4),e.R50("ngModel",r.horaInicioClase),e.R7$(4),e.R50("ngModel",r.horaTerminoClase)}}const I=[{path:"",component:(()=>{var o;class i{constructor(s,a,t,c){this.cursosService=s,this.activatedRoute=a,this.alertCtrl=t,this.toastController=c,this.cursoId=null,this.clases=[],this.fechaClase="",this.horaInicioClase="",this.horaTerminoClase=""}ngOnInit(){this.activatedRoute.paramMap.subscribe(s=>{const a=s.get("id");a&&(this.cursoId=+a,this.loadCurso(this.cursoId),this.loadClases(this.cursoId))})}loadCurso(s){this.cursosService.getCurso(s).subscribe(a=>{"Success"===a.message&&(this.curso=a.curso)},a=>{console.error("Error al obtener el curso",a)})}loadClases(s){this.cursosService.getClases(s).subscribe(a=>{"Listado de clases del curso"===a.message?this.clases=a.clases||[]:(this.clases=[],this.showAlert("Aviso","No hay clases programadas para este curso"))},a=>{console.error("Error al obtener las clases",a),this.showAlert("Error","No se pudieron cargar las clases")})}onCreateClase(s){var a=this;if(null!==s)if(this.isClaseFormValid()){if(this.horaInicioClase>=this.horaTerminoClase)return void this.presentToast("La hora de inicio debe ser anterior a la hora de t\xe9rmino");this.cursosService.createClase(s,this.fechaClase,this.horaInicioClase,this.horaTerminoClase).subscribe(function(){var t=(0,d.A)(function*(c){"Clase creada exitosamente"===c.message&&(yield a.presentToast("Clase creada exitosamente"),a.resetClaseForm())});return function(c){return t.apply(this,arguments)}}(),function(){var t=(0,d.A)(function*(c){console.error("Error al crear la clase",c),yield a.presentToast("Hubo un error al crear la clase")});return function(c){return t.apply(this,arguments)}}())}else this.presentToast("Por favor, complete todos los campos de la clase");else this.presentToast("ID del curso no v\xe1lido")}isClaseFormValid(){return""!==this.fechaClase&&""!==this.horaInicioClase&&""!==this.horaTerminoClase}resetClaseForm(){this.fechaClase="",this.horaInicioClase="",this.horaTerminoClase=""}showAlert(s,a){var t=this;return(0,d.A)(function*(){yield(yield t.alertCtrl.create({header:s,message:a,buttons:["OK"]})).present()})()}presentToast(s){var a=this;return(0,d.A)(function*(){(yield a.toastController.create({message:s,duration:2e3,position:"top"})).present()})()}}return(o=i).\u0275fac=function(s){return new(s||o)(e.rXU(m.$),e.rXU(g.nX),e.rXU(n.hG),e.rXU(n.K_))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-pagina-curso"]],decls:11,vars:7,consts:[[3,"translucent"],["slot","start"],["defaultHref","/"],[3,"fullscreen"],[4,"ngIf"],[3,"ngSubmit",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"ngSubmit"],["position","stacked"],["type","date","name","fechaClase","required","",3,"ngModelChange","ngModel"],["type","time","name","horaInicioClase","required","",3,"ngModelChange","ngModel"],["type","time","name","horaTerminoClase","required","",3,"ngModelChange","ngModel"],["expand","full","type","submit"]],template:function(s,a){1&s&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),e.nrm(3,"ion-back-button",2),e.k0s(),e.j41(4,"ion-title"),e.EFF(5),e.k0s()()(),e.j41(6,"ion-content",3),e.DNE(7,f,7,1,"ion-card",4)(8,P,7,1,"ion-card",4)(9,F,7,0,"ion-card",4)(10,_,20,3,"form",5),e.k0s()),2&s&&(e.Y8G("translucent",!0),e.R7$(5),e.JRh((null==a.curso?null:a.curso.nombre)||"Curso"),e.R7$(),e.Y8G("fullscreen",!0),e.R7$(),e.Y8G("ngIf",a.curso),e.R7$(),e.Y8G("ngIf",a.clases.length>0),e.R7$(),e.Y8G("ngIf",0===a.clases.length),e.R7$(),e.Y8G("ngIf",null!==a.cursoId))},dependencies:[h.Sq,h.bT,u.qT,u.BC,u.cb,u.YS,u.vS,u.cV,n.Jm,n.QW,n.b_,n.I9,n.ME,n.tN,n.W9,n.eU,n.$w,n.uz,n.he,n.nf,n.BC,n.ai,n.Gw,n.el]}),i})()}];let j=(()=>{var o;class i{}return(o=i).\u0275fac=function(s){return new(s||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[g.iI.forChild(I),g.iI]}),i})(),T=(()=>{var o;class i{}return(o=i).\u0275fac=function(s){return new(s||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[h.MD,u.YN,n.bv,j]}),i})()}}]);