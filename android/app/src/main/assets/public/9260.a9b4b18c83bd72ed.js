(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9260],{9811:(En,Ft,v)=>{"use strict";v.d(Ft,{Gm:()=>gt,UO:()=>et,V7:()=>Dt});var k=v(5993),Dt=function(ue){return ue[ue.BACK=1]="BACK",ue[ue.FRONT=2]="FRONT",ue}(Dt||{}),et=function(ue){return ue[ue.PORTRAIT=1]="PORTRAIT",ue[ue.LANDSCAPE=2]="LANDSCAPE",ue[ue.ADAPTIVE=3]="ADAPTIVE",ue}(et||{}),Nt=function(ue){return ue[ue.ALL=17]="ALL",ue}(Nt||{});const gt=Object.assign(Object.assign({},k.Jl),Nt)},7464:(En,Ft,v)=>{"use strict";v.d(Ft,{E_:()=>ae,F3:()=>xt});var k=v(467);typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"&&global;var Ze=function(S){return S.Unimplemented="UNIMPLEMENTED",S.Unavailable="UNAVAILABLE",S}(Ze||{});class Z extends Error{constructor(D,B,ee){super(D),this.message=D,this.code=B,this.data=ee}}const ze=S=>{var D,B,ee,re,Q;const Re=S.CapacitorCustomPlatform||null,q=S.Capacitor||{},Fe=q.Plugins=q.Plugins||{},ge=S.CapacitorPlatforms,K=(null===(D=null==ge?void 0:ge.currentPlatform)||void 0===D?void 0:D.getPlatform)||(()=>null!==Re?Re.name:(S=>{var D,B;return null!=S&&S.androidBridge?"android":null!==(B=null===(D=null==S?void 0:S.webkit)||void 0===D?void 0:D.messageHandlers)&&void 0!==B&&B.bridge?"ios":"web"})(S)),he=(null===(B=null==ge?void 0:ge.currentPlatform)||void 0===B?void 0:B.isNativePlatform)||(()=>"web"!==K()),jt=(null===(ee=null==ge?void 0:ge.currentPlatform)||void 0===ee?void 0:ee.isPluginAvailable)||(ke=>{const J=ot.get(ke);return!!(null!=J&&J.platforms.has(K())||Xt(ke))}),Xt=(null===(re=null==ge?void 0:ge.currentPlatform)||void 0===re?void 0:re.getPluginHeader)||(ke=>{var J;return null===(J=q.PluginHeaders)||void 0===J?void 0:J.find(Tt=>Tt.name===ke)}),ot=new Map,qe=(null===(Q=null==ge?void 0:ge.currentPlatform)||void 0===Q?void 0:Q.registerPlugin)||((ke,J={})=>{const Tt=ot.get(ke);if(Tt)return console.warn(`Capacitor plugin "${ke}" already registered. Cannot register plugins twice.`),Tt.proxy;const X=K(),St=Xt(ke);let wt;const Zt=function(){var be=(0,k.A)(function*(){return!wt&&X in J?wt=wt="function"==typeof J[X]?yield J[X]():J[X]:null!==Re&&!wt&&"web"in J&&(wt=wt="function"==typeof J.web?yield J.web():J.web),wt});return function(){return be.apply(this,arguments)}}(),at=be=>{let $e;const Te=(...V)=>{const Ct=Zt().then(xe=>{const Oe=((be,$e)=>{var Te,V;if(!St){if(be)return null===(V=be[$e])||void 0===V?void 0:V.bind(be);throw new Z(`"${ke}" plugin is not implemented on ${X}`,Ze.Unimplemented)}{const Ct=null==St?void 0:St.methods.find(xe=>$e===xe.name);if(Ct)return"promise"===Ct.rtype?xe=>q.nativePromise(ke,$e.toString(),xe):(xe,Oe)=>q.nativeCallback(ke,$e.toString(),xe,Oe);if(be)return null===(Te=be[$e])||void 0===Te?void 0:Te.bind(be)}})(xe,be);if(Oe){const Mt=Oe(...V);return $e=null==Mt?void 0:Mt.remove,Mt}throw new Z(`"${ke}.${be}()" is not implemented on ${X}`,Ze.Unimplemented)});return"addListener"===be&&(Ct.remove=(0,k.A)(function*(){return $e()})),Ct};return Te.toString=()=>`${be.toString()}() { [capacitor code] }`,Object.defineProperty(Te,"name",{value:be,writable:!1,configurable:!1}),Te},nn=at("addListener"),At=at("removeListener"),Ue=(be,$e)=>{const Te=nn({eventName:be},$e),V=function(){var xe=(0,k.A)(function*(){const Oe=yield Te;At({eventName:be,callbackId:Oe},$e)});return function(){return xe.apply(this,arguments)}}(),Ct=new Promise(xe=>Te.then(()=>xe({remove:V})));return Ct.remove=(0,k.A)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield V()}),Ct},Je=new Proxy({},{get(be,$e){switch($e){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return St?Ue:nn;case"removeListener":return At;default:return at($e)}}});return Fe[ke]=Je,ot.set(ke,{name:ke,proxy:Je,platforms:new Set([...Object.keys(J),...St?[X]:[]])}),Je});return q.convertFileSrc||(q.convertFileSrc=ke=>ke),q.getPlatform=K,q.handleError=ke=>S.console.error(ke),q.isNativePlatform=he,q.isPluginAvailable=jt,q.pluginMethodNoop=(ke,J,Tt)=>Promise.reject(`${Tt} does not have an implementation of "${J}".`),q.registerPlugin=qe,q.Exception=Z,q.DEBUG=!!q.DEBUG,q.isLoggingEnabled=!!q.isLoggingEnabled,q.platform=q.getPlatform(),q.isNative=q.isNativePlatform(),q},Ee=(S=>S.Capacitor=ze(S))(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),xt=Ee.registerPlugin;class ae{constructor(D){this.listeners={},this.retainedEventArguments={},this.windowListeners={},D&&(console.warn(`Capacitor WebPlugin "${D.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=D)}addListener(D,B){var ee=this;let re=!1;this.listeners[D]||(this.listeners[D]=[],re=!0),this.listeners[D].push(B);const Re=this.windowListeners[D];Re&&!Re.registered&&this.addWindowListener(Re),re&&this.sendRetainedArgumentsForEvent(D);const q=function(){var ge=(0,k.A)(function*(){return ee.removeListener(D,B)});return function(){return ge.apply(this,arguments)}}();return Promise.resolve({remove:q})}removeAllListeners(){var D=this;return(0,k.A)(function*(){D.listeners={};for(const B in D.windowListeners)D.removeWindowListener(D.windowListeners[B]);D.windowListeners={}})()}notifyListeners(D,B,ee){const re=this.listeners[D];if(re)re.forEach(Q=>Q(B));else if(ee){let Q=this.retainedEventArguments[D];Q||(Q=[]),Q.push(B),this.retainedEventArguments[D]=Q}}hasListeners(D){return!!this.listeners[D].length}registerWindowListener(D,B){this.windowListeners[B]={registered:!1,windowEventName:D,pluginEventName:B,handler:ee=>{this.notifyListeners(B,ee)}}}unimplemented(D="not implemented"){return new Ee.Exception(D,Ze.Unimplemented)}unavailable(D="not available"){return new Ee.Exception(D,Ze.Unavailable)}removeListener(D,B){var ee=this;return(0,k.A)(function*(){const re=ee.listeners[D];if(!re)return;const Q=re.indexOf(B);ee.listeners[D].splice(Q,1),ee.listeners[D].length||ee.removeWindowListener(ee.windowListeners[D])})()}addWindowListener(D){window.addEventListener(D.windowEventName,D.handler),D.registered=!0}removeWindowListener(D){D&&(window.removeEventListener(D.windowEventName,D.handler),D.registered=!1)}sendRetainedArgumentsForEvent(D){const B=this.retainedEventArguments[D];B&&(delete this.retainedEventArguments[D],B.forEach(ee=>{this.notifyListeners(D,ee)}))}}const Se=S=>encodeURIComponent(S).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),se=S=>S.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class H extends ae{getCookies(){return(0,k.A)(function*(){const D=document.cookie,B={};return D.split(";").forEach(ee=>{if(ee.length<=0)return;let[re,Q]=ee.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");re=se(re).trim(),Q=se(Q).trim(),B[re]=Q}),B})()}setCookie(D){return(0,k.A)(function*(){try{const B=Se(D.key),ee=Se(D.value),re=`; expires=${(D.expires||"").replace("expires=","")}`,Q=(D.path||"/").replace("path=",""),Re=null!=D.url&&D.url.length>0?`domain=${D.url}`:"";document.cookie=`${B}=${ee||""}${re}; path=${Q}; ${Re};`}catch(B){return Promise.reject(B)}})()}deleteCookie(D){return(0,k.A)(function*(){try{document.cookie=`${D.key}=; Max-Age=0`}catch(B){return Promise.reject(B)}})()}clearCookies(){return(0,k.A)(function*(){try{const D=document.cookie.split(";")||[];for(const B of D)document.cookie=B.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(D){return Promise.reject(D)}})()}clearAllCookies(){var D=this;return(0,k.A)(function*(){try{yield D.clearCookies()}catch(B){return Promise.reject(B)}})()}}xt("CapacitorCookies",{web:()=>new H});const z=function(){var S=(0,k.A)(function*(D){return new Promise((B,ee)=>{const re=new FileReader;re.onload=()=>{const Q=re.result;B(Q.indexOf(",")>=0?Q.split(",")[1]:Q)},re.onerror=Q=>ee(Q),re.readAsDataURL(D)})});return function(B){return S.apply(this,arguments)}}();class Ie extends ae{request(D){return(0,k.A)(function*(){const B=((S,D={})=>{const B=Object.assign({method:S.method||"GET",headers:S.headers},D),re=((S={})=>{const D=Object.keys(S);return Object.keys(S).map(re=>re.toLocaleLowerCase()).reduce((re,Q,Re)=>(re[Q]=S[D[Re]],re),{})})(S.headers)["content-type"]||"";if("string"==typeof S.data)B.body=S.data;else if(re.includes("application/x-www-form-urlencoded")){const Q=new URLSearchParams;for(const[Re,q]of Object.entries(S.data||{}))Q.set(Re,q);B.body=Q.toString()}else if(re.includes("multipart/form-data")||S.data instanceof FormData){const Q=new FormData;if(S.data instanceof FormData)S.data.forEach((q,Fe)=>{Q.append(Fe,q)});else for(const q of Object.keys(S.data))Q.append(q,S.data[q]);B.body=Q;const Re=new Headers(B.headers);Re.delete("content-type"),B.headers=Re}else(re.includes("application/json")||"object"==typeof S.data)&&(B.body=JSON.stringify(S.data));return B})(D,D.webFetchExtra),ee=((S,D=!0)=>S?Object.entries(S).reduce((ee,re)=>{const[Q,Re]=re;let q,Fe;return Array.isArray(Re)?(Fe="",Re.forEach(ge=>{q=D?encodeURIComponent(ge):ge,Fe+=`${Q}=${q}&`}),Fe.slice(0,-1)):(q=D?encodeURIComponent(Re):Re,Fe=`${Q}=${q}`),`${ee}&${Fe}`},"").substr(1):null)(D.params,D.shouldEncodeUrlParams),re=ee?`${D.url}?${ee}`:D.url,Q=yield fetch(re,B),Re=Q.headers.get("content-type")||"";let Fe,ge,{responseType:q="text"}=Q.ok?D:{};switch(Re.includes("application/json")&&(q="json"),q){case"arraybuffer":case"blob":ge=yield Q.blob(),Fe=yield z(ge);break;case"json":Fe=yield Q.json();break;default:Fe=yield Q.text()}const Ut={};return Q.headers.forEach((K,Yt)=>{Ut[Yt]=K}),{data:Fe,headers:Ut,status:Q.status,url:Q.url}})()}get(D){var B=this;return(0,k.A)(function*(){return B.request(Object.assign(Object.assign({},D),{method:"GET"}))})()}post(D){var B=this;return(0,k.A)(function*(){return B.request(Object.assign(Object.assign({},D),{method:"POST"}))})()}put(D){var B=this;return(0,k.A)(function*(){return B.request(Object.assign(Object.assign({},D),{method:"PUT"}))})()}patch(D){var B=this;return(0,k.A)(function*(){return B.request(Object.assign(Object.assign({},D),{method:"PATCH"}))})()}delete(D){var B=this;return(0,k.A)(function*(){return B.request(Object.assign(Object.assign({},D),{method:"DELETE"}))})()}}xt("CapacitorHttp",{web:()=>new Ie})},9260:(En,Ft,v)=>{"use strict";v.r(Ft),v.d(Ft,{PaginaQrPageModule:()=>ae});var k=v(177),Dt=v(4341),et=v(791),Nt=v(5260),gt=v(467),nt=v(7464),ue=v(9811);const Ze=[{selector:".scanner-container-display",css:"display: block;"},{selector:".scanner-dialog",css:"display: none; position: fixed; z-index: 999; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.4);"},{selector:".scanner-dialog-inner",css:"background-color: #fefefe; margin: 2% auto; padding: 20px; border: 1px solid #888; width: 96%;"},{selector:".close-button",css:"color: #aaa; float: right; font-size: 28px; font-weight: bold; cursor: pointer;"},{selector:".close-button:hover",css:"color: #222;"},{selector:".scanner-container-full-width",css:"width: 100%;"}],yt=(0,nt.F3)("CapacitorBarcodeScanner",{web:()=>(function Z(W){const Se="custom-style-os-cap-barcode";let se=document.getElementById(Se);if(se||(se=document.createElement("style"),se.type="text/css",se.id=Se,document.head.appendChild(se)),se.sheet){for(;se.sheet.cssRules.length;)se.sheet.deleteRule(0);for(const{selector:H,css:de}of W)se.sheet.insertRule(`${H} { ${de} }`)}else{se.textContent="";for(const{selector:H,css:de}of W)se.textContent+=`${H} { ${de} }`}}(Ze),v.e(9999).then(v.bind(v,9999)).then(W=>new W.CapacitorBarcodeScannerWeb))});class ze{static scanBarcode(Se){return(0,gt.A)(function*(){return Se.scanInstructions=Se.scanInstructions||" ",Se.scanButton=Se.scanButton||!1,Se.scanText=Se.scanText||" ",Se.cameraDirection=Se.cameraDirection||ue.V7.BACK,Se.scanOrientation=Se.scanOrientation||ue.UO.ADAPTIVE,yt.scanBarcode(Se)})()}}var ce=v(3953);function Ee(W,Se){if(1&W&&(ce.j41(0,"ion-item"),ce.EFF(1),ce.k0s()),2&W){const se=ce.XpG();ce.R7$(),ce.SpI(" ",se.result," ")}}const pe=[{path:"",component:(()=>{var W;class Se{constructor(){this.result=""}scan(){var H=this;return(0,gt.A)(function*(){const de=yield ze.scanBarcode({hint:ue.Gm.ALL});H.result=de.ScanResult})()}ngOnInit(){}}return(W=Se).\u0275fac=function(H){return new(H||W)},W.\u0275cmp=ce.VBU({type:W,selectors:[["app-pagina-qr"]],decls:15,vars:1,consts:[["slot","start"],["defaultHref","/"],["src","assets/img/scan-qr.webp","alt",""],[1,"scan-label"],["expand","block",1,"submit",3,"click"],["slot","end","name","scan-outline"],[4,"ngIf"]],template:function(H,de){1&H&&(ce.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),ce.EFF(3,"Escanear QR"),ce.k0s(),ce.j41(4,"ion-buttons",0),ce.nrm(5,"ion-back-button",1),ce.k0s()()(),ce.j41(6,"ion-content"),ce.nrm(7,"img",2),ce.j41(8,"h6",3),ce.EFF(9," Escanea un codigo QR "),ce.k0s(),ce.j41(10,"ion-button",4),ce.bIt("click",function(){return de.scan()}),ce.EFF(11," Escanear "),ce.nrm(12,"ion-icon",5),ce.k0s(),ce.j41(13,"ion-list"),ce.DNE(14,Ee,2,1,"ion-item",6),ce.k0s()()),2&H&&(ce.R7$(14),ce.Y8G("ngIf",de.result))},dependencies:[k.bT,et.Jm,et.QW,et.W9,et.eU,et.iq,et.uz,et.nf,et.BC,et.ai,et.el]}),Se})()}];let Ye=(()=>{var W;class Se{}return(W=Se).\u0275fac=function(H){return new(H||W)},W.\u0275mod=ce.$C({type:W}),W.\u0275inj=ce.G2t({imports:[Nt.iI.forChild(pe),Nt.iI]}),Se})(),ae=(()=>{var W;class Se{}return(W=Se).\u0275fac=function(H){return new(H||W)},W.\u0275mod=ce.$C({type:W}),W.\u0275inj=ce.G2t({imports:[k.MD,Dt.YN,et.bv,Ye]}),Se})()},5993:(En,Ft,v)=>{"use strict";v.d(Ft,{j9:()=>ot,Jl:()=>k});var k=function(d){return d[d.QR_CODE=0]="QR_CODE",d[d.AZTEC=1]="AZTEC",d[d.CODABAR=2]="CODABAR",d[d.CODE_39=3]="CODE_39",d[d.CODE_93=4]="CODE_93",d[d.CODE_128=5]="CODE_128",d[d.DATA_MATRIX=6]="DATA_MATRIX",d[d.MAXICODE=7]="MAXICODE",d[d.ITF=8]="ITF",d[d.EAN_13=9]="EAN_13",d[d.EAN_8=10]="EAN_8",d[d.PDF_417=11]="PDF_417",d[d.RSS_14=12]="RSS_14",d[d.RSS_EXPANDED=13]="RSS_EXPANDED",d[d.UPC_A=14]="UPC_A",d[d.UPC_E=15]="UPC_E",d[d.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION",d}(k||{}),Dt=new Map([[k.QR_CODE,"QR_CODE"],[k.AZTEC,"AZTEC"],[k.CODABAR,"CODABAR"],[k.CODE_39,"CODE_39"],[k.CODE_93,"CODE_93"],[k.CODE_128,"CODE_128"],[k.DATA_MATRIX,"DATA_MATRIX"],[k.MAXICODE,"MAXICODE"],[k.ITF,"ITF"],[k.EAN_13,"EAN_13"],[k.EAN_8,"EAN_8"],[k.PDF_417,"PDF_417"],[k.RSS_14,"RSS_14"],[k.RSS_EXPANDED,"RSS_EXPANDED"],[k.UPC_A,"UPC_A"],[k.UPC_E,"UPC_E"],[k.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]);function Nt(d){return Object.values(k).includes(d)}var gt=function(d){return d[d.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",d[d.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE",d}(gt||{}),nt=function(){function d(){}return d.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",d.SCAN_DEFAULT_FPS=2,d.DEFAULT_DISABLE_FLIP=!1,d.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,d.DEFAULT_SUPPORTED_SCAN_TYPE=[gt.SCAN_TYPE_CAMERA,gt.SCAN_TYPE_FILE],d}(),ue=function(){function d(h,f){this.format=h,this.formatName=f}return d.prototype.toString=function(){return this.formatName},d.create=function(h){if(!Dt.has(h))throw"".concat(h," not in html5QrcodeSupportedFormatsTextMap");return new d(h,Dt.get(h))},d}(),Ze=function(){function d(){}return d.createFromText=function(h){return{decodedText:h,result:{text:h}}},d.createFromQrcodeResult=function(h){return{decodedText:h.text,result:h}},d}(),Z=function(d){return d[d.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",d[d.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",d[d.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR",d}(Z||{}),yt=function(){function d(){}return d.createFrom=function(h){return{errorMessage:h,type:Z.UNKWOWN_ERROR}},d}(),ze=function(){function d(h){this.verbose=h}return d.prototype.log=function(h){this.verbose&&console.log(h)},d.prototype.warn=function(h){this.verbose&&console.warn(h)},d.prototype.logError=function(h,f){(this.verbose||!0===f)&&console.error(h)},d.prototype.logErrors=function(h){if(0===h.length)throw"Logger#logError called without arguments";this.verbose&&console.error(h)},d}();function ce(d){return typeof d>"u"||null===d}var xt=function(){function d(){}return d.codeParseError=function(h){return"QR code parse error, error = ".concat(h)},d.errorGettingUserMedia=function(h){return"Error getting userMedia, error = ".concat(h)},d.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},d.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},d.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},d.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},d.scannerPaused=function(){return"Scanner paused"},d}(),pe=function(){function d(){}return d.scanningStatus=function(){return"Scanning"},d.idleStatus=function(){return"Idle"},d.errorStatus=function(){return"Error"},d.permissionStatus=function(){return"Permission"},d.noCameraFoundErrorStatus=function(){return"No Cameras"},d.lastMatch=function(h){return"Last Match: ".concat(h)},d.codeScannerTitle=function(){return"Code Scanner"},d.cameraPermissionTitle=function(){return"Request Camera Permissions"},d.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},d.noCameraFound=function(){return"No camera found"},d.scanButtonStopScanningText=function(){return"Stop Scanning"},d.scanButtonStartScanningText=function(){return"Start Scanning"},d.torchOnButton=function(){return"Switch On Torch"},d.torchOffButton=function(){return"Switch Off Torch"},d.torchOnFailedMessage=function(){return"Failed to turn on torch"},d.torchOffFailedMessage=function(){return"Failed to turn off torch"},d.scanButtonScanningStarting=function(){return"Launching Camera..."},d.textIfCameraScanSelected=function(){return"Scan an Image File"},d.textIfFileScanSelected=function(){return"Scan using camera directly"},d.selectCamera=function(){return"Select Camera"},d.fileSelectionChooseImage=function(){return"Choose Image"},d.fileSelectionChooseAnother=function(){return"Choose Another"},d.fileSelectionNoImageSelected=function(){return"No image choosen"},d.anonymousCameraPrefix=function(){return"Anonymous Camera"},d.dragAndDropMessage=function(){return"Or drop an image to scan"},d.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},d.zoom=function(){return"zoom"},d.loadingImage=function(){return"Loading image..."},d.cameraScanAltText=function(){return"Camera based scan"},d.fileScanAltText=function(){return"Fule based scan"},d}(),Ye=function(){function d(){}return d.poweredBy=function(){return"Powered by "},d.reportIssues=function(){return"Report issues"},d}(),ae=function(){function d(){}return d.isMediaStreamConstraintsValid=function(h,f){if("object"!=typeof h)return f.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(typeof h,"."),!0),!1;for(var x=new Set(["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"]),_=0,P=Object.keys(h);_<P.length;_++){var E=P[_];if(x.has(E))return f.logError("".concat(E," is not supported videoConstaints."),!0),!1}return!0},d}(),W=v(5496),Se=function(){function d(h,f,w){if(this.formatMap=new Map([[k.QR_CODE,W.BarcodeFormat.QR_CODE],[k.AZTEC,W.BarcodeFormat.AZTEC],[k.CODABAR,W.BarcodeFormat.CODABAR],[k.CODE_39,W.BarcodeFormat.CODE_39],[k.CODE_93,W.BarcodeFormat.CODE_93],[k.CODE_128,W.BarcodeFormat.CODE_128],[k.DATA_MATRIX,W.BarcodeFormat.DATA_MATRIX],[k.MAXICODE,W.BarcodeFormat.MAXICODE],[k.ITF,W.BarcodeFormat.ITF],[k.EAN_13,W.BarcodeFormat.EAN_13],[k.EAN_8,W.BarcodeFormat.EAN_8],[k.PDF_417,W.BarcodeFormat.PDF_417],[k.RSS_14,W.BarcodeFormat.RSS_14],[k.RSS_EXPANDED,W.BarcodeFormat.RSS_EXPANDED],[k.UPC_A,W.BarcodeFormat.UPC_A],[k.UPC_E,W.BarcodeFormat.UPC_E],[k.UPC_EAN_EXTENSION,W.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!W)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=f,this.logger=w;var C=this.createZXingFormats(h),x=new Map;x.set(W.DecodeHintType.POSSIBLE_FORMATS,C),x.set(W.DecodeHintType.TRY_HARDER,!1),this.hints=x}return d.prototype.decodeAsync=function(h){var f=this;return new Promise(function(w,C){try{w(f.decode(h))}catch(x){C(x)}})},d.prototype.decode=function(h){var f=new W.MultiFormatReader(this.verbose,this.hints),w=new W.HTMLCanvasElementLuminanceSource(h),C=new W.BinaryBitmap(new W.HybridBinarizer(w)),x=f.decode(C);return{text:x.text,format:ue.create(this.toHtml5QrcodeSupportedFormats(x.format)),debugData:this.createDebugData()}},d.prototype.createReverseFormatMap=function(){var h=new Map;return this.formatMap.forEach(function(f,w,C){h.set(f,w)}),h},d.prototype.toHtml5QrcodeSupportedFormats=function(h){if(!this.reverseFormatMap.has(h))throw"reverseFormatMap doesn't have ".concat(h);return this.reverseFormatMap.get(h)},d.prototype.createZXingFormats=function(h){for(var f=[],w=0,C=h;w<C.length;w++){var x=C[w];this.formatMap.has(x)?f.push(this.formatMap.get(x)):this.logger.logError("".concat(x," is not supported by")+"ZXingHtml5QrcodeShim")}return f},d.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},d}(),de=function(){function d(h,f,w){if(this.formatMap=new Map([[k.QR_CODE,"qr_code"],[k.AZTEC,"aztec"],[k.CODABAR,"codabar"],[k.CODE_39,"code_39"],[k.CODE_93,"code_93"],[k.CODE_128,"code_128"],[k.DATA_MATRIX,"data_matrix"],[k.ITF,"itf"],[k.EAN_13,"ean_13"],[k.EAN_8,"ean_8"],[k.PDF_417,"pdf417"],[k.UPC_A,"upc_a"],[k.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!d.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=f,this.logger=w;var C=this.createBarcodeDetectorFormats(h);if(this.detector=new BarcodeDetector(C),!this.detector)throw"BarcodeDetector detector not supported"}return d.isSupported=function(){return"BarcodeDetector"in window&&typeof new BarcodeDetector({formats:["qr_code"]})<"u"},d.prototype.decodeAsync=function(h){return function(d,h,f,w){return new(f||(f=Promise))(function(x,T){function _(R){try{E(w.next(R))}catch(j){T(j)}}function P(R){try{E(w.throw(R))}catch(j){T(j)}}function E(R){R.done?x(R.value):function C(x){return x instanceof f?x:new f(function(T){T(x)})}(R.value).then(_,P)}E((w=w.apply(d,h||[])).next())})}(this,void 0,void 0,function(){var f,w;return function(d,h){var w,C,x,T,f={label:0,sent:function(){if(1&x[0])throw x[1];return x[1]},trys:[],ops:[]};return T={next:_(0),throw:_(1),return:_(2)},"function"==typeof Symbol&&(T[Symbol.iterator]=function(){return this}),T;function _(E){return function(R){return function P(E){if(w)throw new TypeError("Generator is already executing.");for(;T&&(T=0,E[0]&&(f=0)),f;)try{if(w=1,C&&(x=2&E[0]?C.return:E[0]?C.throw||((x=C.return)&&x.call(C),0):C.next)&&!(x=x.call(C,E[1])).done)return x;switch(C=0,x&&(E=[2&E[0],x.value]),E[0]){case 0:case 1:x=E;break;case 4:return f.label++,{value:E[1],done:!1};case 5:f.label++,C=E[1],E=[0];continue;case 7:E=f.ops.pop(),f.trys.pop();continue;default:if(!(x=(x=f.trys).length>0&&x[x.length-1])&&(6===E[0]||2===E[0])){f=0;continue}if(3===E[0]&&(!x||E[1]>x[0]&&E[1]<x[3])){f.label=E[1];break}if(6===E[0]&&f.label<x[1]){f.label=x[1],x=E;break}if(x&&f.label<x[2]){f.label=x[2],f.ops.push(E);break}x[2]&&f.ops.pop(),f.trys.pop();continue}E=h.call(d,f)}catch(R){E=[6,R],C=0}finally{w=x=0}if(5&E[0])throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}([E,R])}}}(this,function(C){switch(C.label){case 0:return[4,this.detector.detect(h)];case 1:if(!(f=C.sent())||0===f.length)throw"No barcode or QR code detected.";return[2,{text:(w=this.selectLargestBarcode(f)).rawValue,format:ue.create(this.toHtml5QrcodeSupportedFormats(w.format)),debugData:this.createDebugData()}]}})})},d.prototype.selectLargestBarcode=function(h){for(var f=null,w=0,C=0,x=h;C<x.length;C++){var T=x[C],_=T.boundingBox.width*T.boundingBox.height;_>w&&(w=_,f=T)}if(!f)throw"No largest barcode found";return f},d.prototype.createBarcodeDetectorFormats=function(h){for(var f=[],w=0,C=h;w<C.length;w++){var x=C[w];this.formatMap.has(x)?f.push(this.formatMap.get(x)):this.logger.warn("".concat(x," is not supported by")+"BarcodeDetectorDelegate")}return{formats:f}},d.prototype.toHtml5QrcodeSupportedFormats=function(h){if(!this.reverseFormatMap.has(h))throw"reverseFormatMap doesn't have ".concat(h);return this.reverseFormatMap.get(h)},d.prototype.createReverseFormatMap=function(){var h=new Map;return this.formatMap.forEach(function(f,w,C){h.set(f,w)}),h},d.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},d}(),z=function(d,h,f,w){return new(f||(f=Promise))(function(x,T){function _(R){try{E(w.next(R))}catch(j){T(j)}}function P(R){try{E(w.throw(R))}catch(j){T(j)}}function E(R){R.done?x(R.value):function C(x){return x instanceof f?x:new f(function(T){T(x)})}(R.value).then(_,P)}E((w=w.apply(d,h||[])).next())})},kt=function(d,h){var w,C,x,T,f={label:0,sent:function(){if(1&x[0])throw x[1];return x[1]},trys:[],ops:[]};return T={next:_(0),throw:_(1),return:_(2)},"function"==typeof Symbol&&(T[Symbol.iterator]=function(){return this}),T;function _(E){return function(R){return function P(E){if(w)throw new TypeError("Generator is already executing.");for(;T&&(T=0,E[0]&&(f=0)),f;)try{if(w=1,C&&(x=2&E[0]?C.return:E[0]?C.throw||((x=C.return)&&x.call(C),0):C.next)&&!(x=x.call(C,E[1])).done)return x;switch(C=0,x&&(E=[2&E[0],x.value]),E[0]){case 0:case 1:x=E;break;case 4:return f.label++,{value:E[1],done:!1};case 5:f.label++,C=E[1],E=[0];continue;case 7:E=f.ops.pop(),f.trys.pop();continue;default:if(!(x=(x=f.trys).length>0&&x[x.length-1])&&(6===E[0]||2===E[0])){f=0;continue}if(3===E[0]&&(!x||E[1]>x[0]&&E[1]<x[3])){f.label=E[1];break}if(6===E[0]&&f.label<x[1]){f.label=x[1],x=E;break}if(x&&f.label<x[2]){f.label=x[2],f.ops.push(E);break}x[2]&&f.ops.pop(),f.trys.pop();continue}E=h.call(d,f)}catch(R){E=[6,R],C=0}finally{w=x=0}if(5&E[0])throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}([E,R])}}},rt=function(){function d(h,f,w,C){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=w,f&&de.isSupported()?(this.primaryDecoder=new de(h,w,C),this.secondaryDecoder=new Se(h,w,C)):this.primaryDecoder=new Se(h,w,C)}return d.prototype.decodeAsync=function(h){return z(this,void 0,void 0,function(){var f;return kt(this,function(w){switch(w.label){case 0:f=performance.now(),w.label=1;case 1:return w.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(h)];case 2:return[2,w.sent()];case 3:return this.possiblyLogPerformance(f),[7];case 4:return[2]}})})},d.prototype.decodeRobustlyAsync=function(h){return z(this,void 0,void 0,function(){var f,w;return kt(this,function(C){switch(C.label){case 0:f=performance.now(),C.label=1;case 1:return C.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(h)];case 2:return[2,C.sent()];case 3:if(w=C.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(h)];throw w;case 4:return this.possiblyLogPerformance(f),[7];case 5:return[2]}})})},d.prototype.getDecoder=function(){return this.secondaryDecoder?!1===this.wasPrimaryDecoderUsedInLastDecode?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},d.prototype.possiblyLogPerformance=function(h){if(this.verbose){var f=performance.now()-h;this.executionResults.push(f),this.executions++,this.possiblyFlushPerformanceReport()}},d.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var h=0,f=0,w=this.executionResults;f<w.length;f++)h+=w[f];console.log("".concat(h/this.executionResults.length," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},d}(),ne=function(){var d=function(h,f){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,C){w.__proto__=C}||function(w,C){for(var x in C)Object.prototype.hasOwnProperty.call(C,x)&&(w[x]=C[x])})(h,f)};return function(h,f){if("function"!=typeof f&&null!==f)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");function w(){this.constructor=h}d(h,f),h.prototype=null===f?Object.create(f):(w.prototype=f.prototype,new w)}}(),Ie=function(d,h,f,w){return new(f||(f=Promise))(function(x,T){function _(R){try{E(w.next(R))}catch(j){T(j)}}function P(R){try{E(w.throw(R))}catch(j){T(j)}}function E(R){R.done?x(R.value):function C(x){return x instanceof f?x:new f(function(T){T(x)})}(R.value).then(_,P)}E((w=w.apply(d,h||[])).next())})},Xe=function(d,h){var w,C,x,T,f={label:0,sent:function(){if(1&x[0])throw x[1];return x[1]},trys:[],ops:[]};return T={next:_(0),throw:_(1),return:_(2)},"function"==typeof Symbol&&(T[Symbol.iterator]=function(){return this}),T;function _(E){return function(R){return function P(E){if(w)throw new TypeError("Generator is already executing.");for(;T&&(T=0,E[0]&&(f=0)),f;)try{if(w=1,C&&(x=2&E[0]?C.return:E[0]?C.throw||((x=C.return)&&x.call(C),0):C.next)&&!(x=x.call(C,E[1])).done)return x;switch(C=0,x&&(E=[2&E[0],x.value]),E[0]){case 0:case 1:x=E;break;case 4:return f.label++,{value:E[1],done:!1};case 5:f.label++,C=E[1],E=[0];continue;case 7:E=f.ops.pop(),f.trys.pop();continue;default:if(!(x=(x=f.trys).length>0&&x[x.length-1])&&(6===E[0]||2===E[0])){f=0;continue}if(3===E[0]&&(!x||E[1]>x[0]&&E[1]<x[3])){f.label=E[1];break}if(6===E[0]&&f.label<x[1]){f.label=x[1],x=E;break}if(x&&f.label<x[2]){f.label=x[2],f.ops.push(E);break}x[2]&&f.ops.pop(),f.trys.pop();continue}E=h.call(d,f)}catch(R){E=[6,R],C=0}finally{w=x=0}if(5&E[0])throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}([E,R])}}},S=function(){function d(h,f){this.name=h,this.track=f}return d.prototype.isSupported=function(){return!!this.track.getCapabilities&&this.name in this.track.getCapabilities()},d.prototype.apply=function(h){var f={};return f[this.name]=h,this.track.applyConstraints({advanced:[f]})},d.prototype.value=function(){var h=this.track.getSettings();return this.name in h?h[this.name]:null},d}(),B=function(d){function h(f){return d.call(this,"zoom",f)||this}return ne(h,d),h}(function(d){function h(f,w){return d.call(this,f,w)||this}return ne(h,d),h.prototype.min=function(){return this.getCapabilities().min},h.prototype.max=function(){return this.getCapabilities().max},h.prototype.step=function(){return this.getCapabilities().step},h.prototype.apply=function(f){var w={};return w[this.name]=f,this.track.applyConstraints({advanced:[w]})},h.prototype.getCapabilities=function(){this.failIfNotSupported();var w=this.track.getCapabilities()[this.name];return{min:w.min,max:w.max,step:w.step}},h.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},h}(S)),ee=function(d){function h(f){return d.call(this,"torch",f)||this}return ne(h,d),h}(S),re=function(){function d(h){this.track=h}return d.prototype.zoomFeature=function(){return new B(this.track)},d.prototype.torchFeature=function(){return new ee(this.track)},d}(),Q=function(){function d(h,f,w){this.isClosed=!1,this.parentElement=h,this.mediaStream=f,this.callbacks=w,this.surface=this.createVideoElement(this.parentElement.clientWidth),h.append(this.surface)}return d.prototype.createVideoElement=function(h){var f=document.createElement("video");return f.style.width="".concat(h,"px"),f.style.display="block",f.muted=!0,f.setAttribute("muted","true"),f.playsInline=!0,f},d.prototype.setupSurface=function(){var h=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var f=function(){h.callbacks.onRenderSurfaceReady(h.surface.clientWidth,h.surface.clientHeight),h.surface.removeEventListener("playing",f)};this.surface.addEventListener("playing",f),this.surface.srcObject=this.mediaStream,this.surface.play()},d.create=function(h,f,w,C){return Ie(this,void 0,void 0,function(){var x,T;return Xe(this,function(_){switch(_.label){case 0:return x=new d(h,f,C),w.aspectRatio?(T={aspectRatio:w.aspectRatio},[4,x.getFirstTrackOrFail().applyConstraints(T)]):[3,2];case 1:_.sent(),_.label=2;case 2:return x.setupSurface(),[2,x]}})})},d.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},d.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),0===this.mediaStream.getVideoTracks().length)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},d.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},d.prototype.resume=function(h){this.failIfClosed();var f=this,w=function(){setTimeout(h,200),f.surface.removeEventListener("playing",w)};this.surface.addEventListener("playing",w),this.surface.play()},d.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},d.prototype.getSurface=function(){return this.failIfClosed(),this.surface},d.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},d.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},d.prototype.applyVideoConstraints=function(h){return Ie(this,void 0,void 0,function(){return Xe(this,function(f){if("aspectRatio"in h)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(h)]})})},d.prototype.close=function(){if(this.isClosed)return Promise.resolve();var h=this;return new Promise(function(f,w){var x=h.mediaStream.getVideoTracks().length,T=0;h.mediaStream.getVideoTracks().forEach(function(_){h.mediaStream.removeTrack(_),_.stop(),++T>=x&&(h.isClosed=!0,h.parentElement.removeChild(h.surface),f())})})},d.prototype.getCapabilities=function(){return new re(this.getFirstTrackOrFail())},d}(),Re=function(){function d(h){this.mediaStream=h}return d.prototype.render=function(h,f,w){return Ie(this,void 0,void 0,function(){return Xe(this,function(C){return[2,Q.create(h,this.mediaStream,f,w)]})})},d.create=function(h){return Ie(this,void 0,void 0,function(){return Xe(this,function(C){switch(C.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[4,navigator.mediaDevices.getUserMedia({audio:!1,video:h})];case 1:return[2,new d(C.sent())]}})})},d}(),q=function(d,h,f,w){return new(f||(f=Promise))(function(x,T){function _(R){try{E(w.next(R))}catch(j){T(j)}}function P(R){try{E(w.throw(R))}catch(j){T(j)}}function E(R){R.done?x(R.value):function C(x){return x instanceof f?x:new f(function(T){T(x)})}(R.value).then(_,P)}E((w=w.apply(d,h||[])).next())})},Fe=function(d,h){var w,C,x,T,f={label:0,sent:function(){if(1&x[0])throw x[1];return x[1]},trys:[],ops:[]};return T={next:_(0),throw:_(1),return:_(2)},"function"==typeof Symbol&&(T[Symbol.iterator]=function(){return this}),T;function _(E){return function(R){return function P(E){if(w)throw new TypeError("Generator is already executing.");for(;T&&(T=0,E[0]&&(f=0)),f;)try{if(w=1,C&&(x=2&E[0]?C.return:E[0]?C.throw||((x=C.return)&&x.call(C),0):C.next)&&!(x=x.call(C,E[1])).done)return x;switch(C=0,x&&(E=[2&E[0],x.value]),E[0]){case 0:case 1:x=E;break;case 4:return f.label++,{value:E[1],done:!1};case 5:f.label++,C=E[1],E=[0];continue;case 7:E=f.ops.pop(),f.trys.pop();continue;default:if(!(x=(x=f.trys).length>0&&x[x.length-1])&&(6===E[0]||2===E[0])){f=0;continue}if(3===E[0]&&(!x||E[1]>x[0]&&E[1]<x[3])){f.label=E[1];break}if(6===E[0]&&f.label<x[1]){f.label=x[1],x=E;break}if(x&&f.label<x[2]){f.label=x[2],f.ops.push(E);break}x[2]&&f.ops.pop(),f.trys.pop();continue}E=h.call(d,f)}catch(R){E=[6,R],C=0}finally{w=x=0}if(5&E[0])throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}([E,R])}}},ge=function(){function d(){}return d.failIfNotSupported=function(){return q(this,void 0,void 0,function(){return Fe(this,function(h){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new d]})})},d.prototype.create=function(h){return q(this,void 0,void 0,function(){return Fe(this,function(f){return[2,Re.create(h)]})})},d}(),Yt=function(){function d(){}return d.retrieve=function(){if(navigator.mediaDevices)return d.getCamerasFromMediaDevices();var h=MediaStreamTrack;return MediaStreamTrack&&h.getSources?d.getCamerasFromMediaStreamTrack():d.rejectWithError()},d.rejectWithError=function(){var h=xt.unableToQuerySupportedDevices();return d.isHttpsOrLocalhost()||(h=xt.insecureContextCameraQueryError()),Promise.reject(h)},d.isHttpsOrLocalhost=function(){if("https:"===location.protocol)return!0;var h=location.host.split(":")[0];return"127.0.0.1"===h||"localhost"===h},d.getCamerasFromMediaDevices=function(){return function(d,h,f,w){return new(f||(f=Promise))(function(x,T){function _(R){try{E(w.next(R))}catch(j){T(j)}}function P(R){try{E(w.throw(R))}catch(j){T(j)}}function E(R){R.done?x(R.value):function C(x){return x instanceof f?x:new f(function(T){T(x)})}(R.value).then(_,P)}E((w=w.apply(d,h||[])).next())})}(this,void 0,void 0,function(){var h,f,w,C,x,T,_;return function(d,h){var w,C,x,T,f={label:0,sent:function(){if(1&x[0])throw x[1];return x[1]},trys:[],ops:[]};return T={next:_(0),throw:_(1),return:_(2)},"function"==typeof Symbol&&(T[Symbol.iterator]=function(){return this}),T;function _(E){return function(R){return function P(E){if(w)throw new TypeError("Generator is already executing.");for(;T&&(T=0,E[0]&&(f=0)),f;)try{if(w=1,C&&(x=2&E[0]?C.return:E[0]?C.throw||((x=C.return)&&x.call(C),0):C.next)&&!(x=x.call(C,E[1])).done)return x;switch(C=0,x&&(E=[2&E[0],x.value]),E[0]){case 0:case 1:x=E;break;case 4:return f.label++,{value:E[1],done:!1};case 5:f.label++,C=E[1],E=[0];continue;case 7:E=f.ops.pop(),f.trys.pop();continue;default:if(!(x=(x=f.trys).length>0&&x[x.length-1])&&(6===E[0]||2===E[0])){f=0;continue}if(3===E[0]&&(!x||E[1]>x[0]&&E[1]<x[3])){f.label=E[1];break}if(6===E[0]&&f.label<x[1]){f.label=x[1],x=E;break}if(x&&f.label<x[2]){f.label=x[2],f.ops.push(E);break}x[2]&&f.ops.pop(),f.trys.pop();continue}E=h.call(d,f)}catch(R){E=[6,R],C=0}finally{w=x=0}if(5&E[0])throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}([E,R])}}}(this,function(P){switch(P.label){case 0:return h=function(E){for(var j=0,me=E.getVideoTracks();j<me.length;j++){var _e=me[j];_e.enabled=!1,_e.stop(),E.removeTrack(_e)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return f=P.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(w=P.sent(),C=[],x=0,T=w;x<T.length;x++)"videoinput"===(_=T[x]).kind&&C.push({id:_.deviceId,label:_.label});return h(f),[2,C]}})})},d.getCamerasFromMediaStreamTrack=function(){return new Promise(function(h,f){MediaStreamTrack.getSources(function(x){for(var T=[],_=0,P=x;_<P.length;_++){var E=P[_];"video"===E.kind&&T.push({id:E.id,label:E.label})}h(T)})})},d}(),he=function(d){return d[d.UNKNOWN=0]="UNKNOWN",d[d.NOT_STARTED=1]="NOT_STARTED",d[d.SCANNING=2]="SCANNING",d[d.PAUSED=3]="PAUSED",d}(he||{}),zt=function(){function d(){this.state=he.NOT_STARTED,this.onGoingTransactionNewState=he.UNKNOWN}return d.prototype.directTransition=function(h){this.failIfTransitionOngoing(),this.validateTransition(h),this.state=h},d.prototype.startTransition=function(h){return this.failIfTransitionOngoing(),this.validateTransition(h),this.onGoingTransactionNewState=h,this},d.prototype.execute=function(){if(this.onGoingTransactionNewState===he.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var h=this.onGoingTransactionNewState;this.onGoingTransactionNewState=he.UNKNOWN,this.directTransition(h)},d.prototype.cancel=function(){if(this.onGoingTransactionNewState===he.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=he.UNKNOWN},d.prototype.getState=function(){return this.state},d.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==he.UNKNOWN)throw"Cannot transition to a new state, already under transition"},d.prototype.validateTransition=function(h){switch(this.state){case he.UNKNOWN:throw"Transition from unknown is not allowed";case he.NOT_STARTED:this.failIfNewStateIs(h,[he.PAUSED])}},d.prototype.failIfNewStateIs=function(h,f){for(var w=0,C=f;w<C.length;w++)if(h===C[w])throw"Cannot transition from ".concat(this.state," to ").concat(h)},d}(),jt=function(){function d(h){this.stateManager=h}return d.prototype.startTransition=function(h){return this.stateManager.startTransition(h)},d.prototype.directTransition=function(h){this.stateManager.directTransition(h)},d.prototype.getState=function(){return this.stateManager.getState()},d.prototype.canScanFile=function(){return this.stateManager.getState()===he.NOT_STARTED},d.prototype.isScanning=function(){return this.stateManager.getState()!==he.NOT_STARTED},d.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===he.SCANNING},d.prototype.isPaused=function(){return this.stateManager.getState()===he.PAUSED},d}(),it=function(){function d(){}return d.create=function(){return new jt(new zt)},d}(),Xt=function(){var d=function(h,f){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,C){w.__proto__=C}||function(w,C){for(var x in C)Object.prototype.hasOwnProperty.call(C,x)&&(w[x]=C[x])})(h,f)};return function(h,f){if("function"!=typeof f&&null!==f)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");function w(){this.constructor=h}d(h,f),h.prototype=null===f?Object.create(f):(w.prototype=f.prototype,new w)}}(),le=function(d){function h(){return null!==d&&d.apply(this,arguments)||this}return Xt(h,d),h.DEFAULT_WIDTH=300,h.DEFAULT_WIDTH_OFFSET=2,h.FILE_SCAN_MIN_HEIGHT=300,h.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,h.MIN_QR_BOX_SIZE=50,h.SHADED_LEFT=1,h.SHADED_RIGHT=2,h.SHADED_TOP=3,h.SHADED_BOTTOM=4,h.SHADED_REGION_ELEMENT_ID="qr-shaded-region",h.VERBOSE=!1,h.BORDER_SHADER_DEFAULT_COLOR="#ffffff",h.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",h}(nt),Gt=function(){function d(h,f){this.logger=f,this.fps=le.SCAN_DEFAULT_FPS,h?(h.fps&&(this.fps=h.fps),this.disableFlip=!0===h.disableFlip,this.qrbox=h.qrbox,this.aspectRatio=h.aspectRatio,this.videoConstraints=h.videoConstraints):this.disableFlip=le.DEFAULT_DISABLE_FLIP}return d.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?ae.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},d.prototype.isShadedBoxEnabled=function(){return!ce(this.qrbox)},d.create=function(h,f){return new d(h,f)},d}(),ot=function(){function d(h,f){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(h))throw"HTML Element with id=".concat(h," not found");var C;this.elementId=h,this.verbose=!1,"boolean"==typeof f?this.verbose=!0===f:f&&(this.verbose=!0===(C=f).verbose),this.logger=new ze(this.verbose),this.qrcode=new rt(this.getSupportedFormats(f),this.getUseBarCodeDetectorIfSupported(C),this.verbose,this.logger),this.shouldScan=!0,this.stateManagerProxy=it.create()}return d.prototype.start=function(h,f,w,C){var T,x=this;if(!h)throw"cameraIdOrConfig is required";if(!w||"function"!=typeof w)throw"qrCodeSuccessCallback is required and should be a function.";T=C||(this.verbose?this.logger.log:function(){});var _=Gt.create(f,this.logger);this.clearElement();var P=!1;_.videoConstraints&&(_.isMediaStreamConstraintsValid()?P=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var E=P,R=document.getElementById(this.elementId);R.style.position="relative",this.shouldScan=!0,this.element=R;var me=this,_e=this.stateManagerProxy.startTransition(he.SCANNING);return new Promise(function(G,Le){var je=E?_.videoConstraints:me.createVideoConstraints(h);if(!je)return _e.cancel(),void Le("videoConstraints should be defined");var Ge={};(!E||_.aspectRatio)&&(Ge.aspectRatio=_.aspectRatio);var vt={onRenderSurfaceReady:function(Wt,Et){me.setupUi(Wt,Et,_),me.isScanning=!0,me.foreverScan(_,w,T)}};ge.failIfNotSupported().then(function(Wt){Wt.create(je).then(function(Et){return Et.render(x.element,Ge,vt).then(function(Lt){me.renderedCamera=Lt,_e.execute(),G(null)}).catch(function(Lt){_e.cancel(),Le(Lt)})}).catch(function(Et){_e.cancel(),Le(xt.errorGettingUserMedia(Et))})}).catch(function(Wt){_e.cancel(),Le(xt.cameraStreamingNotSupported())})})},d.prototype.pause=function(h){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(he.PAUSED),this.showPausedState(),(ce(h)||!0!==h)&&(h=!1),h&&this.renderedCamera&&this.renderedCamera.pause()},d.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var h=this,f=function(){h.stateManagerProxy.directTransition(he.SCANNING),h.hidePausedState()};this.renderedCamera.isPaused()?this.renderedCamera.resume(function(){f()}):f()},d.prototype.getState=function(){return this.stateManagerProxy.getState()},d.prototype.stop=function(){var h=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var f=this.stateManagerProxy.startTransition(he.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var C=this;return this.renderedCamera.close().then(function(){return C.renderedCamera=null,C.element&&(C.element.removeChild(C.canvasElement),C.canvasElement=null),function(){if(h.element){var x=document.getElementById(le.SHADED_REGION_ELEMENT_ID);x&&h.element.removeChild(x)}}(),C.qrRegion&&(C.qrRegion=null),C.context&&(C.context=null),f.execute(),C.hidePausedState(),C.isScanning=!1,Promise.resolve()})},d.prototype.scanFile=function(h,f){return this.scanFileV2(h,f).then(function(w){return w.decodedText})},d.prototype.scanFileV2=function(h,f){var w=this;if(!(h&&h instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(ce(f)&&(f=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(C,x){w.possiblyCloseLastScanImageFile(),w.clearElement(),w.lastScanImageFile=URL.createObjectURL(h);var T=new Image;T.onload=function(){var _=T.width,P=T.height,E=document.getElementById(w.elementId),R=E.clientWidth?E.clientWidth:le.DEFAULT_WIDTH,j=Math.max(E.clientHeight?E.clientHeight:P,le.FILE_SCAN_MIN_HEIGHT),me=w.computeCanvasDrawConfig(_,P,R,j);if(f){var _e=w.createCanvasElement(R,j,"qr-canvas-visible");_e.style.display="inline-block",E.appendChild(_e);var G=_e.getContext("2d");if(!G)throw"Unable to get 2d context from canvas";G.canvas.width=R,G.canvas.height=j,G.drawImage(T,0,0,_,P,me.x,me.y,me.width,me.height)}var Le=le.FILE_SCAN_HIDDEN_CANVAS_PADDING,je=Math.max(T.width,me.width),Ge=Math.max(T.height,me.height),vt=je+2*Le,Wt=Ge+2*Le,Et=w.createCanvasElement(vt,Wt);E.appendChild(Et);var Lt=Et.getContext("2d");if(!Lt)throw"Unable to get 2d context from canvas";Lt.canvas.width=vt,Lt.canvas.height=Wt,Lt.drawImage(T,0,0,_,P,Le,Le,je,Ge);try{w.qrcode.decodeRobustlyAsync(Et).then(function(hn){C(Ze.createFromQrcodeResult(hn))}).catch(x)}catch(hn){x("QR code parse error, error = ".concat(hn))}},T.onerror=x,T.onabort=x,T.onstalled=x,T.onsuspend=x,T.src=URL.createObjectURL(h)})},d.prototype.clear=function(){this.clearElement()},d.getCameras=function(){return Yt.retrieve()},d.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},d.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},d.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},d.prototype.applyVideoConstraints=function(h){if(!h)throw"videoConstaints is required argument.";if(!ae.isMediaStreamConstraintsValid(h,this.logger))throw"invalid videoConstaints passed, check logs for more details";return this.getRenderedCameraOrFail().applyVideoConstraints(h)},d.prototype.getRenderedCameraOrFail=function(){if(null==this.renderedCamera)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},d.prototype.getSupportedFormats=function(h){if(!h||"boolean"==typeof h||!h.formatsToSupport)return[k.QR_CODE,k.AZTEC,k.CODABAR,k.CODE_39,k.CODE_93,k.CODE_128,k.DATA_MATRIX,k.MAXICODE,k.ITF,k.EAN_13,k.EAN_8,k.PDF_417,k.RSS_14,k.RSS_EXPANDED,k.UPC_A,k.UPC_E,k.UPC_EAN_EXTENSION];if(!Array.isArray(h.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(0===h.formatsToSupport.length)throw"Atleast 1 formatsToSupport is needed.";for(var w=[],C=0,x=h.formatsToSupport;C<x.length;C++){var T=x[C];Nt(T)?w.push(T):this.logger.warn("Invalid format: ".concat(T," passed in config, ignoring."))}if(0===w.length)throw"None of formatsToSupport match supported values.";return w},d.prototype.getUseBarCodeDetectorIfSupported=function(h){if(ce(h))return!0;if(!ce(h.useBarCodeDetectorIfSupported))return!1!==h.useBarCodeDetectorIfSupported;if(ce(h.experimentalFeatures))return!0;var f=h.experimentalFeatures;return!!ce(f.useBarCodeDetectorIfSupported)||!1!==f.useBarCodeDetectorIfSupported},d.prototype.validateQrboxSize=function(h,f,w){var x=w.qrbox;this.validateQrboxConfig(x);var E,T=this.toQrdimensions(h,f,x),_=function(E){if(E<le.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(le.MIN_QR_BOX_SIZE,"px.")};_(T.width),_(T.height),T.width=((E=T.width)>h&&(this.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),E=h),E)},d.prototype.validateQrboxConfig=function(h){if("number"!=typeof h&&"function"!=typeof h&&(void 0===h.width||void 0===h.height))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},d.prototype.toQrdimensions=function(h,f,w){if("number"==typeof w)return{width:w,height:w};if("function"==typeof w)try{return w(h,f)}catch(C){throw new Error("qrbox config was passed as a function but it failed with unknown error"+C)}return w},d.prototype.setupUi=function(h,f,w){w.isShadedBoxEnabled()&&this.validateQrboxSize(h,f,w);var C=ce(w.qrbox)?{width:h,height:f}:w.qrbox;this.validateQrboxConfig(C);var x=this.toQrdimensions(h,f,C);x.height>f&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var T=w.isShadedBoxEnabled()&&x.height<=f,_={x:0,y:0,width:h,height:f},P=T?this.getShadedRegionBounds(h,f,x):_,E=this.createCanvasElement(P.width,P.height),j=E.getContext("2d",{willReadFrequently:!0});j.canvas.width=P.width,j.canvas.height=P.height,this.element.append(E),T&&this.possiblyInsertShadingElement(this.element,h,f,x),this.createScannerPausedUiElement(this.element),this.qrRegion=P,this.context=j,this.canvasElement=E},d.prototype.createScannerPausedUiElement=function(h){var f=document.createElement("div");f.innerText=xt.scannerPaused(),f.style.display="none",f.style.position="absolute",f.style.top="0px",f.style.zIndex="1",f.style.background="rgba(9, 9, 9, 0.46)",f.style.color="#FFECEC",f.style.textAlign="center",f.style.width="100%",h.appendChild(f),this.scannerPausedUiElement=f},d.prototype.scanContext=function(h,f){var w=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(C){return h(C.text,Ze.createFromQrcodeResult(C)),w.possiblyUpdateShaders(!0),!0}).catch(function(C){w.possiblyUpdateShaders(!1);var x=xt.codeParseError(C);return f(x,yt.createFrom(x)),!1})},d.prototype.foreverScan=function(h,f,w){var C=this;if(this.shouldScan&&this.renderedCamera){var x=this.renderedCamera.getSurface(),T=x.videoWidth/x.clientWidth,_=x.videoHeight/x.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";this.context.drawImage(x,this.qrRegion.x*T,this.qrRegion.y*_,this.qrRegion.width*T,this.qrRegion.height*_,0,0,this.qrRegion.width,this.qrRegion.height);var me=function(){C.foreverScanTimeout=setTimeout(function(){C.foreverScan(h,f,w)},C.getTimeoutFps(h.fps))};this.scanContext(f,w).then(function(_e){_e||!0===h.disableFlip?me():(C.context.translate(C.context.canvas.width,0),C.context.scale(-1,1),C.scanContext(f,w).finally(function(){me()}))}).catch(function(_e){C.logger.logError("Error happend while scanning context",_e),me()})}},d.prototype.createVideoConstraints=function(h){if("string"==typeof h)return{deviceId:{exact:h}};if("object"==typeof h){var f="facingMode",w="deviceId",C={user:!0,environment:!0},x="exact",T=function(G){if(G in C)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(G,"'")},_=Object.keys(h);if(1!==_.length)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(_.length," keys");var P=Object.keys(h)[0];if(P!==f&&P!==w)throw"Only '".concat(f,"' and '").concat(w,"' ")+" are supported for 'cameraIdOrConfig'";if(P!==f){var j=h.deviceId;if("string"==typeof j)return{deviceId:j};if("object"==typeof j){if(x in j)return{deviceId:{exact:j["".concat(x)]}};throw"'deviceId' should be string or object with"+" ".concat(x," as key.")}throw"Invalid type of 'deviceId' = ".concat(typeof j)}var E=h.facingMode;if("string"==typeof E){if(T(E))return{facingMode:E}}else{if("object"!=typeof E)throw"Invalid type of 'facingMode' = ".concat(typeof E);if(!(x in E))throw"'facingMode' should be string or object with"+" ".concat(x," as key.");if(T(E["".concat(x)]))return{facingMode:{exact:E["".concat(x)]}}}}throw"Invalid type of 'cameraIdOrConfig' = ".concat(typeof h)},d.prototype.computeCanvasDrawConfig=function(h,f,w,C){if(h<=w&&f<=C)return{x:(w-h)/2,y:(C-f)/2,width:h,height:f};var _=h,P=f;return h>w&&(f*=w/h,h=w),f>C&&(h*=C/f,f=C),this.logger.log("Image downsampled from "+"".concat(_,"X").concat(P)+" to ".concat(h,"X").concat(f,".")),this.computeCanvasDrawConfig(h,f,w,C)},d.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var h=document.getElementById(this.elementId);h&&(h.innerHTML="")},d.prototype.possiblyUpdateShaders=function(h){this.qrMatch!==h&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(f){f.style.backgroundColor=h?le.BORDER_SHADER_MATCH_COLOR:le.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=h)},d.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},d.prototype.createCanvasElement=function(h,f,w){var C=h,x=f,T=document.createElement("canvas");return T.style.width="".concat(C,"px"),T.style.height="".concat(x,"px"),T.style.display="none",T.id=ce(w)?"qr-canvas":w,T},d.prototype.getShadedRegionBounds=function(h,f,w){if(w.width>h||w.height>f)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(h-w.width)/2,y:(f-w.height)/2,width:w.width,height:w.height}},d.prototype.possiblyInsertShadingElement=function(h,f,w,C){if(!(f-C.width<1||w-C.height<1)){var x=document.createElement("div");x.style.position="absolute";var T=(f-C.width)/2,_=(w-C.height)/2;if(x.style.borderLeft="".concat(T,"px solid rgba(0, 0, 0, 0.48)"),x.style.borderRight="".concat(T,"px solid rgba(0, 0, 0, 0.48)"),x.style.borderTop="".concat(_,"px solid rgba(0, 0, 0, 0.48)"),x.style.borderBottom="".concat(_,"px solid rgba(0, 0, 0, 0.48)"),x.style.boxSizing="border-box",x.style.top="0px",x.style.bottom="0px",x.style.left="0px",x.style.right="0px",x.id="".concat(le.SHADED_REGION_ELEMENT_ID),f-C.width<11||w-C.height<11)this.hasBorderShaders=!1;else{this.insertShaderBorders(x,40,5,-5,null,0,!0),this.insertShaderBorders(x,40,5,-5,null,0,!1),this.insertShaderBorders(x,40,5,null,-5,0,!0),this.insertShaderBorders(x,40,5,null,-5,0,!1),this.insertShaderBorders(x,5,45,-5,null,-5,!0),this.insertShaderBorders(x,5,45,null,-5,-5,!0),this.insertShaderBorders(x,5,45,-5,null,-5,!1),this.insertShaderBorders(x,5,45,null,-5,-5,!1),this.hasBorderShaders=!0}h.append(x)}},d.prototype.insertShaderBorders=function(h,f,w,C,x,T,_){var P=document.createElement("div");P.style.position="absolute",P.style.backgroundColor=le.BORDER_SHADER_DEFAULT_COLOR,P.style.width="".concat(f,"px"),P.style.height="".concat(w,"px"),null!==C&&(P.style.top="".concat(C,"px")),null!==x&&(P.style.bottom="".concat(x,"px")),_?P.style.left="".concat(T,"px"):P.style.right="".concat(T,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(P),h.appendChild(P)},d.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},d.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},d.prototype.getTimeoutFps=function(h){return 1e3/h},d}(),Rt="data:image/svg+xml;base64,",qe=Rt+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",ke=Rt+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",J=Rt+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",X=function(){function d(){}return d.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},d}(),St=function(){function d(){this.data=X.createDefault();var h=localStorage.getItem(d.LOCAL_STORAGE_KEY);h?this.data=JSON.parse(h):this.reset()}return d.prototype.hasCameraPermissions=function(){return this.data.hasPermission},d.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},d.prototype.setHasPermission=function(h){this.data.hasPermission=h,this.flush()},d.prototype.setLastUsedCameraId=function(h){this.data.lastUsedCameraId=h,this.flush()},d.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},d.prototype.reset=function(){this.data=X.createDefault(),this.flush()},d.prototype.flush=function(){localStorage.setItem(d.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},d.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",d}(),wt=function(){function d(){this.infoDiv=document.createElement("div")}return d.prototype.renderInto=function(h){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=Ye.poweredBy();var f=document.createElement("a");f.innerText="ScanApp",f.href="https://scanapp.org",f.target="new",f.style.color="white",this.infoDiv.appendChild(f);var w=document.createElement("br"),C=document.createElement("br");this.infoDiv.appendChild(w),this.infoDiv.appendChild(C);var x=document.createElement("a");x.innerText=Ye.reportIssues(),x.href="https://github.com/mebjas/html5-qrcode/issues",x.target="new",x.style.color="white",this.infoDiv.appendChild(x),h.appendChild(this.infoDiv)},d.prototype.show=function(){this.infoDiv.style.display="block"},d.prototype.hide=function(){this.infoDiv.style.display="none"},d}(),Zt=function(){function d(h,f){this.isShowingInfoIcon=!0,this.onTapIn=h,this.onTapOut=f,this.infoIcon=document.createElement("img")}return d.prototype.renderInto=function(h){var f=this;this.infoIcon.alt="Info icon",this.infoIcon.src=J,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(w){return f.onHoverIn()},this.infoIcon.onmouseout=function(w){return f.onHoverOut()},this.infoIcon.onclick=function(w){return f.onClick()},h.appendChild(this.infoIcon)},d.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},d.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},d.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=J,this.infoIcon.style.opacity="0.6")},d}(),tn=function(){function d(){var h=this;this.infoDiv=new wt,this.infoIcon=new Zt(function(){h.infoDiv.show()},function(){h.infoDiv.hide()})}return d.prototype.renderInto=function(h){this.infoDiv.renderInto(h),this.infoIcon.renderInto(h)},d}(),At=function(){function d(){}return d.hasPermissions=function(){return function(d,h,f,w){return new(f||(f=Promise))(function(x,T){function _(R){try{E(w.next(R))}catch(j){T(j)}}function P(R){try{E(w.throw(R))}catch(j){T(j)}}function E(R){R.done?x(R.value):function C(x){return x instanceof f?x:new f(function(T){T(x)})}(R.value).then(_,P)}E((w=w.apply(d,h||[])).next())})}(this,void 0,void 0,function(){var h,f,w,C;return function(d,h){var w,C,x,T,f={label:0,sent:function(){if(1&x[0])throw x[1];return x[1]},trys:[],ops:[]};return T={next:_(0),throw:_(1),return:_(2)},"function"==typeof Symbol&&(T[Symbol.iterator]=function(){return this}),T;function _(E){return function(R){return function P(E){if(w)throw new TypeError("Generator is already executing.");for(;T&&(T=0,E[0]&&(f=0)),f;)try{if(w=1,C&&(x=2&E[0]?C.return:E[0]?C.throw||((x=C.return)&&x.call(C),0):C.next)&&!(x=x.call(C,E[1])).done)return x;switch(C=0,x&&(E=[2&E[0],x.value]),E[0]){case 0:case 1:x=E;break;case 4:return f.label++,{value:E[1],done:!1};case 5:f.label++,C=E[1],E=[0];continue;case 7:E=f.ops.pop(),f.trys.pop();continue;default:if(!(x=(x=f.trys).length>0&&x[x.length-1])&&(6===E[0]||2===E[0])){f=0;continue}if(3===E[0]&&(!x||E[1]>x[0]&&E[1]<x[3])){f.label=E[1];break}if(6===E[0]&&f.label<x[1]){f.label=x[1],x=E;break}if(x&&f.label<x[2]){f.label=x[2],f.ops.push(E);break}x[2]&&f.ops.pop(),f.trys.pop();continue}E=h.call(d,f)}catch(R){E=[6,R],C=0}finally{w=x=0}if(5&E[0])throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}([E,R])}}}(this,function(x){switch(x.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(h=x.sent(),f=0,w=h;f<w.length;f++)if("videoinput"===(C=w[f]).kind&&C.label)return[2,!0];return[2,!1]}})})},d}(),Ue=function(){function d(h){this.supportedScanTypes=this.validateAndReturnScanTypes(h)}return d.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},d.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},d.prototype.isCameraScanRequired=function(){for(var h=0,f=this.supportedScanTypes;h<f.length;h++)if(d.isCameraScanType(f[h]))return!0;return!1},d.isCameraScanType=function(h){return h===gt.SCAN_TYPE_CAMERA},d.isFileScanType=function(h){return h===gt.SCAN_TYPE_FILE},d.prototype.validateAndReturnScanTypes=function(h){if(!h||0===h.length)return nt.DEFAULT_SUPPORTED_SCAN_TYPE;var f=nt.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(h.length>f)throw"Max ".concat(f," values expected for ")+"supportedScanTypes";for(var w=0,C=h;w<C.length;w++){var x=C[w];if(!nt.DEFAULT_SUPPORTED_SCAN_TYPE.includes(x))throw"Unsupported scan type ".concat(x)}return h},d}(),Je=function(){function d(){}return d.ALL_ELEMENT_CLASS="html5-qrcode-element",d.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",d.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",d.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",d.TORCH_BUTTON_ID="html5-qrcode-button-torch",d.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",d.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",d.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",d.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",d.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",d.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",d}(),be=function(){function d(){}return d.createElement=function(h,f){var w=document.createElement(h);return w.id=f,w.classList.add(Je.ALL_ELEMENT_CLASS),"button"===h&&w.setAttribute("type","button"),w},d}(),$e=function(d,h,f,w){return new(f||(f=Promise))(function(x,T){function _(R){try{E(w.next(R))}catch(j){T(j)}}function P(R){try{E(w.throw(R))}catch(j){T(j)}}function E(R){R.done?x(R.value):function C(x){return x instanceof f?x:new f(function(T){T(x)})}(R.value).then(_,P)}E((w=w.apply(d,h||[])).next())})},Te=function(d,h){var w,C,x,T,f={label:0,sent:function(){if(1&x[0])throw x[1];return x[1]},trys:[],ops:[]};return T={next:_(0),throw:_(1),return:_(2)},"function"==typeof Symbol&&(T[Symbol.iterator]=function(){return this}),T;function _(E){return function(R){return function P(E){if(w)throw new TypeError("Generator is already executing.");for(;T&&(T=0,E[0]&&(f=0)),f;)try{if(w=1,C&&(x=2&E[0]?C.return:E[0]?C.throw||((x=C.return)&&x.call(C),0):C.next)&&!(x=x.call(C,E[1])).done)return x;switch(C=0,x&&(E=[2&E[0],x.value]),E[0]){case 0:case 1:x=E;break;case 4:return f.label++,{value:E[1],done:!1};case 5:f.label++,C=E[1],E=[0];continue;case 7:E=f.ops.pop(),f.trys.pop();continue;default:if(!(x=(x=f.trys).length>0&&x[x.length-1])&&(6===E[0]||2===E[0])){f=0;continue}if(3===E[0]&&(!x||E[1]>x[0]&&E[1]<x[3])){f.label=E[1];break}if(6===E[0]&&f.label<x[1]){f.label=x[1],x=E;break}if(x&&f.label<x[2]){f.label=x[2],f.ops.push(E);break}x[2]&&f.ops.pop(),f.trys.pop();continue}E=h.call(d,f)}catch(R){E=[6,R],C=0}finally{w=x=0}if(5&E[0])throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}([E,R])}}},V=function(){function d(h,f,w){this.isTorchOn=!1,this.torchCapability=h,this.buttonController=f,this.onTorchActionFailureCallback=w}return d.prototype.isTorchEnabled=function(){return this.isTorchOn},d.prototype.flipState=function(){return $e(this,void 0,void 0,function(){var h,f;return Te(this,function(w){switch(w.label){case 0:this.buttonController.disable(),h=!this.isTorchOn,w.label=1;case 1:return w.trys.push([1,3,,4]),[4,this.torchCapability.apply(h)];case 2:return w.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),h),[3,4];case 3:return f=w.sent(),this.propagateFailure(h,f),this.buttonController.enable(),[3,4];case 4:return[2]}})})},d.prototype.updateUiBasedOnLatestSettings=function(h,f){h===f?(this.buttonController.setText(f?pe.torchOffButton():pe.torchOnButton()),this.isTorchOn=f):this.propagateFailure(f),this.buttonController.enable()},d.prototype.propagateFailure=function(h,f){var w=h?pe.torchOnFailedMessage():pe.torchOffFailedMessage();f&&(w+="; Error = "+f),this.onTorchActionFailureCallback(w)},d.prototype.reset=function(){this.isTorchOn=!1},d}(),Ct=function(){function d(h,f){this.onTorchActionFailureCallback=f,this.torchButton=be.createElement("button",Je.TORCH_BUTTON_ID),this.torchController=new V(h,this,f)}return d.prototype.render=function(h,f){var w=this;this.torchButton.innerText=pe.torchOnButton(),this.torchButton.style.display=f.display,this.torchButton.style.marginLeft=f.marginLeft;var C=this;this.torchButton.addEventListener("click",function(x){return $e(w,void 0,void 0,function(){return Te(this,function(T){switch(T.label){case 0:return[4,C.torchController.flipState()];case 1:return T.sent(),C.torchController.isTorchEnabled()?(C.torchButton.classList.remove(Je.TORCH_BUTTON_CLASS_TORCH_OFF),C.torchButton.classList.add(Je.TORCH_BUTTON_CLASS_TORCH_ON)):(C.torchButton.classList.remove(Je.TORCH_BUTTON_CLASS_TORCH_ON),C.torchButton.classList.add(Je.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),h.appendChild(this.torchButton)},d.prototype.updateTorchCapability=function(h){this.torchController=new V(h,this,this.onTorchActionFailureCallback)},d.prototype.getTorchButton=function(){return this.torchButton},d.prototype.hide=function(){this.torchButton.style.display="none"},d.prototype.show=function(){this.torchButton.style.display="inline-block"},d.prototype.disable=function(){this.torchButton.disabled=!0},d.prototype.enable=function(){this.torchButton.disabled=!1},d.prototype.setText=function(h){this.torchButton.innerText=h},d.prototype.reset=function(){this.torchButton.innerText=pe.torchOnButton(),this.torchController.reset()},d.create=function(h,f,w,C){var x=new d(f,C);return x.render(h,w),x},d}(),xe=function(){function d(h,f,w){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=f?"block":"none",h.appendChild(this.fileBasedScanRegion);var C=document.createElement("label");C.setAttribute("for",this.getFileScanInputId()),C.style.display="inline-block",this.fileBasedScanRegion.appendChild(C),this.fileSelectionButton=be.createElement("button",Je.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(_){C.click()}),C.append(this.fileSelectionButton),this.fileScanInput=be.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",C.appendChild(this.fileScanInput);var x=this;this.fileScanInput.addEventListener("change",function(_){if(null!=_&&null!=_.target){var P=_.target;if(!P.files||0!==P.files.length){var R=P.files[0];x.setImageNameToButton(R.name),w(R)}}});var T=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(T),this.fileBasedScanRegion.addEventListener("dragenter",function(_){x.fileBasedScanRegion.style.border=x.fileBasedScanRegionActiveBorder(),_.stopPropagation(),_.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(_){x.fileBasedScanRegion.style.border=x.fileBasedScanRegionDefaultBorder(),_.stopPropagation(),_.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(_){x.fileBasedScanRegion.style.border=x.fileBasedScanRegionActiveBorder(),_.stopPropagation(),_.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(_){_.stopPropagation(),_.preventDefault(),x.fileBasedScanRegion.style.border=x.fileBasedScanRegionDefaultBorder();var P=_.dataTransfer;if(P){var E=P.files;if(!E||0===E.length)return;for(var R=!1,j=0;j<E.length;++j){var me=E.item(j);if(me&&me.type.match(/image.*/)){R=!0,x.setImageNameToButton(me.name),w(me),T.innerText=pe.dragAndDropMessage();break}}R||(T.innerText=pe.dragAndDropMessageOnlyImages())}})}return d.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},d.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},d.prototype.isShowing=function(){return"block"===this.fileBasedScanRegion.style.display},d.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},d.prototype.createFileBasedScanRegion=function(){var h=document.createElement("div");return h.style.textAlign="center",h.style.margin="auto",h.style.width="80%",h.style.maxWidth="600px",h.style.border=this.fileBasedScanRegionDefaultBorder(),h.style.padding="10px",h.style.marginBottom="10px",h},d.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},d.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},d.prototype.createDragAndDropMessage=function(){var h=document.createElement("div");return h.innerText=pe.dragAndDropMessage(),h.style.fontWeight="400",h},d.prototype.setImageNameToButton=function(h){if(h.length>20){var w=h.substring(0,8),C=h.length,x=h.substring(C-8,C);h="".concat(w,"....").concat(x)}var T=pe.fileSelectionChooseAnother()+" - "+h;this.fileSelectionButton.innerText=T},d.prototype.setInitialValueToButton=function(){var h=pe.fileSelectionChooseImage()+" - "+pe.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=h},d.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},d.create=function(h,f,w){return new d(h,f,w)},d}(),Oe=function(){function d(h){this.selectElement=be.createElement("select",Je.CAMERA_SELECTION_SELECT_ID),this.cameras=h,this.options=[]}return d.prototype.render=function(h){var f=document.createElement("span");f.style.marginRight="10px";var w=this.cameras.length;if(0===w)throw new Error("No cameras found");if(1===w)f.style.display="none";else{var C=pe.selectCamera();f.innerText="".concat(C," (").concat(this.cameras.length,")  ")}for(var x=1,T=0,_=this.cameras;T<_.length;T++){var P=_[T],E=P.id,R=null==P.label?E:P.label;(!R||""===R)&&(R=[pe.anonymousCameraPrefix(),x++].join(" "));var j=document.createElement("option");j.value=E,j.innerText=R,this.options.push(j),this.selectElement.appendChild(j)}f.appendChild(this.selectElement),h.appendChild(f)},d.prototype.disable=function(){this.selectElement.disabled=!0},d.prototype.isDisabled=function(){return!0===this.selectElement.disabled},d.prototype.enable=function(){this.selectElement.disabled=!1},d.prototype.getValue=function(){return this.selectElement.value},d.prototype.hasValue=function(h){for(var f=0,w=this.options;f<w.length;f++)if(w[f].value===h)return!0;return!1},d.prototype.setValue=function(h){if(!this.hasValue(h))throw new Error("".concat(h," is not present in the camera list."));this.selectElement.value=h},d.prototype.hasSingleItem=function(){return 1===this.cameras.length},d.prototype.numCameras=function(){return this.cameras.length},d.create=function(h,f){var w=new d(f);return w.render(h),w},d}(),Mt=function(){function d(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=be.createElement("input",Je.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return d.prototype.render=function(h,f){this.zoomElementContainer.style.display=f?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",h.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var w=pe.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(w),this.rangeText.style.marginRight="10px";var C=this;this.rangeInput.addEventListener("input",function(){return C.onValueChange()}),this.rangeInput.addEventListener("change",function(){return C.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},d.prototype.onValueChange=function(){var h=pe.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(h),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},d.prototype.setValues=function(h,f,w,C){this.rangeInput.min=h.toString(),this.rangeInput.max=f.toString(),this.rangeInput.step=C.toString(),this.rangeInput.value=w.toString(),this.onValueChange()},d.prototype.show=function(){this.zoomElementContainer.style.display="block"},d.prototype.hide=function(){this.zoomElementContainer.style.display="none"},d.prototype.setOnCameraZoomValueChangeCallback=function(h){this.onChangeCallback=h},d.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},d.create=function(h,f){var w=new d;return w.render(h,f),w},d}(),ft=function(d){return d[d.STATUS_DEFAULT=0]="STATUS_DEFAULT",d[d.STATUS_SUCCESS=1]="STATUS_SUCCESS",d[d.STATUS_WARNING=2]="STATUS_WARNING",d[d.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION",d}(ft||{});!function(){function d(h,f,w){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=h,this.config=this.createConfig(f),this.verbose=!0===w,!document.getElementById(h))throw"HTML Element with id=".concat(h," not found");this.scanTypeSelector=new Ue(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new ze(this.verbose),this.persistedDataManager=new St,!0!==f.rememberLastUsedCamera&&this.persistedDataManager.reset()}d.prototype.render=function(h,f){var w=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(x,T){if(h)h(x,T);else{if(w.lastMatchFound===x)return;w.lastMatchFound=x,w.setHeaderMessage(pe.lastMatch(x),ft.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(x,T){f&&f(x,T)};var C=document.getElementById(this.elementId);if(!C)throw"HTML Element with id=".concat(this.elementId," not found");C.innerHTML="",this.createBasicLayout(C),this.html5Qrcode=new ot(this.getScanRegionId(),function Ne(d,h){return{formatsToSupport:d.formatsToSupport,useBarCodeDetectorIfSupported:d.useBarCodeDetectorIfSupported,experimentalFeatures:d.experimentalFeatures,verbose:h}}(this.config,this.verbose))},d.prototype.pause=function(h){(ce(h)||!0!==h)&&(h=!1),this.getHtml5QrcodeOrFail().pause(h)},d.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},d.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},d.prototype.clear=function(){var h=this,f=function(){var w=document.getElementById(h.elementId);w&&(w.innerHTML="",h.resetBasicLayout(w))};return this.html5Qrcode?new Promise(function(w,C){h.html5Qrcode?h.html5Qrcode.isScanning?h.html5Qrcode.stop().then(function(x){h.html5Qrcode?(h.html5Qrcode.clear(),f(),w()):w()}).catch(function(x){h.verbose&&h.logger.logError("Unable to stop qrcode scanner",x),C(x)}):(h.html5Qrcode.clear(),f(),w()):w()}):Promise.resolve()},d.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},d.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},d.prototype.applyVideoConstraints=function(h){return this.getHtml5QrcodeOrFail().applyVideoConstraints(h)},d.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},d.prototype.createConfig=function(h){return h?(h.fps||(h.fps=nt.SCAN_DEFAULT_FPS),h.rememberLastUsedCamera!==!nt.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(h.rememberLastUsedCamera=nt.DEFAULT_REMEMBER_LAST_CAMERA_USED),h.supportedScanTypes||(h.supportedScanTypes=nt.DEFAULT_SUPPORTED_SCAN_TYPE),h):{fps:nt.SCAN_DEFAULT_FPS,rememberLastUsedCamera:nt.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:nt.DEFAULT_SUPPORTED_SCAN_TYPE}},d.prototype.createBasicLayout=function(h){h.style.position="relative",h.style.padding="0px",h.style.border="1px solid silver",this.createHeader(h);var f=document.createElement("div"),w=this.getScanRegionId();f.id=w,f.style.width="100%",f.style.minHeight="100px",f.style.textAlign="center",h.appendChild(f),Ue.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var C=document.createElement("div"),x=this.getDashboardId();C.id=x,C.style.width="100%",h.appendChild(C),this.setupInitialDashboard(C)},d.prototype.resetBasicLayout=function(h){h.style.border="none"},d.prototype.setupInitialDashboard=function(h){this.createSection(h),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},d.prototype.createHeader=function(h){var f=document.createElement("div");f.style.textAlign="left",f.style.margin="0px",h.appendChild(f),(new tn).renderInto(f);var C=document.createElement("div");C.id=this.getHeaderMessageContainerId(),C.style.display="none",C.style.textAlign="center",C.style.fontSize="14px",C.style.padding="2px 10px",C.style.margin="4px",C.style.borderTop="1px solid #f6f6f6",f.appendChild(C)},d.prototype.createSection=function(h){var f=document.createElement("div");f.id=this.getDashboardSectionId(),f.style.width="100%",f.style.padding="10px 0px 10px 0px",f.style.textAlign="left",h.appendChild(f)},d.prototype.createCameraListUi=function(h,f,w){var C=this;C.showHideScanTypeSwapLink(!1),C.setHeaderMessage(pe.cameraPermissionRequesting());var x=function(){w||C.createPermissionButton(h,f)};ot.getCameras().then(function(T){C.persistedDataManager.setHasPermission(!0),C.showHideScanTypeSwapLink(!0),C.resetHeaderMessage(),T&&T.length>0?(h.removeChild(f),C.renderCameraSelection(T)):(C.setHeaderMessage(pe.noCameraFound(),ft.STATUS_WARNING),x())}).catch(function(T){C.persistedDataManager.setHasPermission(!1),w?w.disabled=!1:x(),C.setHeaderMessage(T,ft.STATUS_WARNING),C.showHideScanTypeSwapLink(!0)})},d.prototype.createPermissionButton=function(h,f){var w=this,C=be.createElement("button",this.getCameraPermissionButtonId());C.innerText=pe.cameraPermissionTitle(),C.addEventListener("click",function(){C.disabled=!0,w.createCameraListUi(h,f,C)}),f.appendChild(C)},d.prototype.createPermissionsUi=function(h,f){var w=this;Ue.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()?At.hasPermissions().then(function(C){C?w.createCameraListUi(h,f):(w.persistedDataManager.setHasPermission(!1),w.createPermissionButton(h,f))}).catch(function(C){w.persistedDataManager.setHasPermission(!1),w.createPermissionButton(h,f)}):this.createPermissionButton(h,f)},d.prototype.createSectionControlPanel=function(){var h=document.getElementById(this.getDashboardSectionId()),f=document.createElement("div");h.appendChild(f);var w=document.createElement("div");w.id=this.getDashboardSectionCameraScanRegionId(),w.style.display=Ue.isCameraScanType(this.currentScanType)?"block":"none",f.appendChild(w);var C=document.createElement("div");C.style.textAlign="center",w.appendChild(C),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(w,C),this.renderFileScanUi(f)},d.prototype.renderFileScanUi=function(h){var f=Ue.isFileScanType(this.currentScanType),w=this;this.fileSelectionUi=xe.create(h,f,function(x){if(!w.html5Qrcode)throw"html5Qrcode not defined";Ue.isFileScanType(w.currentScanType)&&(w.setHeaderMessage(pe.loadingImage()),w.html5Qrcode.scanFileV2(x,!0).then(function(T){w.resetHeaderMessage(),w.qrCodeSuccessCallback(T.decodedText,T)}).catch(function(T){w.setHeaderMessage(T,ft.STATUS_WARNING),w.qrCodeErrorCallback(T,yt.createFrom(T))}))})},d.prototype.renderCameraSelection=function(h){var f=this,w=this,C=document.getElementById(this.getDashboardSectionCameraScanRegionId());C.style.textAlign="center";var x=Mt.create(C,!1),_=Oe.create(C,h),P=document.createElement("span"),E=be.createElement("button",Je.CAMERA_START_BUTTON_ID);E.innerText=pe.scanButtonStartScanningText(),P.appendChild(E);var j,R=be.createElement("button",Je.CAMERA_STOP_BUTTON_ID);R.innerText=pe.scanButtonStopScanningText(),R.style.display="none",R.disabled=!0,P.appendChild(R),C.appendChild(P);var _e=function(Le){Le||(E.style.display="none"),E.innerText=pe.scanButtonStartScanningText(),E.style.opacity="1",E.disabled=!1,Le&&(E.style.display="inline-block")};if(E.addEventListener("click",function(Le){E.innerText=pe.scanButtonScanningStarting(),_.disable(),E.disabled=!0,E.style.opacity="0.5",f.scanTypeSelector.hasMoreThanOneScanType()&&w.showHideScanTypeSwapLink(!1),w.resetHeaderMessage();var je=_.getValue();w.persistedDataManager.setLastUsedCameraId(je),w.html5Qrcode.start(je,function mn(d){return{fps:d.fps,qrbox:d.qrbox,aspectRatio:d.aspectRatio,disableFlip:d.disableFlip,videoConstraints:d.videoConstraints}}(w.config),w.qrCodeSuccessCallback,w.qrCodeErrorCallback).then(function(Ge){R.disabled=!1,R.style.display="inline-block",_e(!1);var vt=w.html5Qrcode.getRunningTrackCameraCapabilities();!0===f.config.showTorchButtonIfSupported&&function(Le){Le.torchFeature().isSupported()?(j?j.updateTorchCapability(Le.torchFeature()):j=Ct.create(P,Le.torchFeature(),{display:"none",marginLeft:"5px"},function(je){w.setHeaderMessage(je,ft.STATUS_WARNING)}),j.show()):j&&j.hide()}(vt),!0===f.config.showZoomSliderIfSupported&&function(Le){var je=Le.zoomFeature();if(je.isSupported()){x.setOnCameraZoomValueChangeCallback(function(vt){je.apply(vt)});var Ge=1;f.config.defaultZoomValueIfSupported&&(Ge=f.config.defaultZoomValueIfSupported),Ge=function Ee(d,h,f){return d>f?f:d<h?h:d}(Ge,je.min(),je.max()),x.setValues(je.min(),je.max(),Ge,je.step()),x.show()}}(vt)}).catch(function(Ge){w.showHideScanTypeSwapLink(!0),_.enable(),_e(!0),w.setHeaderMessage(Ge,ft.STATUS_WARNING)})}),_.hasSingleItem()&&E.click(),R.addEventListener("click",function(Le){if(!w.html5Qrcode)throw"html5Qrcode not defined";R.disabled=!0,w.html5Qrcode.stop().then(function(je){f.scanTypeSelector.hasMoreThanOneScanType()&&w.showHideScanTypeSwapLink(!0),_.enable(),E.disabled=!1,R.style.display="none",E.style.display="inline-block",j&&(j.reset(),j.hide()),x.removeOnCameraZoomValueChangeCallback(),x.hide(),w.insertCameraScanImageToScanRegion()}).catch(function(je){R.disabled=!1,w.setHeaderMessage(je,ft.STATUS_WARNING)})}),w.persistedDataManager.getLastUsedCameraId()){var G=w.persistedDataManager.getLastUsedCameraId();_.hasValue(G)?(_.setValue(G),E.click()):w.persistedDataManager.resetLastUsedCameraId()}},d.prototype.createSectionSwap=function(){var h=this,f=pe.textIfCameraScanSelected(),w=pe.textIfFileScanSelected(),C=document.getElementById(this.getDashboardSectionId()),x=document.createElement("div");x.style.textAlign="center";var T=be.createElement("span",this.getDashboardSectionSwapLinkId());T.style.textDecoration="underline",T.style.cursor="pointer",T.innerText=Ue.isCameraScanType(this.currentScanType)?f:w,T.addEventListener("click",function(){h.sectionSwapAllowed?(h.resetHeaderMessage(),h.fileSelectionUi.resetValue(),h.sectionSwapAllowed=!1,Ue.isCameraScanType(h.currentScanType)?(h.clearScanRegion(),h.getCameraScanRegion().style.display="none",h.fileSelectionUi.show(),T.innerText=w,h.currentScanType=gt.SCAN_TYPE_FILE,h.insertFileScanImageToScanRegion()):(h.clearScanRegion(),h.getCameraScanRegion().style.display="block",h.fileSelectionUi.hide(),T.innerText=f,h.currentScanType=gt.SCAN_TYPE_CAMERA,h.insertCameraScanImageToScanRegion(),h.startCameraScanIfPermissionExistsOnSwap()),h.sectionSwapAllowed=!0):h.verbose&&h.logger.logError("Section swap called when not allowed")}),x.appendChild(T),C.appendChild(x)},d.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var h=this,f=this;this.persistedDataManager.hasCameraPermissions()&&At.hasPermissions().then(function(w){if(w){var C=document.getElementById(f.getCameraPermissionButtonId());if(!C)throw h.logger.logError("Permission button not found, fail;"),"Permission button not found";C.click()}else f.persistedDataManager.setHasPermission(!1)}).catch(function(w){f.persistedDataManager.setHasPermission(!1)})},d.prototype.resetHeaderMessage=function(){document.getElementById(this.getHeaderMessageContainerId()).style.display="none"},d.prototype.setHeaderMessage=function(h,f){f||(f=ft.STATUS_DEFAULT);var w=this.getHeaderMessageDiv();switch(w.innerText=h,w.style.display="block",f){case ft.STATUS_SUCCESS:w.style.background="rgba(106, 175, 80, 0.26)",w.style.color="#477735";break;case ft.STATUS_WARNING:w.style.background="rgba(203, 36, 49, 0.14)",w.style.color="#cb2431";break;default:w.style.background="rgba(0, 0, 0, 0)",w.style.color="rgb(17, 17, 17)"}},d.prototype.showHideScanTypeSwapLink=function(h){this.scanTypeSelector.hasMoreThanOneScanType()&&(!0!==h&&(h=!1),this.sectionSwapAllowed=h,this.getDashboardSectionSwapLink().style.display=h?"inline-block":"none")},d.prototype.insertCameraScanImageToScanRegion=function(){var h=this,f=document.getElementById(this.getScanRegionId());if(this.cameraScanImage)return f.innerHTML="<br>",void f.appendChild(this.cameraScanImage);this.cameraScanImage=new Image,this.cameraScanImage.onload=function(w){f.innerHTML="<br>",f.appendChild(h.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=qe,this.cameraScanImage.alt=pe.cameraScanAltText()},d.prototype.insertFileScanImageToScanRegion=function(){var h=this,f=document.getElementById(this.getScanRegionId());if(this.fileScanImage)return f.innerHTML="<br>",void f.appendChild(this.fileScanImage);this.fileScanImage=new Image,this.fileScanImage.onload=function(w){f.innerHTML="<br>",f.appendChild(h.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=ke,this.fileScanImage.alt=pe.fileScanAltText()},d.prototype.clearScanRegion=function(){document.getElementById(this.getScanRegionId()).innerHTML=""},d.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},d.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},d.prototype.getDashboardSectionSwapLinkId=function(){return Je.SCAN_TYPE_CHANGE_ANCHOR_ID},d.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},d.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},d.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},d.prototype.getCameraPermissionButtonId=function(){return Je.CAMERA_PERMISSION_BUTTON_ID},d.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},d.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},d.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())}}()},5496:function(En,Ft){!function(v){"use strict";function k(l){return null==l}var Dt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,e){l.__proto__=e}||function(l,e){for(var t in e)e.hasOwnProperty(t)&&(l[t]=e[t])};var nt=function(l){function e(t){var n=this.constructor,r=l.call(this,t)||this;return Object.defineProperty(r,"name",{value:n.name,enumerable:!1}),function Nt(l,e){var t=Object.setPrototypeOf;t?t(l,e):l.__proto__=e}(r,n.prototype),function gt(l,e){void 0===e&&(e=l.constructor);var t=Error.captureStackTrace;t&&t(l,e)}(r),r}return function et(l,e){function t(){this.constructor=l}Dt(l,e),l.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}(e,l),e}(Error);let ue=(()=>{class l extends nt{constructor(t=void 0){super(t),this.message=t}getKind(){return this.constructor.kind}}return l.kind="Exception",l})(),Ze=(()=>{class l extends ue{}return l.kind="ArgumentException",l})(),Z=(()=>{class l extends ue{}return l.kind="IllegalArgumentException",l})();class yt{constructor(e){if(this.binarizer=e,null===e)throw new Z("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(e,t){return this.binarizer.getBlackRow(e,t)}getBlackMatrix(){return null==this.matrix&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(e,t,n,r){const i=this.binarizer.getLuminanceSource().crop(e,t,n,r);return new yt(this.binarizer.createBinarizer(i))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new yt(this.binarizer.createBinarizer(e))}rotateCounterClockwise45(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new yt(this.binarizer.createBinarizer(e))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}let ze=(()=>{class l extends ue{static getChecksumInstance(){return new l}}return l.kind="ChecksumException",l})();class ce{constructor(e){this.source=e}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class Ee{static arraycopy(e,t,n,r,i){for(;i--;)n[r++]=e[t++]}static currentTimeMillis(){return Date.now()}}let xt=(()=>{class l extends ue{}return l.kind="IndexOutOfBoundsException",l})(),pe=(()=>{class l extends xt{constructor(t=void 0,n=void 0){super(n),this.index=t,this.message=n}}return l.kind="ArrayIndexOutOfBoundsException",l})();class Ye{static fill(e,t){for(let n=0,r=e.length;n<r;n++)e[n]=t}static fillWithin(e,t,n,r){Ye.rangeCheck(e.length,t,n);for(let i=t;i<n;i++)e[i]=r}static rangeCheck(e,t,n){if(t>n)throw new Z("fromIndex("+t+") > toIndex("+n+")");if(t<0)throw new pe(t);if(n>e)throw new pe(n)}static asList(...e){return e}static create(e,t,n){return Array.from({length:e}).map(i=>Array.from({length:t}).fill(n))}static createInt32Array(e,t,n){return Array.from({length:e}).map(i=>Int32Array.from({length:t}).fill(n))}static equals(e,t){if(!(e&&t&&e.length&&t.length&&e.length===t.length))return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}static hashCode(e){if(null===e)return 0;let t=1;for(const n of e)t=31*t+n;return t}static fillUint8Array(e,t){for(let n=0;n!==e.length;n++)e[n]=t}static copyOf(e,t){return e.slice(0,t)}static copyOfUint8Array(e,t){if(e.length<=t){const n=new Uint8Array(t);return n.set(e),n}return e.slice(0,t)}static copyOfRange(e,t,n){const r=n-t,i=new Int32Array(r);return Ee.arraycopy(e,t,i,0,r),i}static binarySearch(e,t,n){void 0===n&&(n=Ye.numberComparator);let r=0,i=e.length-1;for(;r<=i;){const s=i+r>>1,o=n(t,e[s]);if(o>0)r=s+1;else{if(!(o<0))return s;i=s-1}}return-r-1}static numberComparator(e,t){return e-t}}class ae{static numberOfTrailingZeros(e){let t;if(0===e)return 32;let n=31;return t=e<<16,0!==t&&(n-=16,e=t),t=e<<8,0!==t&&(n-=8,e=t),t=e<<4,0!==t&&(n-=4,e=t),t=e<<2,0!==t&&(n-=2,e=t),n-(e<<1>>>31)}static numberOfLeadingZeros(e){if(0===e)return 32;let t=1;return e>>>16||(t+=16,e<<=16),e>>>24||(t+=8,e<<=8),e>>>28||(t+=4,e<<=4),e>>>30||(t+=2,e<<=2),t-=e>>>31,t}static toHexString(e){return e.toString(16)}static toBinaryString(e){return String(parseInt(String(e),2))}static bitCount(e){return e=(e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135,63&(e+=e>>>8)+(e>>>16)}static truncDivision(e,t){return Math.trunc(e/t)}static parseInt(e,t=void 0){return parseInt(e,t)}}ae.MIN_VALUE_32_BITS=-2147483648,ae.MAX_VALUE=Number.MAX_SAFE_INTEGER;class W{constructor(e,t){void 0===e?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,this.bits=null==t?W.makeArray(e):t)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(e){if(e>32*this.bits.length){const t=W.makeArray(e);Ee.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}}get(e){return!!(this.bits[Math.floor(e/32)]&1<<(31&e))}set(e){this.bits[Math.floor(e/32)]|=1<<(31&e)}flip(e){this.bits[Math.floor(e/32)]^=1<<(31&e)}getNextSet(e){const t=this.size;if(e>=t)return t;const n=this.bits;let r=Math.floor(e/32),i=n[r];i&=~((1<<(31&e))-1);const s=n.length;for(;0===i;){if(++r===s)return t;i=n[r]}const o=32*r+ae.numberOfTrailingZeros(i);return o>t?t:o}getNextUnset(e){const t=this.size;if(e>=t)return t;const n=this.bits;let r=Math.floor(e/32),i=~n[r];i&=~((1<<(31&e))-1);const s=n.length;for(;0===i;){if(++r===s)return t;i=~n[r]}const o=32*r+ae.numberOfTrailingZeros(i);return o>t?t:o}setBulk(e,t){this.bits[Math.floor(e/32)]=t}setRange(e,t){if(t<e||e<0||t>this.size)throw new Z;if(t===e)return;t--;const n=Math.floor(e/32),r=Math.floor(t/32),i=this.bits;for(let s=n;s<=r;s++)i[s]|=(2<<(s<r?31:31&t))-(1<<(s>n?0:31&e))}clear(){const e=this.bits.length,t=this.bits;for(let n=0;n<e;n++)t[n]=0}isRange(e,t,n){if(t<e||e<0||t>this.size)throw new Z;if(t===e)return!0;t--;const r=Math.floor(e/32),i=Math.floor(t/32),s=this.bits;for(let o=r;o<=i;o++){const u=(2<<(o<i?31:31&t))-(1<<(o>r?0:31&e))&4294967295;if((s[o]&u)!==(n?u:0))return!1}return!0}appendBit(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(31&this.size)),this.size++}appendBits(e,t){if(t<0||t>32)throw new Z("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(let n=t;n>0;n--)this.appendBit(1==(e>>n-1&1))}appendBitArray(e){const t=e.size;this.ensureCapacity(this.size+t);for(let n=0;n<t;n++)this.appendBit(e.get(n))}xor(e){if(this.size!==e.size)throw new Z("Sizes don't match");const t=this.bits;for(let n=0,r=t.length;n<r;n++)t[n]^=e.bits[n]}toBytes(e,t,n,r){for(let i=0;i<r;i++){let s=0;for(let o=0;o<8;o++)this.get(e)&&(s|=1<<7-o),e++;t[n+i]=s}}getBitArray(){return this.bits}reverse(){const e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),n=t+1,r=this.bits;for(let i=0;i<n;i++){let s=r[i];s=s>>1&1431655765|(1431655765&s)<<1,s=s>>2&858993459|(858993459&s)<<2,s=s>>4&252645135|(252645135&s)<<4,s=s>>8&16711935|(16711935&s)<<8,s=s>>16&65535|(65535&s)<<16,e[t-i]=s}if(this.size!==32*n){const i=32*n-this.size;let s=e[0]>>>i;for(let o=1;o<n;o++){const a=e[o];s|=a<<32-i,e[o-1]=s,s=a>>>i}e[n-1]=s}this.bits=e}static makeArray(e){return new Int32Array(Math.floor((e+31)/32))}equals(e){return e instanceof W&&this.size===e.size&&Ye.equals(this.bits,e.bits)}hashCode(){return 31*this.size+Ye.hashCode(this.bits)}toString(){let e="";for(let t=0,n=this.size;t<n;t++)7&t||(e+=" "),e+=this.get(t)?"X":".";return e}clone(){return new W(this.size,this.bits.slice())}}var Se=function(l){return l[l.OTHER=0]="OTHER",l[l.PURE_BARCODE=1]="PURE_BARCODE",l[l.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",l[l.TRY_HARDER=3]="TRY_HARDER",l[l.CHARACTER_SET=4]="CHARACTER_SET",l[l.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",l[l.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",l[l.ASSUME_GS1=7]="ASSUME_GS1",l[l.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",l[l.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",l[l.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS",l}(Se||{}),se=Se;let H=(()=>{class l extends ue{static getFormatInstance(){return new l}}return l.kind="FormatException",l})();var de=function(l){return l[l.Cp437=0]="Cp437",l[l.ISO8859_1=1]="ISO8859_1",l[l.ISO8859_2=2]="ISO8859_2",l[l.ISO8859_3=3]="ISO8859_3",l[l.ISO8859_4=4]="ISO8859_4",l[l.ISO8859_5=5]="ISO8859_5",l[l.ISO8859_6=6]="ISO8859_6",l[l.ISO8859_7=7]="ISO8859_7",l[l.ISO8859_8=8]="ISO8859_8",l[l.ISO8859_9=9]="ISO8859_9",l[l.ISO8859_10=10]="ISO8859_10",l[l.ISO8859_11=11]="ISO8859_11",l[l.ISO8859_13=12]="ISO8859_13",l[l.ISO8859_14=13]="ISO8859_14",l[l.ISO8859_15=14]="ISO8859_15",l[l.ISO8859_16=15]="ISO8859_16",l[l.SJIS=16]="SJIS",l[l.Cp1250=17]="Cp1250",l[l.Cp1251=18]="Cp1251",l[l.Cp1252=19]="Cp1252",l[l.Cp1256=20]="Cp1256",l[l.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",l[l.UTF8=22]="UTF8",l[l.ASCII=23]="ASCII",l[l.Big5=24]="Big5",l[l.GB18030=25]="GB18030",l[l.EUC_KR=26]="EUC_KR",l}(de||{});class z{constructor(e,t,n,...r){this.valueIdentifier=e,this.name=n,this.values="number"==typeof t?Int32Array.from([t]):t,this.otherEncodingNames=r,z.VALUE_IDENTIFIER_TO_ECI.set(e,this),z.NAME_TO_ECI.set(n,this);const i=this.values;for(let s=0,o=i.length;s!==o;s++)z.VALUES_TO_ECI.set(i[s],this);for(const s of r)z.NAME_TO_ECI.set(s,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(e){if(e<0||e>=900)throw new H("incorect value");const t=z.VALUES_TO_ECI.get(e);if(void 0===t)throw new H("incorect value");return t}static getCharacterSetECIByName(e){const t=z.NAME_TO_ECI.get(e);if(void 0===t)throw new H("incorect value");return t}equals(e){if(!(e instanceof z))return!1;const t=e;return this.getName()===t.getName()}}z.VALUE_IDENTIFIER_TO_ECI=new Map,z.VALUES_TO_ECI=new Map,z.NAME_TO_ECI=new Map,z.Cp437=new z(de.Cp437,Int32Array.from([0,2]),"Cp437"),z.ISO8859_1=new z(de.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),z.ISO8859_2=new z(de.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),z.ISO8859_3=new z(de.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),z.ISO8859_4=new z(de.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),z.ISO8859_5=new z(de.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),z.ISO8859_6=new z(de.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),z.ISO8859_7=new z(de.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),z.ISO8859_8=new z(de.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),z.ISO8859_9=new z(de.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),z.ISO8859_10=new z(de.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),z.ISO8859_11=new z(de.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),z.ISO8859_13=new z(de.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),z.ISO8859_14=new z(de.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),z.ISO8859_15=new z(de.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),z.ISO8859_16=new z(de.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),z.SJIS=new z(de.SJIS,20,"SJIS","Shift_JIS"),z.Cp1250=new z(de.Cp1250,21,"Cp1250","windows-1250"),z.Cp1251=new z(de.Cp1251,22,"Cp1251","windows-1251"),z.Cp1252=new z(de.Cp1252,23,"Cp1252","windows-1252"),z.Cp1256=new z(de.Cp1256,24,"Cp1256","windows-1256"),z.UnicodeBigUnmarked=new z(de.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),z.UTF8=new z(de.UTF8,26,"UTF8","UTF-8"),z.ASCII=new z(de.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),z.Big5=new z(de.Big5,28,"Big5"),z.GB18030=new z(de.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),z.EUC_KR=new z(de.EUC_KR,30,"EUC_KR","EUC-KR");let kt=(()=>{class l extends ue{}return l.kind="UnsupportedOperationException",l})();class rt{static decode(e,t){const n=this.encodingName(t);return this.customDecoder?this.customDecoder(e,n):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)}static shouldDecodeOnFallback(e){return!rt.isBrowser()&&"ISO-8859-1"===e}static encode(e,t){const n=this.encodingName(t);return this.customEncoder?this.customEncoder(e,n):typeof TextEncoder>"u"?this.encodeFallback(e):(new TextEncoder).encode(e)}static isBrowser(){return typeof window<"u"&&"[object Window]"==={}.toString.call(window)}static encodingName(e){return"string"==typeof e?e:e.getName()}static encodingCharacterSet(e){return e instanceof z?e:z.getCharacterSetECIByName(e)}static decodeFallback(e,t){const n=this.encodingCharacterSet(t);if(rt.isDecodeFallbackSupported(n)){let r="";for(let i=0,s=e.length;i<s;i++){let o=e[i].toString(16);o.length<2&&(o="0"+o),r+="%"+o}return decodeURIComponent(r)}if(n.equals(z.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new kt(`Encoding ${this.encodingName(t)} not supported by fallback.`)}static isDecodeFallbackSupported(e){return e.equals(z.UTF8)||e.equals(z.ISO8859_1)||e.equals(z.ASCII)}static encodeFallback(e){const n=btoa(unescape(encodeURIComponent(e))).split(""),r=[];for(let i=0;i<n.length;i++)r.push(n[i].charCodeAt(0));return new Uint8Array(r)}}class ne{static castAsNonUtf8Char(e,t=null){const n=t?t.getName():this.ISO88591;return rt.decode(new Uint8Array([e]),n)}static guessEncoding(e,t){if(null!=t&&void 0!==t.get(se.CHARACTER_SET))return t.get(se.CHARACTER_SET).toString();const n=e.length;let r=!0,i=!0,s=!0,o=0,a=0,c=0,u=0,g=0,A=0,p=0,I=0,y=0,b=0,M=0;const U=e.length>3&&239===e[0]&&187===e[1]&&191===e[2];for(let Y=0;Y<n&&(r||i||s);Y++){const L=255&e[Y];s&&(o>0?128&L?o--:s=!1:128&L&&(64&L?(o++,32&L?(o++,16&L?(o++,8&L?s=!1:u++):c++):a++):s=!1)),r&&(L>127&&L<160?r=!1:L>159&&(L<192||215===L||247===L)&&M++),i&&(g>0?L<64||127===L||L>252?i=!1:g--:128===L||160===L||L>239?i=!1:L>160&&L<224?(A++,I=0,p++,p>y&&(y=p)):L>127?(g++,p=0,I++,I>b&&(b=I)):(p=0,I=0))}return s&&o>0&&(s=!1),i&&g>0&&(i=!1),s&&(U||a+c+u>0)?ne.UTF8:i&&(ne.ASSUME_SHIFT_JIS||y>=3||b>=3)?ne.SHIFT_JIS:r&&i?2===y&&2===A||10*M>=n?ne.SHIFT_JIS:ne.ISO88591:r?ne.ISO88591:i?ne.SHIFT_JIS:s?ne.UTF8:ne.PLATFORM_DEFAULT_ENCODING}static format(e,...t){let n=-1;return e.replace(/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g,function r(s,o,a,c,u,g){if("%%"===s)return"%";if(void 0===t[++n])return;s=c?parseInt(c.substr(1)):void 0;let p,A=u?parseInt(u.substr(1)):void 0;switch(g){case"s":p=t[n];break;case"c":p=t[n][0];break;case"f":p=parseFloat(t[n]).toFixed(s);break;case"p":p=parseFloat(t[n]).toPrecision(s);break;case"e":p=parseFloat(t[n]).toExponential(s);break;case"x":p=parseInt(t[n]).toString(A||16);break;case"d":p=parseFloat(parseInt(t[n],A||10).toPrecision(s)).toFixed(0)}p="object"==typeof p?JSON.stringify(p):(+p).toString(A);let I=parseInt(a),y=a&&a[0]+""=="0"?"0":" ";for(;p.length<I;)p=void 0!==o?p+y:y+p;return p})}static getBytes(e,t){return rt.encode(e,t)}static getCharCode(e,t=0){return e.charCodeAt(t)}static getCharAt(e){return String.fromCharCode(e)}}ne.SHIFT_JIS=z.SJIS.getName(),ne.GB2312="GB2312",ne.ISO88591=z.ISO8859_1.getName(),ne.EUC_JP="EUC_JP",ne.UTF8=z.UTF8.getName(),ne.PLATFORM_DEFAULT_ENCODING=ne.UTF8,ne.ASSUME_SHIFT_JIS=!1;class Ie{constructor(e=""){this.value=e}enableDecoding(e){return this.encoding=e,this}append(e){return this.value+="string"==typeof e?e.toString():this.encoding?ne.castAsNonUtf8Char(e,this.encoding):String.fromCharCode(e),this}appendChars(e,t,n){for(let r=t;t<t+n;r++)this.append(e[r]);return this}length(){return this.value.length}charAt(e){return this.value.charAt(e)}deleteCharAt(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)}setCharAt(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)}substring(e,t){return this.value.substring(e,t)}setLengthToZero(){this.value=""}toString(){return this.value}insert(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+t.length)}}class Xe{constructor(e,t,n,r){if(this.width=e,this.height=t,this.rowSize=n,this.bits=r,null==t&&(t=e),this.height=t,e<1||t<1)throw new Z("Both dimensions must be greater than 0");null==n&&(n=Math.floor((e+31)/32)),this.rowSize=n,null==r&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(e){const t=e.length,n=e[0].length,r=new Xe(n,t);for(let i=0;i<t;i++){const s=e[i];for(let o=0;o<n;o++)s[o]&&r.set(o,i)}return r}static parseFromString(e,t,n){if(null===e)throw new Z("stringRepresentation cannot be null");const r=new Array(e.length);let i=0,s=0,o=-1,a=0,c=0;for(;c<e.length;)if("\n"===e.charAt(c)||"\r"===e.charAt(c)){if(i>s){if(-1===o)o=i-s;else if(i-s!==o)throw new Z("row lengths do not match");s=i,a++}c++}else if(e.substring(c,c+t.length)===t)c+=t.length,r[i]=!0,i++;else{if(e.substring(c,c+n.length)!==n)throw new Z("illegal character encountered: "+e.substring(c));c+=n.length,r[i]=!1,i++}if(i>s){if(-1===o)o=i-s;else if(i-s!==o)throw new Z("row lengths do not match");a++}const u=new Xe(o,a);for(let g=0;g<i;g++)r[g]&&u.set(Math.floor(g%o),Math.floor(g/o));return u}get(e,t){const n=t*this.rowSize+Math.floor(e/32);return!!(this.bits[n]>>>(31&e)&1)}set(e,t){const n=t*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(31&e)&4294967295}unset(e,t){const n=t*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(31&e)&4294967295)}flip(e,t){const n=t*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(31&e)&4294967295}xor(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new Z("input matrix dimensions do not match");const t=new W(Math.floor(this.width/32)+1),n=this.rowSize,r=this.bits;for(let i=0,s=this.height;i<s;i++){const o=i*n,a=e.getRow(i,t).getBitArray();for(let c=0;c<n;c++)r[o+c]^=a[c]}}clear(){const e=this.bits,t=e.length;for(let n=0;n<t;n++)e[n]=0}setRegion(e,t,n,r){if(t<0||e<0)throw new Z("Left and top must be nonnegative");if(r<1||n<1)throw new Z("Height and width must be at least 1");const i=e+n,s=t+r;if(s>this.height||i>this.width)throw new Z("The region must fit inside the matrix");const o=this.rowSize,a=this.bits;for(let c=t;c<s;c++){const u=c*o;for(let g=e;g<i;g++)a[u+Math.floor(g/32)]|=1<<(31&g)&4294967295}}getRow(e,t){null==t||t.getSize()<this.width?t=new W(this.width):t.clear();const n=this.rowSize,r=this.bits,i=e*n;for(let s=0;s<n;s++)t.setBulk(32*s,r[i+s]);return t}setRow(e,t){Ee.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)}rotate180(){const e=this.getWidth(),t=this.getHeight();let n=new W(e),r=new W(e);for(let i=0,s=Math.floor((t+1)/2);i<s;i++)n=this.getRow(i,n),r=this.getRow(t-1-i,r),n.reverse(),r.reverse(),this.setRow(i,r),this.setRow(t-1-i,n)}getEnclosingRectangle(){const t=this.height,n=this.rowSize,r=this.bits;let i=this.width,s=t,o=-1,a=-1;for(let c=0;c<t;c++)for(let u=0;u<n;u++){const g=r[c*n+u];if(0!==g){if(c<s&&(s=c),c>a&&(a=c),32*u<i){let A=0;for(;!(g<<31-A&4294967295);)A++;32*u+A<i&&(i=32*u+A)}if(32*u+31>o){let A=31;for(;!(g>>>A);)A--;32*u+A>o&&(o=32*u+A)}}}return o<i||a<s?null:Int32Array.from([i,s,o-i+1,a-s+1])}getTopLeftOnBit(){const e=this.rowSize,t=this.bits;let n=0;for(;n<t.length&&0===t[n];)n++;if(n===t.length)return null;const r=n/e;let i=n%e*32;const s=t[n];let o=0;for(;!(s<<31-o&4294967295);)o++;return i+=o,Int32Array.from([i,r])}getBottomRightOnBit(){const e=this.rowSize,t=this.bits;let n=t.length-1;for(;n>=0&&0===t[n];)n--;if(n<0)return null;const r=Math.floor(n/e);let i=32*Math.floor(n%e);const s=t[n];let o=31;for(;!(s>>>o);)o--;return i+=o,Int32Array.from([i,r])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(e){return e instanceof Xe&&this.width===e.width&&this.height===e.height&&this.rowSize===e.rowSize&&Ye.equals(this.bits,e.bits)}hashCode(){let e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+Ye.hashCode(this.bits),e}toString(e="X ",t="  ",n="\n"){return this.buildToString(e,t,n)}buildToString(e,t,n){let r=new Ie;for(let i=0,s=this.height;i<s;i++){for(let o=0,a=this.width;o<a;o++)r.append(this.get(o,i)?e:t);r.append(n)}return r.toString()}clone(){return new Xe(this.width,this.height,this.rowSize,this.bits.slice())}}let S=(()=>{class l extends ue{static getNotFoundInstance(){return new l}}return l.kind="NotFoundException",l})();class D extends ce{constructor(e){super(e),this.luminances=D.EMPTY,this.buckets=new Int32Array(D.LUMINANCE_BUCKETS)}getBlackRow(e,t){const n=this.getLuminanceSource(),r=n.getWidth();null==t||t.getSize()<r?t=new W(r):t.clear(),this.initArrays(r);const i=n.getRow(e,this.luminances),s=this.buckets;for(let a=0;a<r;a++)s[(255&i[a])>>D.LUMINANCE_SHIFT]++;const o=D.estimateBlackPoint(s);if(r<3)for(let a=0;a<r;a++)(255&i[a])<o&&t.set(a);else{let a=255&i[0],c=255&i[1];for(let u=1;u<r-1;u++){const g=255&i[u+1];(4*c-a-g)/2<o&&t.set(u),a=c,c=g}}return t}getBlackMatrix(){const e=this.getLuminanceSource(),t=e.getWidth(),n=e.getHeight(),r=new Xe(t,n);this.initArrays(t);const i=this.buckets;for(let a=1;a<5;a++){const c=Math.floor(n*a/5),u=e.getRow(c,this.luminances),g=Math.floor(4*t/5);for(let A=Math.floor(t/5);A<g;A++)i[(255&u[A])>>D.LUMINANCE_SHIFT]++}const s=D.estimateBlackPoint(i),o=e.getMatrix();for(let a=0;a<n;a++){const c=a*t;for(let u=0;u<t;u++)(255&o[c+u])<s&&r.set(u,a)}return r}createBinarizer(e){return new D(e)}initArrays(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));const t=this.buckets;for(let n=0;n<D.LUMINANCE_BUCKETS;n++)t[n]=0}static estimateBlackPoint(e){const t=e.length;let n=0,r=0,i=0;for(let u=0;u<t;u++)e[u]>i&&(r=u,i=e[u]),e[u]>n&&(n=e[u]);let s=0,o=0;for(let u=0;u<t;u++){const g=u-r,A=e[u]*g*g;A>o&&(s=u,o=A)}if(r>s){const u=r;r=s,s=u}if(s-r<=t/16)throw new S;let a=s-1,c=-1;for(let u=s-1;u>r;u--){const g=u-r,A=g*g*(s-u)*(n-e[u]);A>c&&(a=u,c=A)}return a<<D.LUMINANCE_SHIFT}}D.LUMINANCE_BITS=5,D.LUMINANCE_SHIFT=8-D.LUMINANCE_BITS,D.LUMINANCE_BUCKETS=1<<D.LUMINANCE_BITS,D.EMPTY=Uint8ClampedArray.from([0]);class B extends D{constructor(e){super(e),this.matrix=null}getBlackMatrix(){if(null!==this.matrix)return this.matrix;const e=this.getLuminanceSource(),t=e.getWidth(),n=e.getHeight();if(t>=B.MINIMUM_DIMENSION&&n>=B.MINIMUM_DIMENSION){const r=e.getMatrix();let i=t>>B.BLOCK_SIZE_POWER;t&B.BLOCK_SIZE_MASK&&i++;let s=n>>B.BLOCK_SIZE_POWER;n&B.BLOCK_SIZE_MASK&&s++;const o=B.calculateBlackPoints(r,i,s,t,n),a=new Xe(t,n);B.calculateThresholdForBlock(r,i,s,t,n,o,a),this.matrix=a}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(e){return new B(e)}static calculateThresholdForBlock(e,t,n,r,i,s,o){const a=i-B.BLOCK_SIZE,c=r-B.BLOCK_SIZE;for(let u=0;u<n;u++){let g=u<<B.BLOCK_SIZE_POWER;g>a&&(g=a);const A=B.cap(u,2,n-3);for(let p=0;p<t;p++){let I=p<<B.BLOCK_SIZE_POWER;I>c&&(I=c);const y=B.cap(p,2,t-3);let b=0;for(let U=-2;U<=2;U++){const Y=s[A+U];b+=Y[y-2]+Y[y-1]+Y[y]+Y[y+1]+Y[y+2]}B.thresholdBlock(e,I,g,b/25,r,o)}}}static cap(e,t,n){return e<t?t:e>n?n:e}static thresholdBlock(e,t,n,r,i,s){for(let o=0,a=n*i+t;o<B.BLOCK_SIZE;o++,a+=i)for(let c=0;c<B.BLOCK_SIZE;c++)(255&e[a+c])<=r&&s.set(t+c,n+o)}static calculateBlackPoints(e,t,n,r,i){const s=i-B.BLOCK_SIZE,o=r-B.BLOCK_SIZE,a=new Array(n);for(let c=0;c<n;c++){a[c]=new Int32Array(t);let u=c<<B.BLOCK_SIZE_POWER;u>s&&(u=s);for(let g=0;g<t;g++){let A=g<<B.BLOCK_SIZE_POWER;A>o&&(A=o);let p=0,I=255,y=0;for(let M=0,U=u*r+A;M<B.BLOCK_SIZE;M++,U+=r){for(let Y=0;Y<B.BLOCK_SIZE;Y++){const L=255&e[U+Y];p+=L,L<I&&(I=L),L>y&&(y=L)}if(y-I>B.MIN_DYNAMIC_RANGE)for(M++,U+=r;M<B.BLOCK_SIZE;M++,U+=r)for(let Y=0;Y<B.BLOCK_SIZE;Y++)p+=255&e[U+Y]}let b=p>>2*B.BLOCK_SIZE_POWER;if(y-I<=B.MIN_DYNAMIC_RANGE&&(b=I/2,c>0&&g>0)){const M=(a[c-1][g]+2*a[c][g-1]+a[c-1][g-1])/4;I<M&&(b=M)}a[c][g]=b}}return a}}B.BLOCK_SIZE_POWER=3,B.BLOCK_SIZE=1<<B.BLOCK_SIZE_POWER,B.BLOCK_SIZE_MASK=B.BLOCK_SIZE-1,B.MINIMUM_DIMENSION=5*B.BLOCK_SIZE,B.MIN_DYNAMIC_RANGE=24;class ee{constructor(e,t){this.width=e,this.height=t}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(e,t,n,r){throw new kt("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new kt("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new kt("This luminance source does not support rotation by 45 degrees.")}toString(){const e=new Uint8ClampedArray(this.width);let t=new Ie;for(let n=0;n<this.height;n++){const r=this.getRow(n,e);for(let i=0;i<this.width;i++){const s=255&r[i];let o;o=s<64?"#":s<128?"+":s<192?".":" ",t.append(o)}t.append("\n")}return t.toString()}}class re extends ee{constructor(e){super(e.getWidth(),e.getHeight()),this.delegate=e}getRow(e,t){const n=this.delegate.getRow(e,t),r=this.getWidth();for(let i=0;i<r;i++)n[i]=255-(255&n[i]);return n}getMatrix(){const e=this.delegate.getMatrix(),t=this.getWidth()*this.getHeight(),n=new Uint8ClampedArray(t);for(let r=0;r<t;r++)n[r]=255-(255&e[r]);return n}isCropSupported(){return this.delegate.isCropSupported()}crop(e,t,n,r){return new re(this.delegate.crop(e,t,n,r))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new re(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new re(this.delegate.rotateCounterClockwise45())}}class Q extends ee{constructor(e){super(e.width,e.height),this.canvas=e,this.tempCanvasElement=null,this.buffer=Q.makeBufferFromCanvasImageData(e)}static makeBufferFromCanvasImageData(e){const t=e.getContext("2d").getImageData(0,0,e.width,e.height);return Q.toGrayscaleBuffer(t.data,e.width,e.height)}static toGrayscaleBuffer(e,t,n){const r=new Uint8ClampedArray(t*n);for(let i=0,s=0,o=e.length;i<o;i+=4,s++){let a;a=0===e[i+3]?255:306*e[i]+601*e[i+1]+117*e[i+2]+512>>10,r[s]=a}return r}getRow(e,t){if(e<0||e>=this.getHeight())throw new Z("Requested row is outside the image: "+e);const n=this.getWidth(),r=e*n;return null===t?t=this.buffer.slice(r,r+n):(t.length<n&&(t=new Uint8ClampedArray(n)),t.set(this.buffer.slice(r,r+n))),t}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(e,t,n,r){return super.crop(e,t,n,r),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(null===this.tempCanvasElement){const e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement}rotate(e){const t=this.getTempCanvasElement(),n=t.getContext("2d"),r=e*Q.DEGREE_TO_RADIANS,i=this.canvas.width,s=this.canvas.height,o=Math.ceil(Math.abs(Math.cos(r))*i+Math.abs(Math.sin(r))*s),a=Math.ceil(Math.abs(Math.sin(r))*i+Math.abs(Math.cos(r))*s);return t.width=o,t.height=a,n.translate(o/2,a/2),n.rotate(r),n.drawImage(this.canvas,i/-2,s/-2),this.buffer=Q.makeBufferFromCanvasImageData(t),this}invert(){return new re(this)}}Q.DEGREE_TO_RADIANS=Math.PI/180;class Re{constructor(e,t,n){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=n||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var q=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__awaiter:void 0)||function(l,e,t,n){return new(t||(t=Promise))(function(i,s){function o(u){try{c(n.next(u))}catch(g){s(g)}}function a(u){try{c(n.throw(u))}catch(g){s(g)}}function c(u){u.done?i(u.value):function r(i){return i instanceof t?i:new t(function(s){s(i)})}(u.value).then(o,a)}c((n=n.apply(l,e||[])).next())})};class Fe{constructor(e,t=500,n){this.reader=e,this.timeBetweenScansMillis=t,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!(!this.isMediaDevicesSuported||!navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(e){this._timeBetweenDecodingAttempts=e<0?0:e}set hints(e){this._hints=e||null}get hints(){return this._hints}listVideoInputDevices(){return q(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const e=yield navigator.mediaDevices.enumerateDevices(),t=[];for(const n of e){const r="video"===n.kind?"videoinput":n.kind;"videoinput"===r&&t.push({deviceId:n.deviceId||n.id,label:n.label||`Video device ${t.length+1}`,kind:r,groupId:n.groupId})}return t})}getVideoInputDevices(){return q(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(t=>new Re(t.deviceId,t.label))})}findDeviceById(e){return q(this,void 0,void 0,function*(){const t=yield this.listVideoInputDevices();return t?t.find(n=>n.deviceId===e):null})}decodeFromInputVideoDevice(e,t){return q(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(e,t)})}decodeOnceFromVideoDevice(e,t){return q(this,void 0,void 0,function*(){let n;this.reset(),n=e?{deviceId:{exact:e}}:{facingMode:"environment"};const r={video:n};return yield this.decodeOnceFromConstraints(r,t)})}decodeOnceFromConstraints(e,t){return q(this,void 0,void 0,function*(){const n=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeOnceFromStream(n,t)})}decodeOnceFromStream(e,t){return q(this,void 0,void 0,function*(){this.reset();const n=yield this.attachStreamToVideo(e,t);return yield this.decodeOnce(n)})}decodeFromInputVideoDeviceContinuously(e,t,n){return q(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(e,t,n)})}decodeFromVideoDevice(e,t,n){return q(this,void 0,void 0,function*(){let r;r=e?{deviceId:{exact:e}}:{facingMode:"environment"};const i={video:r};return yield this.decodeFromConstraints(i,t,n)})}decodeFromConstraints(e,t,n){return q(this,void 0,void 0,function*(){const r=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeFromStream(r,t,n)})}decodeFromStream(e,t,n){return q(this,void 0,void 0,function*(){this.reset();const r=yield this.attachStreamToVideo(e,t);return yield this.decodeContinuously(r,n)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(e,t){return q(this,void 0,void 0,function*(){const n=this.prepareVideoElement(t);return this.addVideoSource(n,e),this.videoElement=n,this.stream=e,yield this.playVideoOnLoadAsync(n),n})}playVideoOnLoadAsync(e){return new Promise((t,n)=>this.playVideoOnLoad(e,()=>t()))}playVideoOnLoad(e,t){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(e),e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)}isVideoPlaying(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2}tryPlayVideo(e){return q(this,void 0,void 0,function*(){if(this.isVideoPlaying(e))console.warn("Trying to play video that is already playing.");else try{yield e.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(e,t){const n=document.getElementById(e);if(!n)throw new Ze(`element with id '${e}' not found`);if(n.nodeName.toLowerCase()!==t.toLowerCase())throw new Ze(`element with id '${e}' must be an ${t} element`);return n}decodeFromImage(e,t){if(!e&&!t)throw new Ze("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)}decodeFromVideo(e,t){if(!e&&!t)throw new Ze("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)}decodeFromVideoContinuously(e,t,n){if(void 0===e&&void 0===t)throw new Ze("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,n):this.decodeFromVideoElementContinuously(e,n)}decodeFromImageElement(e){if(!e)throw new Ze("An image element must be provided.");this.reset();const t=this.prepareImageElement(e);let n;return this.imageElement=t,n=this.isImageLoaded(t)?this.decodeOnce(t,!1,!0):this._decodeOnLoadImage(t),n}decodeFromVideoElement(e){const t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)}decodeFromVideoElementContinuously(e,t){const n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,t)}_decodeFromVideoElementSetup(e){if(!e)throw new Ze("A video element must be provided.");this.reset();const t=this.prepareVideoElement(e);return this.videoElement=t,t}decodeFromImageUrl(e){if(!e)throw new Ze("An URL must be provided.");this.reset();const t=this.prepareImageElement();this.imageElement=t;const n=this._decodeOnLoadImage(t);return t.src=e,n}decodeFromVideoUrl(e){if(!e)throw new Ze("An URL must be provided.");this.reset();const t=this.prepareVideoElement(),n=this.decodeFromVideoElement(t);return t.src=e,n}decodeFromVideoUrlContinuously(e,t){if(!e)throw new Ze("An URL must be provided.");this.reset();const n=this.prepareVideoElement(),r=this.decodeFromVideoElementContinuously(n,t);return n.src=e,r}_decodeOnLoadImage(e){return new Promise((t,n)=>{this.imageLoadedListener=()=>this.decodeOnce(e,!1,!0).then(t,n),e.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(e){return q(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(e),yield this.decodeOnce(e)})}_decodeOnLoadVideoContinuously(e,t){return q(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(e),this.decodeContinuously(e,t)})}isImageLoaded(e){return!(!e.complete||0===e.naturalWidth)}prepareImageElement(e){let t;return typeof e>"u"&&(t=document.createElement("img"),t.width=200,t.height=200),"string"==typeof e&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t}prepareVideoElement(e){let t;return!e&&typeof document<"u"&&(t=document.createElement("video"),t.width=200,t.height=200),"string"==typeof e&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t}decodeOnce(e,t=!0,n=!0){this._stopAsyncDecode=!1;const r=(i,s)=>{if(this._stopAsyncDecode)return s(new S("Video stream has ended before any code could be detected.")),void(this._stopAsyncDecode=void 0);try{i(this.decode(e))}catch(o){if(t&&o instanceof S||(o instanceof ze||o instanceof H)&&n)return setTimeout(r,this._timeBetweenDecodingAttempts,i,s);s(o)}};return new Promise((i,s)=>r(i,s))}decodeContinuously(e,t){this._stopContinuousDecode=!1;const n=()=>{if(this._stopContinuousDecode)this._stopContinuousDecode=void 0;else try{const r=this.decode(e);t(r,null),setTimeout(n,this.timeBetweenScansMillis)}catch(r){t(null,r),(r instanceof ze||r instanceof H||r instanceof S)&&setTimeout(n,this._timeBetweenDecodingAttempts)}};n()}decode(e){const t=this.createBinaryBitmap(e);return this.decodeBitmap(t)}_isHTMLVideoElement(e){return 0!==e.videoWidth}drawFrameOnCanvas(e,t,n){t||(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),n||(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)}drawImageOnCanvas(e,t,n=this.captureCanvasContext){t||(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),n||(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)}createBinaryBitmap(e){this.getCaptureCanvasContext(e),this._isHTMLVideoElement(e)?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);const n=this.getCaptureCanvas(e),r=new Q(n),i=new B(r);return new yt(i)}getCaptureCanvasContext(e){if(!this.captureCanvasContext){const n=this.getCaptureCanvas(e).getContext("2d");this.captureCanvasContext=n}return this.captureCanvasContext}getCaptureCanvas(e){if(!this.captureCanvas){const t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas}decodeBitmap(e){return this.reader.decode(e,this._hints)}createCaptureCanvas(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const t=document.createElement("canvas");let n,r;return typeof e<"u"&&(e instanceof HTMLVideoElement?(n=e.videoWidth,r=e.videoHeight):e instanceof HTMLImageElement&&(n=e.naturalWidth||e.width,r=e.naturalHeight||e.height)),t.style.width=n+"px",t.style.height=r+"px",t.width=n,t.height=r,t}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(e=>e.stop()),this.stream=void 0),!1===this._stopAsyncDecode&&this.stopAsyncDecode(),!1===this._stopContinuousDecode&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(void 0!==this.imageLoadedListener&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(e,t){try{e.srcObject=t}catch{e.src=URL.createObjectURL(t)}}cleanVideoSource(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")}}class ge{constructor(e,t,n=(null==t?0:8*t.length),r,i,s=Ee.currentTimeMillis()){this.text=e,this.rawBytes=t,this.numBits=n,this.resultPoints=r,this.format=i,this.timestamp=s,this.text=e,this.rawBytes=t,this.numBits=null==n?null==t?0:8*t.length:n,this.resultPoints=r,this.format=i,this.resultMetadata=null,this.timestamp=null==s?Ee.currentTimeMillis():s}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(e,t){null===this.resultMetadata&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)}putAllMetadata(e){null!==e&&(this.resultMetadata=null===this.resultMetadata?e:new Map(e))}addResultPoints(e){const t=this.resultPoints;if(null===t)this.resultPoints=e;else if(null!==e&&e.length>0){const n=new Array(t.length+e.length);Ee.arraycopy(t,0,n,0,t.length),Ee.arraycopy(e,0,n,t.length,e.length),this.resultPoints=n}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Ut=function(l){return l[l.AZTEC=0]="AZTEC",l[l.CODABAR=1]="CODABAR",l[l.CODE_39=2]="CODE_39",l[l.CODE_93=3]="CODE_93",l[l.CODE_128=4]="CODE_128",l[l.DATA_MATRIX=5]="DATA_MATRIX",l[l.EAN_8=6]="EAN_8",l[l.EAN_13=7]="EAN_13",l[l.ITF=8]="ITF",l[l.MAXICODE=9]="MAXICODE",l[l.PDF_417=10]="PDF_417",l[l.QR_CODE=11]="QR_CODE",l[l.RSS_14=12]="RSS_14",l[l.RSS_EXPANDED=13]="RSS_EXPANDED",l[l.UPC_A=14]="UPC_A",l[l.UPC_E=15]="UPC_E",l[l.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION",l}(Ut||{}),K=Ut,Yt=function(l){return l[l.OTHER=0]="OTHER",l[l.ORIENTATION=1]="ORIENTATION",l[l.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",l[l.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",l[l.ISSUE_NUMBER=4]="ISSUE_NUMBER",l[l.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",l[l.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",l[l.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",l[l.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",l[l.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",l[l.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY",l}(Yt||{}),he=Yt;class zt{constructor(e,t,n,r,i=-1,s=-1){this.rawBytes=e,this.text=t,this.byteSegments=n,this.ecLevel=r,this.structuredAppendSequenceNumber=i,this.structuredAppendParity=s,this.numBits=null==e?0:8*e.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(e){this.numBits=e}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(e){this.errorsCorrected=e}getErasures(){return this.erasures}setErasures(e){this.erasures=e}getOther(){return this.other}setOther(e){this.other=e}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class jt{exp(e){return this.expTable[e]}log(e){if(0===e)throw new Z;return this.logTable[e]}static addOrSubtract(e,t){return e^t}}class it{constructor(e,t){if(0===t.length)throw new Z;this.field=e;const n=t.length;if(n>1&&0===t[0]){let r=1;for(;r<n&&0===t[r];)r++;r===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-r),Ee.arraycopy(t,r,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return 0===this.coefficients[0]}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(0===e)return this.getCoefficient(0);const t=this.coefficients;let n;if(1===e){n=0;for(let s=0,o=t.length;s!==o;s++)n=jt.addOrSubtract(n,t[s]);return n}n=t[0];const r=t.length,i=this.field;for(let s=1;s<r;s++)n=jt.addOrSubtract(i.multiply(e,n),t[s]);return n}addOrSubtract(e){if(!this.field.equals(e.field))throw new Z("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;let t=this.coefficients,n=e.coefficients;if(t.length>n.length){const s=t;t=n,n=s}let r=new Int32Array(n.length);const i=n.length-t.length;Ee.arraycopy(n,0,r,0,i);for(let s=i;s<n.length;s++)r[s]=jt.addOrSubtract(t[s-i],n[s]);return new it(this.field,r)}multiply(e){if(!this.field.equals(e.field))throw new Z("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();const t=this.coefficients,n=t.length,r=e.coefficients,i=r.length,s=new Int32Array(n+i-1),o=this.field;for(let a=0;a<n;a++){const c=t[a];for(let u=0;u<i;u++)s[a+u]=jt.addOrSubtract(s[a+u],o.multiply(c,r[u]))}return new it(o,s)}multiplyScalar(e){if(0===e)return this.field.getZero();if(1===e)return this;const t=this.coefficients.length,n=this.field,r=new Int32Array(t),i=this.coefficients;for(let s=0;s<t;s++)r[s]=n.multiply(i[s],e);return new it(n,r)}multiplyByMonomial(e,t){if(e<0)throw new Z;if(0===t)return this.field.getZero();const n=this.coefficients,r=n.length,i=new Int32Array(r+e),s=this.field;for(let o=0;o<r;o++)i[o]=s.multiply(n[o],t);return new it(s,i)}divide(e){if(!this.field.equals(e.field))throw new Z("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new Z("Divide by 0");const t=this.field;let n=t.getZero(),r=this;const i=e.getCoefficient(e.getDegree()),s=t.inverse(i);for(;r.getDegree()>=e.getDegree()&&!r.isZero();){const o=r.getDegree()-e.getDegree(),a=t.multiply(r.getCoefficient(r.getDegree()),s),c=e.multiplyByMonomial(o,a),u=t.buildMonomial(o,a);n=n.addOrSubtract(u),r=r.addOrSubtract(c)}return[n,r]}toString(){let e="";for(let t=this.getDegree();t>=0;t--){let n=this.getCoefficient(t);if(0!==n){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),0===t||1!==n){const r=this.field.log(n);0===r?e+="1":1===r?e+="a":(e+="a^",e+=r)}0!==t&&(1===t?e+="x":(e+="x^",e+=t))}}return e}}let Xt=(()=>{class l extends ue{}return l.kind="ArithmeticException",l})();class le extends jt{constructor(e,t,n){super(),this.primitive=e,this.size=t,this.generatorBase=n;const r=new Int32Array(t);let i=1;for(let o=0;o<t;o++)r[o]=i,i*=2,i>=t&&(i^=e,i&=t-1);this.expTable=r;const s=new Int32Array(t);for(let o=0;o<t-1;o++)s[r[o]]=o;this.logTable=s,this.zero=new it(this,Int32Array.from([0])),this.one=new it(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,t){if(e<0)throw new Z;if(0===t)return this.zero;const n=new Int32Array(e+1);return n[0]=t,new it(this,n)}inverse(e){if(0===e)throw new Xt;return this.expTable[this.size-this.logTable[e]-1]}multiply(e,t){return 0===e||0===t?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+ae.toHexString(this.primitive)+","+this.size+")"}equals(e){return e===this}}le.AZTEC_DATA_12=new le(4201,4096,1),le.AZTEC_DATA_10=new le(1033,1024,1),le.AZTEC_DATA_6=new le(67,64,1),le.AZTEC_PARAM=new le(19,16,1),le.QR_CODE_FIELD_256=new le(285,256,0),le.DATA_MATRIX_FIELD_256=new le(301,256,1),le.AZTEC_DATA_8=le.DATA_MATRIX_FIELD_256,le.MAXICODE_FIELD_64=le.AZTEC_DATA_6;let Gt=(()=>{class l extends ue{}return l.kind="ReedSolomonException",l})(),ot=(()=>{class l extends ue{}return l.kind="IllegalStateException",l})();class Rt{constructor(e){this.field=e}decode(e,t){const n=this.field,r=new it(n,e),i=new Int32Array(t);let s=!0;for(let p=0;p<t;p++){const I=r.evaluateAt(n.exp(p+n.getGeneratorBase()));i[i.length-1-p]=I,0!==I&&(s=!1)}if(s)return;const o=new it(n,i),a=this.runEuclideanAlgorithm(n.buildMonomial(t,1),o,t),u=a[1],g=this.findErrorLocations(a[0]),A=this.findErrorMagnitudes(u,g);for(let p=0;p<g.length;p++){const I=e.length-1-n.log(g[p]);if(I<0)throw new Gt("Bad error location");e[I]=le.addOrSubtract(e[I],A[p])}}runEuclideanAlgorithm(e,t,n){if(e.getDegree()<t.getDegree()){const p=e;e=t,t=p}const r=this.field;let i=e,s=t,o=r.getZero(),a=r.getOne();for(;s.getDegree()>=(n/2|0);){let p=i,I=o;if(i=s,o=a,i.isZero())throw new Gt("r_{i-1} was zero");s=p;let y=r.getZero();const b=i.getCoefficient(i.getDegree()),M=r.inverse(b);for(;s.getDegree()>=i.getDegree()&&!s.isZero();){const U=s.getDegree()-i.getDegree(),Y=r.multiply(s.getCoefficient(s.getDegree()),M);y=y.addOrSubtract(r.buildMonomial(U,Y)),s=s.addOrSubtract(i.multiplyByMonomial(U,Y))}if(a=y.multiply(o).addOrSubtract(I),s.getDegree()>=i.getDegree())throw new ot("Division algorithm failed to reduce polynomial?")}const c=a.getCoefficient(0);if(0===c)throw new Gt("sigmaTilde(0) was zero");const u=r.inverse(c);return[a.multiplyScalar(u),s.multiplyScalar(u)]}findErrorLocations(e){const t=e.getDegree();if(1===t)return Int32Array.from([e.getCoefficient(1)]);const n=new Int32Array(t);let r=0;const i=this.field;for(let s=1;s<i.getSize()&&r<t;s++)0===e.evaluateAt(s)&&(n[r]=i.inverse(s),r++);if(r!==t)throw new Gt("Error locator degree does not match number of roots");return n}findErrorMagnitudes(e,t){const n=t.length,r=new Int32Array(n),i=this.field;for(let s=0;s<n;s++){const o=i.inverse(t[s]);let a=1;for(let c=0;c<n;c++)if(s!==c){const u=i.multiply(t[c],o);a=i.multiply(a,1&u?-2&u:1|u)}r[s]=i.multiply(e.evaluateAt(o),i.inverse(a)),0!==i.getGeneratorBase()&&(r[s]=i.multiply(r[s],o))}return r}}var qe=function(l){return l[l.UPPER=0]="UPPER",l[l.LOWER=1]="LOWER",l[l.MIXED=2]="MIXED",l[l.DIGIT=3]="DIGIT",l[l.PUNCT=4]="PUNCT",l[l.BINARY=5]="BINARY",l}(qe||{});let ke=(()=>{class l{decode(t){this.ddata=t;let n=t.getBits(),r=this.extractBits(n),i=this.correctBits(r),s=l.convertBoolArrayToByteArray(i),o=l.getEncodedData(i),a=new zt(s,o,null,null);return a.setNumBits(i.length),a}static highLevelDecode(t){return this.getEncodedData(t)}static getEncodedData(t){let n=t.length,r=qe.UPPER,i=qe.UPPER,s="",o=0;for(;o<n;)if(i===qe.BINARY){if(n-o<5)break;let a=l.readCode(t,o,5);if(o+=5,0===a){if(n-o<11)break;a=l.readCode(t,o,11)+31,o+=11}for(let c=0;c<a;c++){if(n-o<8){o=n;break}const u=l.readCode(t,o,8);s+=ne.castAsNonUtf8Char(u),o+=8}i=r}else{let a=i===qe.DIGIT?4:5;if(n-o<a)break;let c=l.readCode(t,o,a);o+=a;let u=l.getCharacter(i,c);u.startsWith("CTRL_")?(r=i,i=l.getTable(u.charAt(5)),"L"===u.charAt(6)&&(r=i)):(s+=u,i=r)}return s}static getTable(t){switch(t){case"L":return qe.LOWER;case"P":return qe.PUNCT;case"M":return qe.MIXED;case"D":return qe.DIGIT;case"B":return qe.BINARY;default:return qe.UPPER}}static getCharacter(t,n){switch(t){case qe.UPPER:return l.UPPER_TABLE[n];case qe.LOWER:return l.LOWER_TABLE[n];case qe.MIXED:return l.MIXED_TABLE[n];case qe.PUNCT:return l.PUNCT_TABLE[n];case qe.DIGIT:return l.DIGIT_TABLE[n];default:throw new ot("Bad table")}}correctBits(t){let n,r;this.ddata.getNbLayers()<=2?(r=6,n=le.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,n=le.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,n=le.AZTEC_DATA_10):(r=12,n=le.AZTEC_DATA_12);let i=this.ddata.getNbDatablocks(),s=t.length/r;if(s<i)throw new H;let o=t.length%r,a=new Int32Array(s);for(let p=0;p<s;p++,o+=r)a[p]=l.readCode(t,o,r);try{new Rt(n).decode(a,s-i)}catch(p){throw new H(p)}let c=(1<<r)-1,u=0;for(let p=0;p<i;p++){let I=a[p];if(0===I||I===c)throw new H;(1===I||I===c-1)&&u++}let g=new Array(i*r-u),A=0;for(let p=0;p<i;p++){let I=a[p];if(1===I||I===c-1)g.fill(I>1,A,A+r-1),A+=r-1;else for(let y=r-1;y>=0;--y)g[A++]=!!(I&1<<y)}return g}extractBits(t){let n=this.ddata.isCompact(),r=this.ddata.getNbLayers(),i=(n?11:14)+4*r,s=new Int32Array(i),o=new Array(this.totalBitsInLayer(r,n));if(n)for(let a=0;a<s.length;a++)s[a]=a;else{let a=i+1+2*ae.truncDivision(ae.truncDivision(i,2)-1,15),c=i/2,u=ae.truncDivision(a,2);for(let g=0;g<c;g++){let A=g+ae.truncDivision(g,15);s[c-g-1]=u-A-1,s[c+g]=u+A+1}}for(let a=0,c=0;a<r;a++){let u=4*(r-a)+(n?9:12),g=2*a,A=i-1-g;for(let p=0;p<u;p++){let I=2*p;for(let y=0;y<2;y++)o[c+I+y]=t.get(s[g+y],s[g+p]),o[c+2*u+I+y]=t.get(s[g+p],s[A-y]),o[c+4*u+I+y]=t.get(s[A-y],s[A-p]),o[c+6*u+I+y]=t.get(s[A-p],s[g+y])}c+=8*u}return o}static readCode(t,n,r){let i=0;for(let s=n;s<n+r;s++)i<<=1,t[s]&&(i|=1);return i}static readByte(t,n){let r=t.length-n;return r>=8?l.readCode(t,n,8):l.readCode(t,n,r)<<8-r}static convertBoolArrayToByteArray(t){let n=new Uint8Array((t.length+7)/8);for(let r=0;r<n.length;r++)n[r]=l.readByte(t,8*r);return n}totalBitsInLayer(t,n){return((n?88:112)+16*t)*t}}return l.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],l.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],l.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","\t","\n","\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],l.PUNCT_TABLE=["","\r","\r\n",". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],l.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],l})();class J{constructor(){}static round(e){return NaN===e?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0}static distance(e,t,n,r){const i=e-n,s=t-r;return Math.sqrt(i*i+s*s)}static sum(e){let t=0;for(let n=0,r=e.length;n!==r;n++)t+=e[n];return t}}class Tt{static floatToIntBits(e){return e}}Tt.MAX_VALUE=Number.MAX_SAFE_INTEGER;class X{constructor(e,t){this.x=e,this.y=t}getX(){return this.x}getY(){return this.y}equals(e){return e instanceof X&&this.x===e.x&&this.y===e.y}hashCode(){return 31*Tt.floatToIntBits(this.x)+Tt.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(e){const t=this.distance(e[0],e[1]),n=this.distance(e[1],e[2]),r=this.distance(e[0],e[2]);let i,s,o;if(n>=t&&n>=r?(s=e[0],i=e[1],o=e[2]):r>=n&&r>=t?(s=e[1],i=e[0],o=e[2]):(s=e[2],i=e[0],o=e[1]),this.crossProductZ(i,s,o)<0){const a=i;i=o,o=a}e[0]=i,e[1]=s,e[2]=o}static distance(e,t){return J.distance(e.x,e.y,t.x,t.y)}static crossProductZ(e,t,n){const r=t.x,i=t.y;return(n.x-r)*(e.y-i)-(n.y-i)*(e.x-r)}}class St{constructor(e,t){this.bits=e,this.points=t}getBits(){return this.bits}getPoints(){return this.points}}class wt extends St{constructor(e,t,n,r,i){super(e,t),this.compact=n,this.nbDatablocks=r,this.nbLayers=i}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}let Zt=(()=>{class l{constructor(t,n,r,i){this.image=t,this.height=t.getHeight(),this.width=t.getWidth(),null==n&&(n=l.INIT_SIZE),null==r&&(r=t.getWidth()/2|0),null==i&&(i=t.getHeight()/2|0);const s=n/2|0;if(this.leftInit=r-s,this.rightInit=r+s,this.upInit=i-s,this.downInit=i+s,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new S}detect(){let t=this.leftInit,n=this.rightInit,r=this.upInit,i=this.downInit,s=!1,o=!0,a=!1,c=!1,u=!1,g=!1,A=!1;const p=this.width,I=this.height;for(;o;){o=!1;let y=!0;for(;(y||!c)&&n<p;)y=this.containsBlackPoint(r,i,n,!1),y?(n++,o=!0,c=!0):c||n++;if(n>=p){s=!0;break}let b=!0;for(;(b||!u)&&i<I;)b=this.containsBlackPoint(t,n,i,!0),b?(i++,o=!0,u=!0):u||i++;if(i>=I){s=!0;break}let M=!0;for(;(M||!g)&&t>=0;)M=this.containsBlackPoint(r,i,t,!1),M?(t--,o=!0,g=!0):g||t--;if(t<0){s=!0;break}let U=!0;for(;(U||!A)&&r>=0;)U=this.containsBlackPoint(t,n,r,!0),U?(r--,o=!0,A=!0):A||r--;if(r<0){s=!0;break}o&&(a=!0)}if(!s&&a){const y=n-t;let b=null;for(let L=1;null===b&&L<y;L++)b=this.getBlackPointOnSegment(t,i-L,t+L,i);if(null==b)throw new S;let M=null;for(let L=1;null===M&&L<y;L++)M=this.getBlackPointOnSegment(t,r+L,t+L,r);if(null==M)throw new S;let U=null;for(let L=1;null===U&&L<y;L++)U=this.getBlackPointOnSegment(n,r+L,n-L,r);if(null==U)throw new S;let Y=null;for(let L=1;null===Y&&L<y;L++)Y=this.getBlackPointOnSegment(n,i-L,n-L,i);if(null==Y)throw new S;return this.centerEdges(Y,b,U,M)}throw new S}getBlackPointOnSegment(t,n,r,i){const s=J.round(J.distance(t,n,r,i)),o=(r-t)/s,a=(i-n)/s,c=this.image;for(let u=0;u<s;u++){const g=J.round(t+u*o),A=J.round(n+u*a);if(c.get(g,A))return new X(g,A)}return null}centerEdges(t,n,r,i){const s=t.getX(),o=t.getY(),a=n.getX(),c=n.getY(),u=r.getX(),g=r.getY(),A=i.getX(),p=i.getY(),I=l.CORR;return s<this.width/2?[new X(A-I,p+I),new X(a+I,c+I),new X(u-I,g-I),new X(s+I,o-I)]:[new X(A+I,p+I),new X(a+I,c-I),new X(u-I,g+I),new X(s-I,o-I)]}containsBlackPoint(t,n,r,i){const s=this.image;if(i){for(let o=t;o<=n;o++)if(s.get(o,r))return!0}else for(let o=t;o<=n;o++)if(s.get(r,o))return!0;return!1}}return l.INIT_SIZE=10,l.CORR=1,l})();class tn{static checkAndNudgePoints(e,t){const n=e.getWidth(),r=e.getHeight();let i=!0;for(let s=0;s<t.length&&i;s+=2){const o=Math.floor(t[s]),a=Math.floor(t[s+1]);if(o<-1||o>n||a<-1||a>r)throw new S;i=!1,-1===o?(t[s]=0,i=!0):o===n&&(t[s]=n-1,i=!0),-1===a?(t[s+1]=0,i=!0):a===r&&(t[s+1]=r-1,i=!0)}i=!0;for(let s=t.length-2;s>=0&&i;s-=2){const o=Math.floor(t[s]),a=Math.floor(t[s+1]);if(o<-1||o>n||a<-1||a>r)throw new S;i=!1,-1===o?(t[s]=0,i=!0):o===n&&(t[s]=n-1,i=!0),-1===a?(t[s+1]=0,i=!0):a===r&&(t[s+1]=r-1,i=!0)}}}class at{constructor(e,t,n,r,i,s,o,a,c){this.a11=e,this.a21=t,this.a31=n,this.a12=r,this.a22=i,this.a32=s,this.a13=o,this.a23=a,this.a33=c}static quadrilateralToQuadrilateral(e,t,n,r,i,s,o,a,c,u,g,A,p,I,y,b){const M=at.quadrilateralToSquare(e,t,n,r,i,s,o,a);return at.squareToQuadrilateral(c,u,g,A,p,I,y,b).times(M)}transformPoints(e){const t=e.length,n=this.a11,r=this.a12,i=this.a13,s=this.a21,o=this.a22,a=this.a23,c=this.a31,u=this.a32,g=this.a33;for(let A=0;A<t;A+=2){const p=e[A],I=e[A+1],y=i*p+a*I+g;e[A]=(n*p+s*I+c)/y,e[A+1]=(r*p+o*I+u)/y}}transformPointsWithValues(e,t){const n=this.a11,r=this.a12,i=this.a13,s=this.a21,o=this.a22,a=this.a23,c=this.a31,u=this.a32,g=this.a33,A=e.length;for(let p=0;p<A;p++){const I=e[p],y=t[p],b=i*I+a*y+g;e[p]=(n*I+s*y+c)/b,t[p]=(r*I+o*y+u)/b}}static squareToQuadrilateral(e,t,n,r,i,s,o,a){const c=e-n+i-o,u=t-r+s-a;if(0===c&&0===u)return new at(n-e,i-n,e,r-t,s-r,t,0,0,1);{const g=n-i,A=o-i,p=r-s,I=a-s,y=g*I-A*p,b=(c*I-A*u)/y,M=(g*u-c*p)/y;return new at(n-e+b*n,o-e+M*o,e,r-t+b*r,a-t+M*a,t,b,M,1)}}static quadrilateralToSquare(e,t,n,r,i,s,o,a){return at.squareToQuadrilateral(e,t,n,r,i,s,o,a).buildAdjoint()}buildAdjoint(){return new at(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(e){return new at(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)}}class nn extends tn{sampleGrid(e,t,n,r,i,s,o,a,c,u,g,A,p,I,y,b,M,U,Y){const L=at.quadrilateralToQuadrilateral(r,i,s,o,a,c,u,g,A,p,I,y,b,M,U,Y);return this.sampleGridWithTransform(e,t,n,L)}sampleGridWithTransform(e,t,n,r){if(t<=0||n<=0)throw new S;const i=new Xe(t,n),s=new Float32Array(2*t);for(let o=0;o<n;o++){const a=s.length,c=o+.5;for(let u=0;u<a;u+=2)s[u]=u/2+.5,s[u+1]=c;r.transformPoints(s),tn.checkAndNudgePoints(e,s);try{for(let u=0;u<a;u+=2)e.get(Math.floor(s[u]),Math.floor(s[u+1]))&&i.set(u/2,o)}catch{throw new S}}return i}}class At{static setGridSampler(e){At.gridSampler=e}static getInstance(){return At.gridSampler}}At.gridSampler=new nn;class Ue{constructor(e,t){this.x=e,this.y=t}toResultPoint(){return new X(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Je{constructor(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}detect(){return this.detectMirror(!1)}detectMirror(e){let t=this.getMatrixCenter(),n=this.getBullsEyeCorners(t);if(e){let s=n[0];n[0]=n[2],n[2]=s}this.extractParameters(n);let r=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),i=this.getMatrixCornerPoints(n);return new wt(r,i,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(e){if(!(this.isValidPoint(e[0])&&this.isValidPoint(e[1])&&this.isValidPoint(e[2])&&this.isValidPoint(e[3])))throw new S;let t=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(n,t);let r=0;for(let s=0;s<4;s++){let o=n[(this.shift+s)%4];this.compact?(r<<=7,r+=o>>1&127):(r<<=10,r+=(o>>2&992)+(o>>1&31))}let i=this.getCorrectedParameterData(r,this.compact);this.compact?(this.nbLayers=1+(i>>6),this.nbDataBlocks=1+(63&i)):(this.nbLayers=1+(i>>11),this.nbDataBlocks=1+(2047&i))}getRotation(e,t){let n=0;e.forEach((r,i,s)=>{n=(r>>t-2<<1)+(1&r)+(n<<3)}),n=((1&n)<<11)+(n>>1);for(let r=0;r<4;r++)if(ae.bitCount(n^this.EXPECTED_CORNER_BITS[r])<=2)return r;throw new S}getCorrectedParameterData(e,t){let n,r;t?(n=7,r=2):(n=10,r=4);let i=n-r,s=new Int32Array(n);for(let a=n-1;a>=0;--a)s[a]=15&e,e>>=4;try{new Rt(le.AZTEC_PARAM).decode(s,i)}catch{throw new S}let o=0;for(let a=0;a<r;a++)o=(o<<4)+s[a];return o}getBullsEyeCorners(e){let t=e,n=e,r=e,i=e,s=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let g=this.getFirstDifferent(t,s,1,-1),A=this.getFirstDifferent(n,s,1,1),p=this.getFirstDifferent(r,s,-1,1),I=this.getFirstDifferent(i,s,-1,-1);if(this.nbCenterLayers>2){let y=this.distancePoint(I,g)*this.nbCenterLayers/(this.distancePoint(i,t)*(this.nbCenterLayers+2));if(y<.75||y>1.25||!this.isWhiteOrBlackRectangle(g,A,p,I))break}t=g,n=A,r=p,i=I,s=!s}if(5!==this.nbCenterLayers&&7!==this.nbCenterLayers)throw new S;this.compact=5===this.nbCenterLayers;let o=new X(t.getX()+.5,t.getY()-.5),a=new X(n.getX()+.5,n.getY()+.5),c=new X(r.getX()-.5,r.getY()+.5),u=new X(i.getX()-.5,i.getY()-.5);return this.expandSquare([o,a,c,u],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let e,t,n,r;try{let o=new Zt(this.image).detect();e=o[0],t=o[1],n=o[2],r=o[3]}catch{let a=this.image.getWidth()/2,c=this.image.getHeight()/2;e=this.getFirstDifferent(new Ue(a+7,c-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new Ue(a+7,c+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new Ue(a-7,c+7),!1,-1,1).toResultPoint(),r=this.getFirstDifferent(new Ue(a-7,c-7),!1,-1,-1).toResultPoint()}let i=J.round((e.getX()+r.getX()+t.getX()+n.getX())/4),s=J.round((e.getY()+r.getY()+t.getY()+n.getY())/4);try{let o=new Zt(this.image,15,i,s).detect();e=o[0],t=o[1],n=o[2],r=o[3]}catch{e=this.getFirstDifferent(new Ue(i+7,s-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new Ue(i+7,s+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new Ue(i-7,s+7),!1,-1,1).toResultPoint(),r=this.getFirstDifferent(new Ue(i-7,s-7),!1,-1,-1).toResultPoint()}return i=J.round((e.getX()+r.getX()+t.getX()+n.getX())/4),s=J.round((e.getY()+r.getY()+t.getY()+n.getY())/4),new Ue(i,s)}getMatrixCornerPoints(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())}sampleGrid(e,t,n,r,i){let s=At.getInstance(),o=this.getDimension(),a=o/2-this.nbCenterLayers,c=o/2+this.nbCenterLayers;return s.sampleGrid(e,o,o,a,a,c,a,c,c,a,c,t.getX(),t.getY(),n.getX(),n.getY(),r.getX(),r.getY(),i.getX(),i.getY())}sampleLine(e,t,n){let r=0,i=this.distanceResultPoint(e,t),s=i/n,o=e.getX(),a=e.getY(),c=s*(t.getX()-e.getX())/i,u=s*(t.getY()-e.getY())/i;for(let g=0;g<n;g++)this.image.get(J.round(o+g*c),J.round(a+g*u))&&(r|=1<<n-g-1);return r}isWhiteOrBlackRectangle(e,t,n,r){e=new Ue(e.getX()-3,e.getY()+3),t=new Ue(t.getX()-3,t.getY()-3),n=new Ue(n.getX()+3,n.getY()-3),r=new Ue(r.getX()+3,r.getY()+3);let s=this.getColor(r,e);if(0===s)return!1;let o=this.getColor(e,t);return o===s&&(o=this.getColor(t,n),o===s)&&(o=this.getColor(n,r),o===s)}getColor(e,t){let n=this.distancePoint(e,t),r=(t.getX()-e.getX())/n,i=(t.getY()-e.getY())/n,s=0,o=e.getX(),a=e.getY(),c=this.image.get(e.getX(),e.getY()),u=Math.ceil(n);for(let A=0;A<u;A++)o+=r,a+=i,this.image.get(J.round(o),J.round(a))!==c&&s++;let g=s/n;return g>.1&&g<.9?0:g<=.1===c?1:-1}getFirstDifferent(e,t,n,r){let i=e.getX()+n,s=e.getY()+r;for(;this.isValid(i,s)&&this.image.get(i,s)===t;)i+=n,s+=r;for(i-=n,s-=r;this.isValid(i,s)&&this.image.get(i,s)===t;)i+=n;for(i-=n;this.isValid(i,s)&&this.image.get(i,s)===t;)s+=r;return s-=r,new Ue(i,s)}expandSquare(e,t,n){let r=n/(2*t),i=e[0].getX()-e[2].getX(),s=e[0].getY()-e[2].getY(),o=(e[0].getX()+e[2].getX())/2,a=(e[0].getY()+e[2].getY())/2,c=new X(o+r*i,a+r*s),u=new X(o-r*i,a-r*s);return i=e[1].getX()-e[3].getX(),s=e[1].getY()-e[3].getY(),o=(e[1].getX()+e[3].getX())/2,a=(e[1].getY()+e[3].getY())/2,[c,new X(o+r*i,a+r*s),u,new X(o-r*i,a-r*s)]}isValid(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()}isValidPoint(e){let t=J.round(e.getX()),n=J.round(e.getY());return this.isValid(t,n)}distancePoint(e,t){return J.distance(e.getX(),e.getY(),t.getX(),t.getY())}distanceResultPoint(e,t){return J.distance(e.getX(),e.getY(),t.getX(),t.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(ae.truncDivision(this.nbLayers-4,8)+1)+15}}class be{decode(e,t=null){let n=null,r=new Je(e.getBlackMatrix()),i=null,s=null;try{let u=r.detectMirror(!1);i=u.getPoints(),this.reportFoundResultPoints(t,i),s=(new ke).decode(u)}catch(u){n=u}if(null==s)try{let u=r.detectMirror(!0);i=u.getPoints(),this.reportFoundResultPoints(t,i),s=(new ke).decode(u)}catch(u){throw null!=n?n:u}let o=new ge(s.getText(),s.getRawBytes(),s.getNumBits(),i,K.AZTEC,Ee.currentTimeMillis()),a=s.getByteSegments();null!=a&&o.putMetadata(he.BYTE_SEGMENTS,a);let c=s.getECLevel();return null!=c&&o.putMetadata(he.ERROR_CORRECTION_LEVEL,c),o}reportFoundResultPoints(e,t){if(null!=e){let n=e.get(se.NEED_RESULT_POINT_CALLBACK);null!=n&&t.forEach((r,i,s)=>{n.foundPossibleResultPoint(r)})}}reset(){}}class Te{decode(e,t){try{return this.doDecode(e,t)}catch{if(t&&!0===t.get(se.TRY_HARDER)&&e.isRotateSupported()){const i=e.rotateCounterClockwise(),s=this.doDecode(i,t),o=s.getResultMetadata();let a=270;null!==o&&!0===o.get(he.ORIENTATION)&&(a+=o.get(he.ORIENTATION)%360),s.putMetadata(he.ORIENTATION,a);const c=s.getResultPoints();if(null!==c){const u=i.getHeight();for(let g=0;g<c.length;g++)c[g]=new X(u-c[g].getY()-1,c[g].getX())}return s}throw new S}}reset(){}doDecode(e,t){const n=e.getWidth(),r=e.getHeight();let i=new W(n);const s=t&&!0===t.get(se.TRY_HARDER),o=Math.max(1,r>>(s?8:5));let a;a=s?r:15;const c=Math.trunc(r/2);for(let u=0;u<a;u++){const g=Math.trunc((u+1)/2),p=c+o*(1&u?-g:g);if(p<0||p>=r)break;try{i=e.getBlackRow(p,i)}catch{continue}for(let I=0;I<2;I++){if(1===I&&(i.reverse(),t&&!0===t.get(se.NEED_RESULT_POINT_CALLBACK))){const y=new Map;t.forEach((b,M)=>y.set(M,b)),y.delete(se.NEED_RESULT_POINT_CALLBACK),t=y}try{const y=this.decodeRow(p,i,t);if(1===I){y.putMetadata(he.ORIENTATION,180);const b=y.getResultPoints();null!==b&&(b[0]=new X(n-b[0].getX()-1,b[0].getY()),b[1]=new X(n-b[1].getX()-1,b[1].getY()))}return y}catch{}}}throw new S}static recordPattern(e,t,n){const r=n.length;for(let c=0;c<r;c++)n[c]=0;const i=e.getSize();if(t>=i)throw new S;let s=!e.get(t),o=0,a=t;for(;a<i;){if(e.get(a)!==s)n[o]++;else{if(++o===r)break;n[o]=1,s=!s}a++}if(o!==r&&(o!==r-1||a!==i))throw new S}static recordPatternInReverse(e,t,n){let r=n.length,i=e.get(t);for(;t>0&&r>=0;)e.get(--t)!==i&&(r--,i=!i);if(r>=0)throw new S;Te.recordPattern(e,t+1,n)}static patternMatchVariance(e,t,n){const r=e.length;let i=0,s=0;for(let c=0;c<r;c++)i+=e[c],s+=t[c];if(i<s)return Number.POSITIVE_INFINITY;const o=i/s;n*=o;let a=0;for(let c=0;c<r;c++){const u=e[c],g=t[c]*o,A=u>g?u-g:g-u;if(A>n)return Number.POSITIVE_INFINITY;a+=A}return a/i}}class V extends Te{static findStartPattern(e){const t=e.getSize(),n=e.getNextSet(0);let r=0,i=Int32Array.from([0,0,0,0,0,0]),s=n,o=!1;for(let c=n;c<t;c++)if(e.get(c)!==o)i[r]++;else{if(5===r){let u=V.MAX_AVG_VARIANCE,g=-1;for(let A=V.CODE_START_A;A<=V.CODE_START_C;A++){const p=Te.patternMatchVariance(i,V.CODE_PATTERNS[A],V.MAX_INDIVIDUAL_VARIANCE);p<u&&(u=p,g=A)}if(g>=0&&e.isRange(Math.max(0,s-(c-s)/2),s,!1))return Int32Array.from([s,c,g]);s+=i[0]+i[1],i=i.slice(2,i.length-1),i[r-1]=0,i[r]=0,r--}else r++;i[r]=1,o=!o}throw new S}static decodeCode(e,t,n){Te.recordPattern(e,n,t);let r=V.MAX_AVG_VARIANCE,i=-1;for(let s=0;s<V.CODE_PATTERNS.length;s++){const a=this.patternMatchVariance(t,V.CODE_PATTERNS[s],V.MAX_INDIVIDUAL_VARIANCE);a<r&&(r=a,i=s)}if(i>=0)return i;throw new S}decodeRow(e,t,n){const r=n&&!0===n.get(se.ASSUME_GS1),i=V.findStartPattern(t),s=i[2];let o=0;const a=new Uint8Array(20);let c;switch(a[o++]=s,s){case V.CODE_START_A:c=V.CODE_CODE_A;break;case V.CODE_START_B:c=V.CODE_CODE_B;break;case V.CODE_START_C:c=V.CODE_CODE_C;break;default:throw new H}let u=!1,g=!1,A="",p=i[0],I=i[1];const y=Int32Array.from([0,0,0,0,0,0]);let b=0,M=0,U=s,Y=0,L=!0,Ce=!1,fe=!1;for(;!u;){const ln=g;switch(g=!1,b=M,M=V.decodeCode(t,y,I),a[o++]=M,M!==V.CODE_STOP&&(L=!0),M!==V.CODE_STOP&&(Y++,U+=Y*M),p=I,I+=y.reduce((Ur,Hr)=>Ur+Hr,0),M){case V.CODE_START_A:case V.CODE_START_B:case V.CODE_START_C:throw new H}switch(c){case V.CODE_CODE_A:if(M<64)A+=String.fromCharCode(fe===Ce?32+M:32+M+128),fe=!1;else if(M<96)A+=String.fromCharCode(fe===Ce?M-64:M+64),fe=!1;else switch(M!==V.CODE_STOP&&(L=!1),M){case V.CODE_FNC_1:r&&(A+=0===A.length?"]C1":"\x1d");break;case V.CODE_FNC_2:case V.CODE_FNC_3:break;case V.CODE_FNC_4_A:!Ce&&fe?(Ce=!0,fe=!1):Ce&&fe?(Ce=!1,fe=!1):fe=!0;break;case V.CODE_SHIFT:g=!0,c=V.CODE_CODE_B;break;case V.CODE_CODE_B:c=V.CODE_CODE_B;break;case V.CODE_CODE_C:c=V.CODE_CODE_C;break;case V.CODE_STOP:u=!0}break;case V.CODE_CODE_B:if(M<96)A+=String.fromCharCode(fe===Ce?32+M:32+M+128),fe=!1;else switch(M!==V.CODE_STOP&&(L=!1),M){case V.CODE_FNC_1:r&&(A+=0===A.length?"]C1":"\x1d");break;case V.CODE_FNC_2:case V.CODE_FNC_3:break;case V.CODE_FNC_4_B:!Ce&&fe?(Ce=!0,fe=!1):Ce&&fe?(Ce=!1,fe=!1):fe=!0;break;case V.CODE_SHIFT:g=!0,c=V.CODE_CODE_A;break;case V.CODE_CODE_A:c=V.CODE_CODE_A;break;case V.CODE_CODE_C:c=V.CODE_CODE_C;break;case V.CODE_STOP:u=!0}break;case V.CODE_CODE_C:if(M<100)M<10&&(A+="0"),A+=M;else switch(M!==V.CODE_STOP&&(L=!1),M){case V.CODE_FNC_1:r&&(A+=0===A.length?"]C1":"\x1d");break;case V.CODE_CODE_A:c=V.CODE_CODE_A;break;case V.CODE_CODE_B:c=V.CODE_CODE_B;break;case V.CODE_STOP:u=!0}}ln&&(c=c===V.CODE_CODE_A?V.CODE_CODE_B:V.CODE_CODE_A)}const pt=I-p;if(I=t.getNextUnset(I),!t.isRange(I,Math.min(t.getSize(),I+(I-p)/2),!1))throw new S;if(U-=Y*b,U%103!==b)throw new ze;const Pt=A.length;if(0===Pt)throw new S;Pt>0&&L&&(A=A.substring(0,c===V.CODE_CODE_C?Pt-2:Pt-1));const It=(i[1]+i[0])/2,Pe=p+pt/2,ht=a.length,bt=new Uint8Array(ht);for(let ln=0;ln<ht;ln++)bt[ln]=a[ln];const cn=[new X(It,e),new X(Pe,e)];return new ge(A,bt,0,cn,K.CODE_128,(new Date).getTime())}}V.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],V.MAX_AVG_VARIANCE=.25,V.MAX_INDIVIDUAL_VARIANCE=.7,V.CODE_SHIFT=98,V.CODE_CODE_C=99,V.CODE_CODE_B=100,V.CODE_CODE_A=101,V.CODE_FNC_1=102,V.CODE_FNC_2=97,V.CODE_FNC_3=96,V.CODE_FNC_4_A=101,V.CODE_FNC_4_B=100,V.CODE_START_A=103,V.CODE_START_B=104,V.CODE_START_C=105,V.CODE_STOP=106;let Ct=(()=>{class l extends Te{constructor(t=!1,n=!1){super(),this.usingCheckDigit=t,this.extendedMode=n,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(t,n,r){let i=this.counters;i.fill(0),this.decodeRowResult="";let c,u,s=l.findAsteriskPattern(n,i),o=n.getNextSet(s[1]),a=n.getSize();do{l.recordPattern(n,o,i);let b=l.toNarrowWidePattern(i);if(b<0)throw new S;c=l.patternToChar(b),this.decodeRowResult+=c,u=o;for(let M of i)o+=M;o=n.getNextSet(o)}while("*"!==c);this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let p,g=0;for(let b of i)g+=b;if(o!==a&&2*(o-u-g)<g)throw new S;if(this.usingCheckDigit){let b=this.decodeRowResult.length-1,M=0;for(let U=0;U<b;U++)M+=l.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(U));if(this.decodeRowResult.charAt(b)!==l.ALPHABET_STRING.charAt(M%43))throw new ze;this.decodeRowResult=this.decodeRowResult.substring(0,b)}if(0===this.decodeRowResult.length)throw new S;p=this.extendedMode?l.decodeExtended(this.decodeRowResult):this.decodeRowResult;let y=u+g/2;return new ge(p,null,0,[new X((s[1]+s[0])/2,t),new X(y,t)],K.CODE_39,(new Date).getTime())}static findAsteriskPattern(t,n){let r=t.getSize(),i=t.getNextSet(0),s=0,o=i,a=!1,c=n.length;for(let u=i;u<r;u++)if(t.get(u)!==a)n[s]++;else{if(s===c-1){if(this.toNarrowWidePattern(n)===l.ASTERISK_ENCODING&&t.isRange(Math.max(0,o-Math.floor((u-o)/2)),o,!1))return[o,u];o+=n[0]+n[1],n.copyWithin(0,2,2+s-1),n[s-1]=0,n[s]=0,s--}else s++;n[s]=1,a=!a}throw new S}static toNarrowWidePattern(t){let i,n=t.length,r=0;do{let s=2147483647;for(let c of t)c<s&&c>r&&(s=c);r=s,i=0;let o=0,a=0;for(let c=0;c<n;c++){let u=t[c];u>r&&(a|=1<<n-1-c,i++,o+=u)}if(3===i){for(let c=0;c<n&&i>0;c++){let u=t[c];if(u>r&&(i--,2*u>=o))return-1}return a}}while(i>3);return-1}static patternToChar(t){for(let n=0;n<l.CHARACTER_ENCODINGS.length;n++)if(l.CHARACTER_ENCODINGS[n]===t)return l.ALPHABET_STRING.charAt(n);if(t===l.ASTERISK_ENCODING)return"*";throw new S}static decodeExtended(t){let n=t.length,r="";for(let i=0;i<n;i++){let s=t.charAt(i);if("+"===s||"$"===s||"%"===s||"/"===s){let o=t.charAt(i+1),a="\0";switch(s){case"+":if(!(o>="A"&&o<="Z"))throw new H;a=String.fromCharCode(o.charCodeAt(0)+32);break;case"$":if(!(o>="A"&&o<="Z"))throw new H;a=String.fromCharCode(o.charCodeAt(0)-64);break;case"%":if(o>="A"&&o<="E")a=String.fromCharCode(o.charCodeAt(0)-38);else if(o>="F"&&o<="J")a=String.fromCharCode(o.charCodeAt(0)-11);else if(o>="K"&&o<="O")a=String.fromCharCode(o.charCodeAt(0)+16);else if(o>="P"&&o<="T")a=String.fromCharCode(o.charCodeAt(0)+43);else if("U"===o)a="\0";else if("V"===o)a="@";else if("W"===o)a="`";else{if("X"!==o&&"Y"!==o&&"Z"!==o)throw new H;a="\x7f"}break;case"/":if(o>="A"&&o<="O")a=String.fromCharCode(o.charCodeAt(0)-32);else{if("Z"!==o)throw new H;a=":"}}r+=a,i++}else r+=s}return r}}return l.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",l.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],l.ASTERISK_ENCODING=148,l})();class xe extends Te{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(e,t,n){let r=this.decodeStart(t),i=this.decodeEnd(t),s=new Ie;xe.decodeMiddle(t,r[1],i[0],s);let o=s.toString(),a=null;null!=n&&(a=n.get(se.ALLOWED_LENGTHS)),null==a&&(a=xe.DEFAULT_ALLOWED_LENGTHS);let c=o.length,u=!1,g=0;for(let I of a){if(c===I){u=!0;break}I>g&&(g=I)}if(!u&&c>g&&(u=!0),!u)throw new H;const A=[new X(r[1],e),new X(i[0],e)];return new ge(o,null,0,A,K.ITF,(new Date).getTime())}static decodeMiddle(e,t,n,r){let i=new Int32Array(10),s=new Int32Array(5),o=new Int32Array(5);for(i.fill(0),s.fill(0),o.fill(0);t<n;){Te.recordPattern(e,t,i);for(let c=0;c<5;c++){let u=2*c;s[c]=i[u],o[c]=i[u+1]}let a=xe.decodeDigit(s);r.append(a.toString()),a=this.decodeDigit(o),r.append(a.toString()),i.forEach(function(c){t+=c})}}decodeStart(e){let t=xe.skipWhiteSpace(e),n=xe.findGuardPattern(e,t,xe.START_PATTERN);return this.narrowLineWidth=(n[1]-n[0])/4,this.validateQuietZone(e,n[0]),n}validateQuietZone(e,t){let n=10*this.narrowLineWidth;n=n<t?n:t;for(let r=t-1;n>0&&r>=0&&!e.get(r);r--)n--;if(0!==n)throw new S}static skipWhiteSpace(e){const t=e.getSize(),n=e.getNextSet(0);if(n===t)throw new S;return n}decodeEnd(e){e.reverse();try{let n,t=xe.skipWhiteSpace(e);try{n=xe.findGuardPattern(e,t,xe.END_PATTERN_REVERSED[0])}catch(i){i instanceof S&&(n=xe.findGuardPattern(e,t,xe.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,n[0]);let r=n[0];return n[0]=e.getSize()-n[1],n[1]=e.getSize()-r,n}finally{e.reverse()}}static findGuardPattern(e,t,n){let r=n.length,i=new Int32Array(r),s=e.getSize(),o=!1,a=0,c=t;i.fill(0);for(let u=t;u<s;u++)if(e.get(u)!==o)i[a]++;else{if(a===r-1){if(Te.patternMatchVariance(i,n,xe.MAX_INDIVIDUAL_VARIANCE)<xe.MAX_AVG_VARIANCE)return[c,u];c+=i[0]+i[1],Ee.arraycopy(i,2,i,0,a-1),i[a-1]=0,i[a]=0,a--}else a++;i[a]=1,o=!o}throw new S}static decodeDigit(e){let t=xe.MAX_AVG_VARIANCE,n=-1,r=xe.PATTERNS.length;for(let i=0;i<r;i++){let o=Te.patternMatchVariance(e,xe.PATTERNS[i],xe.MAX_INDIVIDUAL_VARIANCE);o<t?(t=o,n=i):o===t&&(n=-1)}if(n>=0)return n%10;throw new S}}xe.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],xe.MAX_AVG_VARIANCE=.38,xe.MAX_INDIVIDUAL_VARIANCE=.5,xe.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],xe.START_PATTERN=Int32Array.from([1,1,1,1]),xe.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Oe extends Te{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(e){let n,t=!1,r=0,i=Int32Array.from([0,0,0]);for(;!t;){i=Int32Array.from([0,0,0]),n=Oe.findGuardPattern(e,r,!1,this.START_END_PATTERN,i);let s=n[0];r=n[1];let o=s-(r-s);o>=0&&(t=e.isRange(o,s,!1))}return n}static checkChecksum(e){return Oe.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let t=e.length;if(0===t)return!1;let n=parseInt(e.charAt(t-1),10);return Oe.getStandardUPCEANChecksum(e.substring(0,t-1))===n}static getStandardUPCEANChecksum(e){let t=e.length,n=0;for(let r=t-1;r>=0;r-=2){let i=e.charAt(r).charCodeAt(0)-48;if(i<0||i>9)throw new H;n+=i}n*=3;for(let r=t-2;r>=0;r-=2){let i=e.charAt(r).charCodeAt(0)-48;if(i<0||i>9)throw new H;n+=i}return(1e3-n)%10}static decodeEnd(e,t){return Oe.findGuardPattern(e,t,!1,Oe.START_END_PATTERN,new Int32Array(Oe.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(e,t,n,r){return this.findGuardPattern(e,t,n,r,new Int32Array(r.length))}static findGuardPattern(e,t,n,r,i){let s=e.getSize(),o=0,a=t=n?e.getNextUnset(t):e.getNextSet(t),c=r.length,u=n;for(let g=t;g<s;g++)if(e.get(g)!==u)i[o]++;else{if(o===c-1){if(Te.patternMatchVariance(i,r,Oe.MAX_INDIVIDUAL_VARIANCE)<Oe.MAX_AVG_VARIANCE)return Int32Array.from([a,g]);a+=i[0]+i[1];let A=i.slice(2,i.length-1);for(let p=0;p<o-1;p++)i[p]=A[p];i[o-1]=0,i[o]=0,o--}else o++;i[o]=1,u=!u}throw new S}static decodeDigit(e,t,n,r){this.recordPattern(e,n,t);let i=this.MAX_AVG_VARIANCE,s=-1,o=r.length;for(let a=0;a<o;a++){let u=Te.patternMatchVariance(t,r[a],Oe.MAX_INDIVIDUAL_VARIANCE);u<i&&(i=u,s=a)}if(s>=0)return s;throw new S}}Oe.MAX_AVG_VARIANCE=.48,Oe.MAX_INDIVIDUAL_VARIANCE=.7,Oe.START_END_PATTERN=Int32Array.from([1,1,1]),Oe.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Oe.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Oe.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Mt{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,t,n){let r=this.decodeRowStringBuffer,i=this.decodeMiddle(t,n,r),s=r.toString(),o=Mt.parseExtensionString(s),a=[new X((n[0]+n[1])/2,e),new X(i,e)],c=new ge(s,null,0,a,K.UPC_EAN_EXTENSION,(new Date).getTime());return null!=o&&c.putAllMetadata(o),c}decodeMiddle(e,t,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),s=t[1],o=0;for(let c=0;c<5&&s<i;c++){let u=Oe.decodeDigit(e,r,s,Oe.L_AND_G_PATTERNS);n+=String.fromCharCode(48+u%10);for(let g of r)s+=g;u>=10&&(o|=1<<4-c),4!==c&&(s=e.getNextSet(s),s=e.getNextUnset(s))}if(5!==n.length)throw new S;let a=this.determineCheckDigit(o);if(Mt.extensionChecksum(n.toString())!==a)throw new S;return s}static extensionChecksum(e){let t=e.length,n=0;for(let r=t-2;r>=0;r-=2)n+=e.charAt(r).charCodeAt(0)-48;n*=3;for(let r=t-1;r>=0;r-=2)n+=e.charAt(r).charCodeAt(0)-48;return n*=3,n%10}determineCheckDigit(e){for(let t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new S}static parseExtensionString(e){if(5!==e.length)return null;let t=Mt.parseExtension5String(e);return null==t?null:new Map([[he.SUGGESTED_PRICE,t]])}static parseExtension5String(e){let t;switch(e.charAt(0)){case"0":t="\xa3";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t=""}let n=parseInt(e.substring(1)),i=n%100;return t+(n/100).toString()+"."+(i<10?"0"+i:i.toString())}}class ft{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,t,n){let r=this.decodeRowStringBuffer,i=this.decodeMiddle(t,n,r),s=r.toString(),o=ft.parseExtensionString(s),a=[new X((n[0]+n[1])/2,e),new X(i,e)],c=new ge(s,null,0,a,K.UPC_EAN_EXTENSION,(new Date).getTime());return null!=o&&c.putAllMetadata(o),c}decodeMiddle(e,t,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),s=t[1],o=0;for(let a=0;a<2&&s<i;a++){let c=Oe.decodeDigit(e,r,s,Oe.L_AND_G_PATTERNS);n+=String.fromCharCode(48+c%10);for(let u of r)s+=u;c>=10&&(o|=1<<1-a),1!==a&&(s=e.getNextSet(s),s=e.getNextUnset(s))}if(2!==n.length)throw new S;if(parseInt(n.toString())%4!==o)throw new S;return s}static parseExtensionString(e){return 2!==e.length?null:new Map([[he.ISSUE_NUMBER,parseInt(e)]])}}class mn{static decodeRow(e,t,n){let r=Oe.findGuardPattern(t,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return(new Mt).decodeRow(e,t,r)}catch{return(new ft).decodeRow(e,t,r)}}}mn.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Ne extends Oe{constructor(){super(),this.decodeRowStringBuffer="",Ne.L_AND_G_PATTERNS=Ne.L_PATTERNS.map(e=>Int32Array.from(e));for(let e=10;e<20;e++){let t=Ne.L_PATTERNS[e-10],n=new Int32Array(t.length);for(let r=0;r<t.length;r++)n[r]=t[t.length-r-1];Ne.L_AND_G_PATTERNS[e]=n}}decodeRow(e,t,n){let r=Ne.findStartGuardPattern(t),i=null==n?null:n.get(se.NEED_RESULT_POINT_CALLBACK);if(null!=i){const L=new X((r[0]+r[1])/2,e);i.foundPossibleResultPoint(L)}let s=this.decodeMiddle(t,r,this.decodeRowStringBuffer),o=s.rowOffset,a=s.resultString;if(null!=i){const L=new X(o,e);i.foundPossibleResultPoint(L)}let c=this.decodeEnd(t,o);if(null!=i){const L=new X((c[0]+c[1])/2,e);i.foundPossibleResultPoint(L)}let u=c[1],g=u+(u-c[0]);if(g>=t.getSize()||!t.isRange(u,g,!1))throw new S;let A=a.toString();if(A.length<8)throw new H;if(!Ne.checkChecksum(A))throw new ze;let p=(r[1]+r[0])/2,I=(c[1]+c[0])/2,y=this.getBarcodeFormat(),b=[new X(p,e),new X(I,e)],M=new ge(A,null,0,b,y,(new Date).getTime()),U=0;try{let L=mn.decodeRow(e,t,c[1]);M.putMetadata(he.UPC_EAN_EXTENSION,L.getText()),M.putAllMetadata(L.getResultMetadata()),M.addResultPoints(L.getResultPoints()),U=L.getText().length}catch{}let Y=null==n?null:n.get(se.ALLOWED_EAN_EXTENSIONS);if(null!=Y){let L=!1;for(let Ce in Y)if(U.toString()===Ce){L=!0;break}if(!L)throw new S}return M}decodeEnd(e,t){return Ne.findGuardPattern(e,t,!1,Ne.START_END_PATTERN,new Int32Array(Ne.START_END_PATTERN.length).fill(0))}static checkChecksum(e){return Ne.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let t=e.length;if(0===t)return!1;let n=parseInt(e.charAt(t-1),10);return Ne.getStandardUPCEANChecksum(e.substring(0,t-1))===n}static getStandardUPCEANChecksum(e){let t=e.length,n=0;for(let r=t-1;r>=0;r-=2){let i=e.charAt(r).charCodeAt(0)-48;if(i<0||i>9)throw new H;n+=i}n*=3;for(let r=t-2;r>=0;r-=2){let i=e.charAt(r).charCodeAt(0)-48;if(i<0||i>9)throw new H;n+=i}return(1e3-n)%10}}let un=(()=>{class l extends Ne{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(t,n,r){let i=this.decodeMiddleCounters;i[0]=0,i[1]=0,i[2]=0,i[3]=0;let s=t.getSize(),o=n[1],a=0;for(let u=0;u<6&&o<s;u++){let g=Ne.decodeDigit(t,i,o,Ne.L_AND_G_PATTERNS);r+=String.fromCharCode(48+g%10);for(let A of i)o+=A;g>=10&&(a|=1<<5-u)}r=l.determineFirstDigit(r,a),o=Ne.findGuardPattern(t,o,!0,Ne.MIDDLE_PATTERN,new Int32Array(Ne.MIDDLE_PATTERN.length).fill(0))[1];for(let u=0;u<6&&o<s;u++){let g=Ne.decodeDigit(t,i,o,Ne.L_PATTERNS);r+=String.fromCharCode(48+g);for(let A of i)o+=A}return{rowOffset:o,resultString:r}}getBarcodeFormat(){return K.EAN_13}static determineFirstDigit(t,n){for(let r=0;r<10;r++)if(n===this.FIRST_DIGIT_ENCODINGS[r])return String.fromCharCode(48+r)+t;throw new S}}return l.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],l})();class d extends Ne{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,t,n){const r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),s=t[1];for(let a=0;a<4&&s<i;a++){let c=Ne.decodeDigit(e,r,s,Ne.L_PATTERNS);n+=String.fromCharCode(48+c);for(let u of r)s+=u}s=Ne.findGuardPattern(e,s,!0,Ne.MIDDLE_PATTERN,new Int32Array(Ne.MIDDLE_PATTERN.length).fill(0))[1];for(let a=0;a<4&&s<i;a++){let c=Ne.decodeDigit(e,r,s,Ne.L_PATTERNS);n+=String.fromCharCode(48+c);for(let u of r)s+=u}return{rowOffset:s,resultString:n}}getBarcodeFormat(){return K.EAN_8}}class h extends Ne{constructor(){super(...arguments),this.ean13Reader=new un}getBarcodeFormat(){return K.UPC_A}decode(e,t){return this.maybeReturnResult(this.ean13Reader.decode(e))}decodeRow(e,t,n){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,t,n))}decodeMiddle(e,t,n){return this.ean13Reader.decodeMiddle(e,t,n)}maybeReturnResult(e){let t=e.getText();if("0"===t.charAt(0)){let n=new ge(t.substring(1),null,null,e.getResultPoints(),K.UPC_A);return null!=e.getResultMetadata()&&n.putAllMetadata(e.getResultMetadata()),n}throw new S}reset(){this.ean13Reader.reset()}}class f extends Ne{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(e,t,n){const r=this.decodeMiddleCounters.map(c=>c);r[0]=0,r[1]=0,r[2]=0,r[3]=0;const i=e.getSize();let s=t[1],o=0;for(let c=0;c<6&&s<i;c++){const u=f.decodeDigit(e,r,s,f.L_AND_G_PATTERNS);n+=String.fromCharCode(48+u%10);for(let g of r)s+=g;u>=10&&(o|=1<<5-c)}return{rowOffset:s,resultString:f.determineNumSysAndCheckDigit(n,o)}}decodeEnd(e,t){return f.findGuardPatternWithoutCounters(e,t,!0,f.MIDDLE_END_PATTERN)}checkChecksum(e){return Ne.checkChecksum(f.convertUPCEtoUPCA(e))}static determineNumSysAndCheckDigit(e,t){for(let n=0;n<=1;n++)for(let r=0;r<10;r++)if(t===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[n][r])return String.fromCharCode(48+n)+e+String.fromCharCode(48+r);throw S.getNotFoundInstance()}getBarcodeFormat(){return K.UPC_E}static convertUPCEtoUPCA(e){const t=e.slice(1,7).split("").map(i=>i.charCodeAt(0)),n=new Ie;n.append(e.charAt(0));let r=t[5];switch(r){case 0:case 1:case 2:n.appendChars(t,0,2),n.append(r),n.append("0000"),n.appendChars(t,2,3);break;case 3:n.appendChars(t,0,3),n.append("00000"),n.appendChars(t,3,2);break;case 4:n.appendChars(t,0,4),n.append("00000"),n.append(t[4]);break;default:n.appendChars(t,0,5),n.append("0000"),n.append(r)}return e.length>=8&&n.append(e.charAt(7)),n.toString()}}f.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),f.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class w extends Te{constructor(e){super();let t=null==e?null:e.get(se.POSSIBLE_FORMATS),n=[];k(t)?(n.push(new un),n.push(new h),n.push(new d),n.push(new f)):(t.indexOf(K.EAN_13)>-1&&n.push(new un),t.indexOf(K.UPC_A)>-1&&n.push(new h),t.indexOf(K.EAN_8)>-1&&n.push(new d),t.indexOf(K.UPC_E)>-1&&n.push(new f)),this.readers=n}decodeRow(e,t,n){for(let r of this.readers)try{const i=r.decodeRow(e,t,n),s=i.getBarcodeFormat()===K.EAN_13&&"0"===i.getText().charAt(0),o=null==n?null:n.get(se.POSSIBLE_FORMATS),a=null==o||o.includes(K.UPC_A);if(s&&a){const c=i.getRawBytes(),u=new ge(i.getText().substring(1),c,c?c.length:null,i.getResultPoints(),K.UPC_A);return u.putAllMetadata(i.getResultMetadata()),u}return i}catch{}throw new S}reset(){for(let e of this.readers)e.reset()}}let C=(()=>{class l extends Te{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(t,n){for(let r=0;r<n.length;r++)if(Te.patternMatchVariance(t,n[r],l.MAX_INDIVIDUAL_VARIANCE)<l.MAX_AVG_VARIANCE)return r;throw new S}static count(t){return J.sum(new Int32Array(t))}static increment(t,n){let r=0,i=n[0];for(let s=1;s<t.length;s++)n[s]>i&&(i=n[s],r=s);t[r]++}static decrement(t,n){let r=0,i=n[0];for(let s=1;s<t.length;s++)n[s]<i&&(i=n[s],r=s);t[r]--}static isFinderPattern(t){let n=t[0]+t[1],i=n/(n+t[2]+t[3]);if(i>=l.MIN_FINDER_PATTERN_RATIO&&i<=l.MAX_FINDER_PATTERN_RATIO){let s=Number.MAX_SAFE_INTEGER,o=Number.MIN_SAFE_INTEGER;for(let a of t)a>o&&(o=a),a<s&&(s=a);return o<10*s}return!1}}return l.MAX_AVG_VARIANCE=.2,l.MAX_INDIVIDUAL_VARIANCE=.45,l.MIN_FINDER_PATTERN_RATIO=9.5/12,l.MAX_FINDER_PATTERN_RATIO=12.5/14,l})();class x{constructor(e,t){this.value=e,this.checksumPortion=t}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(e){return e instanceof x&&this.value===e.value&&this.checksumPortion===e.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class T{constructor(e,t,n,r,i){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new X(n,i)),this.resultPoints.push(new X(r,i))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(e){return e instanceof T&&this.value===e.value}hashCode(){return this.value}}class _{constructor(){}static getRSSvalue(e,t,n){let r=0;for(let a of e)r+=a;let i=0,s=0,o=e.length;for(let a=0;a<o-1;a++){let c;for(c=1,s|=1<<a;c<e[a];c++,s&=~(1<<a)){let u=_.combins(r-c-1,o-a-2);if(n&&0===s&&r-c-(o-a-1)>=o-a-1&&(u-=_.combins(r-c-(o-a),o-a-2)),o-a-1>1){let g=0;for(let A=r-c-(o-a-2);A>t;A--)g+=_.combins(r-c-A-1,o-a-3);u-=g*(o-1-a)}else r-c>t&&u--;i+=u}r-=c}return i}static combins(e,t){let n,r;e-t>t?(r=t,n=e-t):(r=e-t,n=t);let i=1,s=1;for(let o=e;o>n;o--)i*=o,s<=r&&(i/=s,s++);for(;s<=r;)i/=s,s++;return i}}class P{static buildBitArray(e){let t=2*e.length-1;null==e[e.length-1].getRightChar()&&(t-=1);let r=new W(12*t),i=0,o=e[0].getRightChar().getValue();for(let a=11;a>=0;--a)o&1<<a&&r.set(i),i++;for(let a=1;a<e.length;++a){let c=e[a],u=c.getLeftChar().getValue();for(let g=11;g>=0;--g)u&1<<g&&r.set(i),i++;if(null!=c.getRightChar()){let g=c.getRightChar().getValue();for(let A=11;A>=0;--A)g&1<<A&&r.set(i),i++}}return r}}class E{constructor(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class R{constructor(e){this.newPosition=e}getNewPosition(){return this.newPosition}}let j=(()=>{class l extends R{constructor(t,n){super(t),this.value=n}getValue(){return this.value}isFNC1(){return this.value===l.FNC1}}return l.FNC1="$",l})();class me extends R{constructor(e,t,n){super(e),n?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=t}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}let _e=(()=>{class l extends R{constructor(t,n,r){if(super(t),n<0||n>10||r<0||r>10)throw new H;this.firstDigit=n,this.secondDigit=r}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return 10*this.firstDigit+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===l.FNC1}isSecondDigitFNC1(){return this.secondDigit===l.FNC1}isAnyFNC1(){return this.firstDigit===l.FNC1||this.secondDigit===l.FNC1}}return l.FNC1=10,l})();class G{constructor(){}static parseFieldsInGeneralPurpose(e){if(!e)return null;if(e.length<2)throw new S;let t=e.substring(0,2);for(let i of G.TWO_DIGIT_DATA_LENGTH)if(i[0]===t)return i[1]===G.VARIABLE_LENGTH?G.processVariableAI(2,i[2],e):G.processFixedAI(2,i[1],e);if(e.length<3)throw new S;let n=e.substring(0,3);for(let i of G.THREE_DIGIT_DATA_LENGTH)if(i[0]===n)return i[1]===G.VARIABLE_LENGTH?G.processVariableAI(3,i[2],e):G.processFixedAI(3,i[1],e);for(let i of G.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(i[0]===n)return i[1]===G.VARIABLE_LENGTH?G.processVariableAI(4,i[2],e):G.processFixedAI(4,i[1],e);if(e.length<4)throw new S;let r=e.substring(0,4);for(let i of G.FOUR_DIGIT_DATA_LENGTH)if(i[0]===r)return i[1]===G.VARIABLE_LENGTH?G.processVariableAI(4,i[2],e):G.processFixedAI(4,i[1],e);throw new S}static processFixedAI(e,t,n){if(n.length<e)throw new S;let r=n.substring(0,e);if(n.length<e+t)throw new S;let i=n.substring(e,e+t),s=n.substring(e+t),o="("+r+")"+i,a=G.parseFieldsInGeneralPurpose(s);return null==a?o:o+a}static processVariableAI(e,t,n){let i,r=n.substring(0,e);i=n.length<e+t?n.length:e+t;let s=n.substring(e,i),o=n.substring(i),a="("+r+")"+s,c=G.parseFieldsInGeneralPurpose(o);return null==c?a:a+c}}G.VARIABLE_LENGTH=[],G.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",G.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",G.VARIABLE_LENGTH,20],["22",G.VARIABLE_LENGTH,29],["30",G.VARIABLE_LENGTH,8],["37",G.VARIABLE_LENGTH,8],["90",G.VARIABLE_LENGTH,30],["91",G.VARIABLE_LENGTH,30],["92",G.VARIABLE_LENGTH,30],["93",G.VARIABLE_LENGTH,30],["94",G.VARIABLE_LENGTH,30],["95",G.VARIABLE_LENGTH,30],["96",G.VARIABLE_LENGTH,30],["97",G.VARIABLE_LENGTH,3],["98",G.VARIABLE_LENGTH,30],["99",G.VARIABLE_LENGTH,30]],G.THREE_DIGIT_DATA_LENGTH=[["240",G.VARIABLE_LENGTH,30],["241",G.VARIABLE_LENGTH,30],["242",G.VARIABLE_LENGTH,6],["250",G.VARIABLE_LENGTH,30],["251",G.VARIABLE_LENGTH,30],["253",G.VARIABLE_LENGTH,17],["254",G.VARIABLE_LENGTH,20],["400",G.VARIABLE_LENGTH,30],["401",G.VARIABLE_LENGTH,30],["402",17],["403",G.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",G.VARIABLE_LENGTH,20],["421",G.VARIABLE_LENGTH,15],["422",3],["423",G.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],G.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",G.VARIABLE_LENGTH,15],["391",G.VARIABLE_LENGTH,18],["392",G.VARIABLE_LENGTH,15],["393",G.VARIABLE_LENGTH,18],["703",G.VARIABLE_LENGTH,30]],G.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",G.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",G.VARIABLE_LENGTH,20],["8003",G.VARIABLE_LENGTH,30],["8004",G.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",G.VARIABLE_LENGTH,30],["8008",G.VARIABLE_LENGTH,12],["8018",18],["8020",G.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",G.VARIABLE_LENGTH,70],["8200",G.VARIABLE_LENGTH,70]];class Le{constructor(e){this.buffer=new Ie,this.information=e}decodeAllCodes(e,t){let n=t,r=null;for(;;){let i=this.decodeGeneralPurposeField(n,r),s=G.parseFieldsInGeneralPurpose(i.getNewString());if(null!=s&&e.append(s),r=i.isRemaining()?""+i.getRemainingValue():null,n===i.getNewPosition())break;n=i.getNewPosition()}return e.toString()}isStillNumeric(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(let t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)}decodeNumeric(e){if(e+7>this.information.getSize()){let i=this.extractNumericValueFromBitArray(e,4);return new _e(this.information.getSize(),0===i?_e.FNC1:i-1,_e.FNC1)}let t=this.extractNumericValueFromBitArray(e,7);return new _e(e+7,(t-8)/11,(t-8)%11)}extractNumericValueFromBitArray(e,t){return Le.extractNumericValueFromBitArray(this.information,e,t)}static extractNumericValueFromBitArray(e,t,n){let r=0;for(let i=0;i<n;++i)e.get(t+i)&&(r|=1<<n-i-1);return r}decodeGeneralPurposeField(e,t){this.buffer.setLengthToZero(),null!=t&&this.buffer.append(t),this.current.setPosition(e);let n=this.parseBlocks();return null!=n&&n.isRemaining()?new me(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new me(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let e,t;do{let n=this.current.getPosition();if(this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished()),n===this.current.getPosition()&&!e)break}while(!e);return t.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){let t;return t=e.isSecondDigitFNC1()?new me(this.current.getPosition(),this.buffer.toString()):new me(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new E(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){let t=new me(this.current.getPosition(),this.buffer.toString());return new E(!0,t)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new E(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let t=new me(this.current.getPosition(),this.buffer.toString());return new E(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new E(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let t=new me(this.current.getPosition(),this.buffer.toString());return new E(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new E(!1)}isStillIsoIec646(e){if(e+5>this.information.getSize())return!1;let t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(e,8);return r>=232&&r<253}decodeIsoIec646(e){let t=this.extractNumericValueFromBitArray(e,5);if(15===t)return new j(e+5,j.FNC1);if(t>=5&&t<15)return new j(e+5,"0"+(t-5));let i,n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<90)return new j(e+7,""+(n+1));if(n>=90&&n<116)return new j(e+7,""+(n+7));switch(this.extractNumericValueFromBitArray(e,8)){case 232:i="!";break;case 233:i='"';break;case 234:i="%";break;case 235:i="&";break;case 236:i="'";break;case 237:i="(";break;case 238:i=")";break;case 239:i="*";break;case 240:i="+";break;case 241:i=",";break;case 242:i="-";break;case 243:i=".";break;case 244:i="/";break;case 245:i=":";break;case 246:i=";";break;case 247:i="<";break;case 248:i="=";break;case 249:i=">";break;case 250:i="?";break;case 251:i="_";break;case 252:i=" ";break;default:throw new H}return new j(e+8,i)}isStillAlpha(e){if(e+5>this.information.getSize())return!1;let t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63}decodeAlphanumeric(e){let t=this.extractNumericValueFromBitArray(e,5);if(15===t)return new j(e+5,j.FNC1);if(t>=5&&t<15)return new j(e+5,"0"+(t-5));let r,n=this.extractNumericValueFromBitArray(e,6);if(n>=32&&n<58)return new j(e+6,""+(n+33));switch(n){case 58:r="*";break;case 59:r=",";break;case 60:r="-";break;case 61:r=".";break;case 62:r="/";break;default:throw new ot("Decoding invalid alphanumeric value: "+n)}return new j(e+6,r)}isAlphaTo646ToAlphaLatch(e){if(e+1>this.information.getSize())return!1;for(let t=0;t<5&&t+e<this.information.getSize();++t)if(2===t){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0}isAlphaOr646ToNumericLatch(e){if(e+3>this.information.getSize())return!1;for(let t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0}isNumericToAlphaNumericLatch(e){if(e+1>this.information.getSize())return!1;for(let t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0}}class je{constructor(e){this.information=e,this.generalDecoder=new Le(e)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}let Ge=(()=>{class l extends je{constructor(t){super(t)}encodeCompressedGtin(t,n){t.append("(01)");let r=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,n,r)}encodeCompressedGtinWithoutAI(t,n,r){for(let i=0;i<4;++i){let s=this.getGeneralDecoder().extractNumericValueFromBitArray(n+10*i,10);s/100==0&&t.append("0"),s/10==0&&t.append("0"),t.append(s)}l.appendCheckDigit(t,r)}static appendCheckDigit(t,n){let r=0;for(let i=0;i<13;i++){let s=t.charAt(i+n).charCodeAt(0)-48;r+=1&i?s:3*s}r=10-r%10,10===r&&(r=0),t.append(r)}}return l.GTIN_SIZE=40,l})(),vt=(()=>{class l extends Ge{constructor(t){super(t)}parseInformation(){let t=new Ie;t.append("(01)");let n=t.length(),r=this.getGeneralDecoder().extractNumericValueFromBitArray(l.HEADER_SIZE,4);return t.append(r),this.encodeCompressedGtinWithoutAI(t,l.HEADER_SIZE+4,n),this.getGeneralDecoder().decodeAllCodes(t,l.HEADER_SIZE+44)}}return l.HEADER_SIZE=4,l})(),Wt=(()=>{class l extends je{constructor(t){super(t)}parseInformation(){let t=new Ie;return this.getGeneralDecoder().decodeAllCodes(t,l.HEADER_SIZE)}}return l.HEADER_SIZE=5,l})();class Et extends Ge{constructor(e){super(e)}encodeCompressedWeight(e,t,n){let r=this.getGeneralDecoder().extractNumericValueFromBitArray(t,n);this.addWeightCode(e,r);let i=this.checkWeight(r),s=1e5;for(let o=0;o<5;++o)i/s==0&&e.append("0"),s/=10;e.append(i)}}let Lt=(()=>{class l extends Et{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()!=l.HEADER_SIZE+Et.GTIN_SIZE+l.WEIGHT_SIZE)throw new S;let t=new Ie;return this.encodeCompressedGtin(t,l.HEADER_SIZE),this.encodeCompressedWeight(t,l.HEADER_SIZE+Et.GTIN_SIZE,l.WEIGHT_SIZE),t.toString()}}return l.HEADER_SIZE=5,l.WEIGHT_SIZE=15,l})();class hn extends Lt{constructor(e){super(e)}addWeightCode(e,t){e.append("(3103)")}checkWeight(e){return e}}class or extends Lt{constructor(e){super(e)}addWeightCode(e,t){e.append(t<1e4?"(3202)":"(3203)")}checkWeight(e){return e<1e4?e:e-1e4}}let ar=(()=>{class l extends Ge{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<l.HEADER_SIZE+Ge.GTIN_SIZE)throw new S;let t=new Ie;this.encodeCompressedGtin(t,l.HEADER_SIZE);let n=this.getGeneralDecoder().extractNumericValueFromBitArray(l.HEADER_SIZE+Ge.GTIN_SIZE,l.LAST_DIGIT_SIZE);t.append("(392"),t.append(n),t.append(")");let r=this.getGeneralDecoder().decodeGeneralPurposeField(l.HEADER_SIZE+Ge.GTIN_SIZE+l.LAST_DIGIT_SIZE,null);return t.append(r.getNewString()),t.toString()}}return l.HEADER_SIZE=8,l.LAST_DIGIT_SIZE=2,l})(),cr=(()=>{class l extends Ge{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<l.HEADER_SIZE+Ge.GTIN_SIZE)throw new S;let t=new Ie;this.encodeCompressedGtin(t,l.HEADER_SIZE);let n=this.getGeneralDecoder().extractNumericValueFromBitArray(l.HEADER_SIZE+Ge.GTIN_SIZE,l.LAST_DIGIT_SIZE);t.append("(393"),t.append(n),t.append(")");let r=this.getGeneralDecoder().extractNumericValueFromBitArray(l.HEADER_SIZE+Ge.GTIN_SIZE+l.LAST_DIGIT_SIZE,l.FIRST_THREE_DIGITS_SIZE);r/100==0&&t.append("0"),r/10==0&&t.append("0"),t.append(r);let i=this.getGeneralDecoder().decodeGeneralPurposeField(l.HEADER_SIZE+Ge.GTIN_SIZE+l.LAST_DIGIT_SIZE+l.FIRST_THREE_DIGITS_SIZE,null);return t.append(i.getNewString()),t.toString()}}return l.HEADER_SIZE=8,l.LAST_DIGIT_SIZE=2,l.FIRST_THREE_DIGITS_SIZE=10,l})(),Qt=(()=>{class l extends Et{constructor(t,n,r){super(t),this.dateCode=r,this.firstAIdigits=n}parseInformation(){if(this.getInformation().getSize()!=l.HEADER_SIZE+l.GTIN_SIZE+l.WEIGHT_SIZE+l.DATE_SIZE)throw new S;let t=new Ie;return this.encodeCompressedGtin(t,l.HEADER_SIZE),this.encodeCompressedWeight(t,l.HEADER_SIZE+l.GTIN_SIZE,l.WEIGHT_SIZE),this.encodeCompressedDate(t,l.HEADER_SIZE+l.GTIN_SIZE+l.WEIGHT_SIZE),t.toString()}encodeCompressedDate(t,n){let r=this.getGeneralDecoder().extractNumericValueFromBitArray(n,l.DATE_SIZE);if(38400==r)return;t.append("("),t.append(this.dateCode),t.append(")");let i=r%32;r/=32;let s=r%12+1;r/=12;let o=r;o/10==0&&t.append("0"),t.append(o),s/10==0&&t.append("0"),t.append(s),i/10==0&&t.append("0"),t.append(i)}addWeightCode(t,n){t.append("("),t.append(this.firstAIdigits),t.append(n/1e5),t.append(")")}checkWeight(t){return t%1e5}}return l.HEADER_SIZE=8,l.WEIGHT_SIZE=20,l.DATE_SIZE=16,l})();function jn(l){try{if(l.get(1))return new vt(l);if(!l.get(2))return new Wt(l);switch(Le.extractNumericValueFromBitArray(l,1,4)){case 4:return new hn(l);case 5:return new or(l)}switch(Le.extractNumericValueFromBitArray(l,1,5)){case 12:return new ar(l);case 13:return new cr(l)}switch(Le.extractNumericValueFromBitArray(l,1,7)){case 56:return new Qt(l,"310","11");case 57:return new Qt(l,"320","11");case 58:return new Qt(l,"310","13");case 59:return new Qt(l,"320","13");case 60:return new Qt(l,"310","15");case 61:return new Qt(l,"320","15");case 62:return new Qt(l,"310","17");case 63:return new Qt(l,"320","17")}}catch(e){throw console.log(e),new ot("unknown decoder: "+l)}}class Kt{constructor(e,t,n,r){this.leftchar=e,this.rightchar=t,this.finderpattern=n,this.maybeLast=r}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return null==this.rightchar}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(null==this.finderpattern?"null":this.finderpattern.getValue())+" ]"}static equals(e,t){return e instanceof Kt&&Kt.equalsOrNull(e.leftchar,t.leftchar)&&Kt.equalsOrNull(e.rightchar,t.rightchar)&&Kt.equalsOrNull(e.finderpattern,t.finderpattern)}static equalsOrNull(e,t){return null===e?null===t:Kt.equals(e,t)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Mn{constructor(e,t,n){this.pairs=e,this.rowNumber=t,this.wasReversed=n}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(e){return this.checkEqualitity(this,e)}toString(){return"{ "+this.pairs+" }"}equals(e,t){return e instanceof Mn&&this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed}checkEqualitity(e,t){if(!e||!t)return;let n;return e.forEach((r,i)=>{t.forEach(s=>{r.getLeftChar().getValue()===s.getLeftChar().getValue()&&r.getRightChar().getValue()===s.getRightChar().getValue()&&r.getFinderPatter().getValue()===s.getFinderPatter().getValue()&&(n=!0)})}),n}}class F extends C{constructor(e){super(...arguments),this.pairs=new Array(F.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=!0===e}decodeRow(e,t,n){this.pairs.length=0,this.startFromEven=!1;try{return F.constructResult(this.decodeRow2pairs(e,t))}catch(r){this.verbose&&console.log(r)}return this.pairs.length=0,this.startFromEven=!0,F.constructResult(this.decodeRow2pairs(e,t))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(e,t){let r,n=!1;for(;!n;)try{this.pairs.push(this.retrieveNextPair(t,this.pairs,e))}catch(i){if(i instanceof S){if(!this.pairs.length)throw new S;n=!0}}if(this.checkChecksum())return this.pairs;if(r=!!this.rows.length,this.storeRow(e,!1),r){let i=this.checkRowsBoolean(!1);if(null!=i||(i=this.checkRowsBoolean(!0),null!=i))return i}throw new S}checkRowsBoolean(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());let t=null;try{t=this.checkRows(new Array,0)}catch(n){this.verbose&&console.log(n)}return e&&(this.rows=this.rows.reverse()),t}checkRows(e,t){for(let n=t;n<this.rows.length;n++){let r=this.rows[n];this.pairs.length=0;for(let s of e)this.pairs.push(s.getPairs());if(this.pairs.push(r.getPairs()),!F.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let i=new Array(e);i.push(r);try{return this.checkRows(i,n+1)}catch(s){this.verbose&&console.log(s)}}throw new S}static isValidSequence(e){for(let t of F.FINDER_PATTERN_SEQUENCES){if(e.length>t.length)continue;let n=!0;for(let r=0;r<e.length;r++)if(e[r].getFinderPattern().getValue()!=t[r]){n=!1;break}if(n)return!0}return!1}storeRow(e,t){let n=0,r=!1,i=!1;for(;n<this.rows.length;){let s=this.rows[n];if(s.getRowNumber()>e){i=s.isEquivalent(this.pairs);break}r=s.isEquivalent(this.pairs),n++}i||r||F.isPartialRow(this.pairs,this.rows)||(this.rows.push(n,new Mn(this.pairs,e,t)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(e,t){for(let n of t)if(n.getPairs().length!==e.length)for(let r of n.getPairs())for(let i of e)if(Kt.equals(r,i))break}static isPartialRow(e,t){for(let n of t){let r=!0;for(let i of e){let s=!1;for(let o of n.getPairs())if(i.equals(o)){s=!0;break}if(!s){r=!1;break}}if(r)return!0}return!1}getRows(){return this.rows}static constructResult(e){let r=jn(P.buildBitArray(e)).parseInformation(),i=e[0].getFinderPattern().getResultPoints(),s=e[e.length-1].getFinderPattern().getResultPoints();return new ge(r,null,null,[i[0],i[1],s[0],s[1]],K.RSS_EXPANDED,null)}checkChecksum(){let e=this.pairs.get(0),t=e.getLeftChar(),n=e.getRightChar();if(null==n)return!1;let r=n.getChecksumPortion(),i=2;for(let o=1;o<this.pairs.size();++o){let a=this.pairs.get(o);r+=a.getLeftChar().getChecksumPortion(),i++;let c=a.getRightChar();null!=c&&(r+=c.getChecksumPortion(),i++)}return r%=211,211*(i-4)+r==t.getValue()}static getNextSecondBar(e,t){let n;return e.get(t)?(n=e.getNextUnset(t),n=e.getNextSet(n)):(n=e.getNextSet(t),n=e.getNextUnset(n)),n}retrieveNextPair(e,t,n){let r=t.length%2==0;this.startFromEven&&(r=!r);let i,s=!0,o=-1;do{this.findNextPair(e,t,o),i=this.parseFoundFinderPattern(e,n,r),null==i?o=F.getNextSecondBar(e,this.startEnd[0]):s=!1}while(s);let c,a=this.decodeDataCharacter(e,i,r,!0);if(!this.isEmptyPair(t)&&t[t.length-1].mustBeLast())throw new S;try{c=this.decodeDataCharacter(e,i,r,!1)}catch(u){c=null,this.verbose&&console.log(u)}return new Kt(a,c,i,!0)}isEmptyPair(e){return 0===e.length}findNextPair(e,t,n){let r=this.getDecodeFinderCounters();r[0]=0,r[1]=0,r[2]=0,r[3]=0;let s,i=e.getSize();s=n>=0?n:this.isEmptyPair(t)?0:t[t.length-1].getFinderPattern().getStartEnd()[1];let o=t.length%2!=0;this.startFromEven&&(o=!o);let a=!1;for(;s<i&&(a=!e.get(s),a);)s++;let c=0,u=s;for(let g=s;g<i;g++)if(e.get(g)!=a)r[c]++;else{if(3==c){if(o&&F.reverseCounters(r),F.isFinderPattern(r))return this.startEnd[0]=u,void(this.startEnd[1]=g);o&&F.reverseCounters(r),u+=r[0]+r[1],r[0]=r[2],r[1]=r[3],r[2]=0,r[3]=0,c--}else c++;r[c]=1,a=!a}throw new S}static reverseCounters(e){let t=e.length;for(let n=0;n<t/2;++n){let r=e[n];e[n]=e[t-n-1],e[t-n-1]=r}}parseFoundFinderPattern(e,t,n){let r,i,s;if(n){let c=this.startEnd[0]-1;for(;c>=0&&!e.get(c);)c--;c++,r=this.startEnd[0]-c,i=c,s=this.startEnd[1]}else i=this.startEnd[0],s=e.getNextUnset(this.startEnd[1]+1),r=s-this.startEnd[1];let a,o=this.getDecodeFinderCounters();Ee.arraycopy(o,0,o,1,o.length-1),o[0]=r;try{a=this.parseFinderValue(o,F.FINDER_PATTERNS)}catch{return null}return new T(a,[i,s],i,s,t)}decodeDataCharacter(e,t,n,r){let i=this.getDataCharacterCounters();for(let Pe=0;Pe<i.length;Pe++)i[Pe]=0;if(r)F.recordPatternInReverse(e,t.getStartEnd()[0],i);else{F.recordPattern(e,t.getStartEnd()[1],i);for(let Pe=0,ht=i.length-1;Pe<ht;Pe++,ht--){let bt=i[Pe];i[Pe]=i[ht],i[ht]=bt}}let o=J.sum(new Int32Array(i))/17,a=(t.getStartEnd()[1]-t.getStartEnd()[0])/15;if(Math.abs(o-a)/a>.3)throw new S;let c=this.getOddCounts(),u=this.getEvenCounts(),g=this.getOddRoundingErrors(),A=this.getEvenRoundingErrors();for(let Pe=0;Pe<i.length;Pe++){let ht=1*i[Pe]/o,bt=ht+.5;if(bt<1){if(ht<.3)throw new S;bt=1}else if(bt>8){if(ht>8.7)throw new S;bt=8}let cn=Pe/2;1&Pe?(u[cn]=bt,A[cn]=ht-bt):(c[cn]=bt,g[cn]=ht-bt)}this.adjustOddEvenCounts(17);let p=4*t.getValue()+(n?0:2)+(r?0:1)-1,I=0,y=0;for(let Pe=c.length-1;Pe>=0;Pe--)F.isNotA1left(t,n,r)&&(y+=c[Pe]*F.WEIGHTS[p][2*Pe]),I+=c[Pe];let b=0;for(let Pe=u.length-1;Pe>=0;Pe--)F.isNotA1left(t,n,r)&&(b+=u[Pe]*F.WEIGHTS[p][2*Pe+1]);let M=y+b;if(1&I||I>13||I<4)throw new S;let U=(13-I)/2,Y=F.SYMBOL_WIDEST[U],L=9-Y,Ce=_.getRSSvalue(c,Y,!0),fe=_.getRSSvalue(u,L,!1);return new x(Ce*F.EVEN_TOTAL_SUBSET[U]+fe+F.GSUM[U],M)}static isNotA1left(e,t,n){return!(0==e.getValue()&&t&&n)}adjustOddEvenCounts(e){let t=J.sum(new Int32Array(this.getOddCounts())),n=J.sum(new Int32Array(this.getEvenCounts())),r=!1,i=!1;t>13?i=!0:t<4&&(r=!0);let s=!1,o=!1;n>13?o=!0:n<4&&(s=!0);let a=t+n-e,c=!(1&~t),u=!(1&n);if(1==a)if(c){if(u)throw new S;i=!0}else{if(!u)throw new S;o=!0}else if(-1==a)if(c){if(u)throw new S;r=!0}else{if(!u)throw new S;s=!0}else{if(0!=a)throw new S;if(c){if(!u)throw new S;t<n?(r=!0,o=!0):(i=!0,s=!0)}else if(u)throw new S}if(r){if(i)throw new S;F.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(i&&F.decrement(this.getOddCounts(),this.getOddRoundingErrors()),s){if(o)throw new S;F.increment(this.getEvenCounts(),this.getOddRoundingErrors())}o&&F.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}F.SYMBOL_WIDEST=[7,5,4,3,1],F.EVEN_TOTAL_SUBSET=[4,20,52,104,204],F.GSUM=[0,348,1388,2948,3988],F.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],F.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],F.FINDER_PAT_A=0,F.FINDER_PAT_B=1,F.FINDER_PAT_C=2,F.FINDER_PAT_D=3,F.FINDER_PAT_E=4,F.FINDER_PAT_F=5,F.FINDER_PATTERN_SEQUENCES=[[F.FINDER_PAT_A,F.FINDER_PAT_A],[F.FINDER_PAT_A,F.FINDER_PAT_B,F.FINDER_PAT_B],[F.FINDER_PAT_A,F.FINDER_PAT_C,F.FINDER_PAT_B,F.FINDER_PAT_D],[F.FINDER_PAT_A,F.FINDER_PAT_E,F.FINDER_PAT_B,F.FINDER_PAT_D,F.FINDER_PAT_C],[F.FINDER_PAT_A,F.FINDER_PAT_E,F.FINDER_PAT_B,F.FINDER_PAT_D,F.FINDER_PAT_D,F.FINDER_PAT_F],[F.FINDER_PAT_A,F.FINDER_PAT_E,F.FINDER_PAT_B,F.FINDER_PAT_D,F.FINDER_PAT_E,F.FINDER_PAT_F,F.FINDER_PAT_F],[F.FINDER_PAT_A,F.FINDER_PAT_A,F.FINDER_PAT_B,F.FINDER_PAT_B,F.FINDER_PAT_C,F.FINDER_PAT_C,F.FINDER_PAT_D,F.FINDER_PAT_D],[F.FINDER_PAT_A,F.FINDER_PAT_A,F.FINDER_PAT_B,F.FINDER_PAT_B,F.FINDER_PAT_C,F.FINDER_PAT_C,F.FINDER_PAT_D,F.FINDER_PAT_E,F.FINDER_PAT_E],[F.FINDER_PAT_A,F.FINDER_PAT_A,F.FINDER_PAT_B,F.FINDER_PAT_B,F.FINDER_PAT_C,F.FINDER_PAT_C,F.FINDER_PAT_D,F.FINDER_PAT_E,F.FINDER_PAT_F,F.FINDER_PAT_F],[F.FINDER_PAT_A,F.FINDER_PAT_A,F.FINDER_PAT_B,F.FINDER_PAT_B,F.FINDER_PAT_C,F.FINDER_PAT_D,F.FINDER_PAT_D,F.FINDER_PAT_E,F.FINDER_PAT_E,F.FINDER_PAT_F,F.FINDER_PAT_F]],F.MAX_PAIRS=11;class lr extends x{constructor(e,t,n){super(e,t),this.count=0,this.finderPattern=n}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Qe extends C{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(e,t,n){const r=this.decodePair(t,!1,e,n);Qe.addOrTally(this.possibleLeftPairs,r),t.reverse();let i=this.decodePair(t,!0,e,n);Qe.addOrTally(this.possibleRightPairs,i),t.reverse();for(let s of this.possibleLeftPairs)if(s.getCount()>1)for(let o of this.possibleRightPairs)if(o.getCount()>1&&Qe.checkChecksum(s,o))return Qe.constructResult(s,o);throw new S}static addOrTally(e,t){if(null==t)return;let n=!1;for(let r of e)if(r.getValue()===t.getValue()){r.incrementCount(),n=!0;break}n||e.push(t)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(e,t){let n=4537077*e.getValue()+t.getValue(),r=new String(n).toString(),i=new Ie;for(let c=13-r.length;c>0;c--)i.append("0");i.append(r);let s=0;for(let c=0;c<13;c++){let u=i.charAt(c).charCodeAt(0)-48;s+=1&c?u:3*u}s=10-s%10,10===s&&(s=0),i.append(s.toString());let o=e.getFinderPattern().getResultPoints(),a=t.getFinderPattern().getResultPoints();return new ge(i.toString(),null,0,[o[0],o[1],a[0],a[1]],K.RSS_14,(new Date).getTime())}static checkChecksum(e,t){let n=(e.getChecksumPortion()+16*t.getChecksumPortion())%79,r=9*e.getFinderPattern().getValue()+t.getFinderPattern().getValue();return r>72&&r--,r>8&&r--,n===r}decodePair(e,t,n,r){try{let i=this.findFinderPattern(e,t),s=this.parseFoundFinderPattern(e,n,t,i),o=null==r?null:r.get(se.NEED_RESULT_POINT_CALLBACK);if(null!=o){let u=(i[0]+i[1])/2;t&&(u=e.getSize()-1-u),o.foundPossibleResultPoint(new X(u,n))}let a=this.decodeDataCharacter(e,s,!0),c=this.decodeDataCharacter(e,s,!1);return new lr(1597*a.getValue()+c.getValue(),a.getChecksumPortion()+4*c.getChecksumPortion(),s)}catch{return null}}decodeDataCharacter(e,t,n){let r=this.getDataCharacterCounters();for(let b=0;b<r.length;b++)r[b]=0;if(n)Te.recordPatternInReverse(e,t.getStartEnd()[0],r);else{Te.recordPattern(e,t.getStartEnd()[1]+1,r);for(let b=0,M=r.length-1;b<M;b++,M--){let U=r[b];r[b]=r[M],r[M]=U}}let i=n?16:15,s=J.sum(new Int32Array(r))/i,o=this.getOddCounts(),a=this.getEvenCounts(),c=this.getOddRoundingErrors(),u=this.getEvenRoundingErrors();for(let b=0;b<r.length;b++){let M=r[b]/s,U=Math.floor(M+.5);U<1?U=1:U>8&&(U=8);let Y=Math.floor(b/2);1&b?(a[Y]=U,u[Y]=M-U):(o[Y]=U,c[Y]=M-U)}this.adjustOddEvenCounts(n,i);let g=0,A=0;for(let b=o.length-1;b>=0;b--)A*=9,A+=o[b],g+=o[b];let p=0,I=0;for(let b=a.length-1;b>=0;b--)p*=9,p+=a[b],I+=a[b];let y=A+3*p;if(n){if(1&g||g>12||g<4)throw new S;let b=(12-g)/2,M=Qe.OUTSIDE_ODD_WIDEST[b],U=9-M,Y=_.getRSSvalue(o,M,!1),L=_.getRSSvalue(a,U,!0);return new x(Y*Qe.OUTSIDE_EVEN_TOTAL_SUBSET[b]+L+Qe.OUTSIDE_GSUM[b],y)}{if(1&I||I>10||I<4)throw new S;let b=(10-I)/2,M=Qe.INSIDE_ODD_WIDEST[b],U=9-M,Y=_.getRSSvalue(o,M,!0),L=_.getRSSvalue(a,U,!1);return new x(L*Qe.INSIDE_ODD_TOTAL_SUBSET[b]+Y+Qe.INSIDE_GSUM[b],y)}}findFinderPattern(e,t){let n=this.getDecodeFinderCounters();n[0]=0,n[1]=0,n[2]=0,n[3]=0;let r=e.getSize(),i=!1,s=0;for(;s<r&&(i=!e.get(s),t!==i);)s++;let o=0,a=s;for(let c=s;c<r;c++)if(e.get(c)!==i)n[o]++;else{if(3===o){if(C.isFinderPattern(n))return[a,c];a+=n[0]+n[1],n[0]=n[2],n[1]=n[3],n[2]=0,n[3]=0,o--}else o++;n[o]=1,i=!i}throw new S}parseFoundFinderPattern(e,t,n,r){let i=e.get(r[0]),s=r[0]-1;for(;s>=0&&i!==e.get(s);)s--;s++;const o=r[0]-s,a=this.getDecodeFinderCounters(),c=new Int32Array(a.length);Ee.arraycopy(a,0,c,1,a.length-1),c[0]=o;const u=this.parseFinderValue(c,Qe.FINDER_PATTERNS);let g=s,A=r[1];return n&&(g=e.getSize()-1-g,A=e.getSize()-1-A),new T(u,[s,r[1]],g,A,t)}adjustOddEvenCounts(e,t){let n=J.sum(new Int32Array(this.getOddCounts())),r=J.sum(new Int32Array(this.getEvenCounts())),i=!1,s=!1,o=!1,a=!1;e?(n>12?s=!0:n<4&&(i=!0),r>12?a=!0:r<4&&(o=!0)):(n>11?s=!0:n<5&&(i=!0),r>10?a=!0:r<4&&(o=!0));let c=n+r-t,u=(1&n)==(e?1:0),g=!(1&~r);if(1===c)if(u){if(g)throw new S;s=!0}else{if(!g)throw new S;a=!0}else if(-1===c)if(u){if(g)throw new S;i=!0}else{if(!g)throw new S;o=!0}else{if(0!==c)throw new S;if(u){if(!g)throw new S;n<r?(i=!0,a=!0):(s=!0,o=!0)}else if(g)throw new S}if(i){if(s)throw new S;C.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&C.decrement(this.getOddCounts(),this.getOddRoundingErrors()),o){if(a)throw new S;C.increment(this.getEvenCounts(),this.getOddRoundingErrors())}a&&C.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Qe.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Qe.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Qe.OUTSIDE_GSUM=[0,161,961,2015,2715],Qe.INSIDE_GSUM=[0,336,1036,1516],Qe.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Qe.INSIDE_ODD_WIDEST=[2,4,6,8],Qe.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class sn extends Te{constructor(e,t){super(),this.readers=[],this.verbose=!0===t;const n=e?e.get(se.POSSIBLE_FORMATS):null,r=e&&void 0!==e.get(se.ASSUME_CODE_39_CHECK_DIGIT);n?((n.includes(K.EAN_13)||n.includes(K.UPC_A)||n.includes(K.EAN_8)||n.includes(K.UPC_E))&&this.readers.push(new w(e)),n.includes(K.CODE_39)&&this.readers.push(new Ct(r)),n.includes(K.CODE_128)&&this.readers.push(new V),n.includes(K.ITF)&&this.readers.push(new xe),n.includes(K.RSS_14)&&this.readers.push(new Qe),n.includes(K.RSS_EXPANDED)&&this.readers.push(new F(this.verbose))):(this.readers.push(new w(e)),this.readers.push(new Ct),this.readers.push(new w(e)),this.readers.push(new V),this.readers.push(new xe),this.readers.push(new Qe),this.readers.push(new F(this.verbose)))}decodeRow(e,t,n){for(let r=0;r<this.readers.length;r++)try{return this.readers[r].decodeRow(e,t,n)}catch{}throw new S}reset(){this.readers.forEach(e=>e.reset())}}class ve{constructor(e,t,n){this.ecCodewords=e,this.ecBlocks=[t],n&&this.ecBlocks.push(n)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class De{constructor(e,t){this.count=e,this.dataCodewords=t}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ye{constructor(e,t,n,r,i,s){this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=n,this.dataRegionSizeRows=r,this.dataRegionSizeColumns=i,this.ecBlocks=s;let o=0;const a=s.getECCodewords(),c=s.getECBlocks();for(let u of c)o+=u.getCount()*(u.getDataCodewords()+a);this.totalCodewords=o}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(e,t){if(1&e||1&t)throw new H;for(let n of ye.VERSIONS)if(n.symbolSizeRows===e&&n.symbolSizeColumns===t)return n;throw new H}toString(){return""+this.versionNumber}static buildVersions(){return[new ye(1,10,10,8,8,new ve(5,new De(1,3))),new ye(2,12,12,10,10,new ve(7,new De(1,5))),new ye(3,14,14,12,12,new ve(10,new De(1,8))),new ye(4,16,16,14,14,new ve(12,new De(1,12))),new ye(5,18,18,16,16,new ve(14,new De(1,18))),new ye(6,20,20,18,18,new ve(18,new De(1,22))),new ye(7,22,22,20,20,new ve(20,new De(1,30))),new ye(8,24,24,22,22,new ve(24,new De(1,36))),new ye(9,26,26,24,24,new ve(28,new De(1,44))),new ye(10,32,32,14,14,new ve(36,new De(1,62))),new ye(11,36,36,16,16,new ve(42,new De(1,86))),new ye(12,40,40,18,18,new ve(48,new De(1,114))),new ye(13,44,44,20,20,new ve(56,new De(1,144))),new ye(14,48,48,22,22,new ve(68,new De(1,174))),new ye(15,52,52,24,24,new ve(42,new De(2,102))),new ye(16,64,64,14,14,new ve(56,new De(2,140))),new ye(17,72,72,16,16,new ve(36,new De(4,92))),new ye(18,80,80,18,18,new ve(48,new De(4,114))),new ye(19,88,88,20,20,new ve(56,new De(4,144))),new ye(20,96,96,22,22,new ve(68,new De(4,174))),new ye(21,104,104,24,24,new ve(56,new De(6,136))),new ye(22,120,120,18,18,new ve(68,new De(6,175))),new ye(23,132,132,20,20,new ve(62,new De(8,163))),new ye(24,144,144,22,22,new ve(62,new De(8,156),new De(2,155))),new ye(25,8,18,6,16,new ve(7,new De(1,5))),new ye(26,8,32,6,14,new ve(11,new De(1,10))),new ye(27,12,26,10,24,new ve(14,new De(1,16))),new ye(28,12,36,10,16,new ve(18,new De(1,22))),new ye(29,16,36,14,16,new ve(24,new De(1,32))),new ye(30,16,48,14,22,new ve(28,new De(1,49)))]}}ye.VERSIONS=ye.buildVersions();class On{constructor(e){const t=e.getHeight();if(t<8||t>144||1&t)throw new H;this.version=On.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new Xe(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(e){const t=e.getHeight(),n=e.getWidth();return ye.getVersionForDimensions(t,n)}readCodewords(){const e=new Int8Array(this.version.getTotalCodewords());let t=0,n=4,r=0;const i=this.mappingBitMatrix.getHeight(),s=this.mappingBitMatrix.getWidth();let o=!1,a=!1,c=!1,u=!1;do{if(n!==i||0!==r||o)if(n===i-2&&0===r&&3&s&&!a)e[t++]=255&this.readCorner2(i,s),n-=2,r+=2,a=!0;else if(n!==i+4||2!==r||7&s||c)if(n!==i-2||0!==r||4!=(7&s)||u){do{n<i&&r>=0&&!this.readMappingMatrix.get(r,n)&&(e[t++]=255&this.readUtah(n,r,i,s)),n-=2,r+=2}while(n>=0&&r<s);n+=1,r+=3;do{n>=0&&r<s&&!this.readMappingMatrix.get(r,n)&&(e[t++]=255&this.readUtah(n,r,i,s)),n+=2,r-=2}while(n<i&&r>=0);n+=3,r+=1}else e[t++]=255&this.readCorner4(i,s),n-=2,r+=2,u=!0;else e[t++]=255&this.readCorner3(i,s),n-=2,r+=2,c=!0;else e[t++]=255&this.readCorner1(i,s),n-=2,r+=2,o=!0}while(n<i||r<s);if(t!==this.version.getTotalCodewords())throw new H;return e}readModule(e,t,n,r){return e<0&&(e+=n,t+=4-(n+4&7)),t<0&&(t+=r,e+=4-(r+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)}readUtah(e,t,n,r){let i=0;return this.readModule(e-2,t-2,n,r)&&(i|=1),i<<=1,this.readModule(e-2,t-1,n,r)&&(i|=1),i<<=1,this.readModule(e-1,t-2,n,r)&&(i|=1),i<<=1,this.readModule(e-1,t-1,n,r)&&(i|=1),i<<=1,this.readModule(e-1,t,n,r)&&(i|=1),i<<=1,this.readModule(e,t-2,n,r)&&(i|=1),i<<=1,this.readModule(e,t-1,n,r)&&(i|=1),i<<=1,this.readModule(e,t,n,r)&&(i|=1),i}readCorner1(e,t){let n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,1,e,t)&&(n|=1),n<<=1,this.readModule(e-1,2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n}readCorner2(e,t){let n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-4,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n}readCorner3(e,t){let n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-3,e,t)&&(n|=1),n<<=1,this.readModule(1,t-2,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n}readCorner4(e,t){let n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n}extractDataRegion(e){const t=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new Z("Dimension of bitMatrix must match the version size");const r=this.version.getDataRegionSizeRows(),i=this.version.getDataRegionSizeColumns(),s=t/r|0,o=n/i|0,u=new Xe(o*i,s*r);for(let g=0;g<s;++g){const A=g*r;for(let p=0;p<o;++p){const I=p*i;for(let y=0;y<r;++y){const b=g*(r+2)+1+y,M=A+y;for(let U=0;U<i;++U)e.get(p*(i+2)+1+U,b)&&u.set(I+U,M)}}}return u}}class _n{constructor(e,t){this.numDataCodewords=e,this.codewords=t}static getDataBlocks(e,t){const n=t.getECBlocks();let r=0;const i=n.getECBlocks();for(let y of i)r+=y.getCount();const s=new Array(r);let o=0;for(let y of i)for(let b=0;b<y.getCount();b++){const M=y.getDataCodewords(),U=n.getECCodewords()+M;s[o++]=new _n(M,new Uint8Array(U))}const c=s[0].codewords.length-n.getECCodewords(),u=c-1;let g=0;for(let y=0;y<u;y++)for(let b=0;b<o;b++)s[b].codewords[y]=e[g++];const A=24===t.getVersionNumber(),p=A?8:o;for(let y=0;y<p;y++)s[y].codewords[c-1]=e[g++];const I=s[0].codewords.length;for(let y=c;y<I;y++)for(let b=0;b<o;b++){const M=A?(b+8)%o:b;s[M].codewords[A&&M>7?y-1:y]=e[g++]}if(g!==e.length)throw new Z;return s}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Dn{constructor(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(e){if(e<1||e>32||e>this.available())throw new Z(""+e);let t=0,n=this.bitOffset,r=this.byteOffset;const i=this.bytes;if(n>0){const s=8-n,o=e<s?e:s,a=s-o;t=(i[r]&255>>8-o<<a)>>a,e-=o,n+=o,8===n&&(n=0,r++)}if(e>0){for(;e>=8;)t=t<<8|255&i[r],r++,e-=8;if(e>0){const s=8-e;t=t<<e|(i[r]&255>>s<<s)>>s,n+=e}}return this.bitOffset=n,this.byteOffset=r,t}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var st=function(l){return l[l.PAD_ENCODE=0]="PAD_ENCODE",l[l.ASCII_ENCODE=1]="ASCII_ENCODE",l[l.C40_ENCODE=2]="C40_ENCODE",l[l.TEXT_ENCODE=3]="TEXT_ENCODE",l[l.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",l[l.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",l[l.BASE256_ENCODE=6]="BASE256_ENCODE",l}(st||{});class qt{static decode(e){const t=new Dn(e),n=new Ie,r=new Ie,i=new Array;let s=st.ASCII_ENCODE;do{if(s===st.ASCII_ENCODE)s=this.decodeAsciiSegment(t,n,r);else{switch(s){case st.C40_ENCODE:this.decodeC40Segment(t,n);break;case st.TEXT_ENCODE:this.decodeTextSegment(t,n);break;case st.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,n);break;case st.EDIFACT_ENCODE:this.decodeEdifactSegment(t,n);break;case st.BASE256_ENCODE:this.decodeBase256Segment(t,n,i);break;default:throw new H}s=st.ASCII_ENCODE}}while(s!==st.PAD_ENCODE&&t.available()>0);return r.length()>0&&n.append(r.toString()),new zt(e,n.toString(),0===i.length?null:i,null)}static decodeAsciiSegment(e,t,n){let r=!1;do{let i=e.readBits(8);if(0===i)throw new H;if(i<=128)return r&&(i+=128),t.append(String.fromCharCode(i-1)),st.ASCII_ENCODE;if(129===i)return st.PAD_ENCODE;if(i<=229){const s=i-130;s<10&&t.append("0"),t.append(""+s)}else switch(i){case 230:return st.C40_ENCODE;case 231:return st.BASE256_ENCODE;case 232:t.append("\x1d");break;case 233:case 234:case 241:break;case 235:r=!0;break;case 236:t.append("[)>\x1e05\x1d"),n.insert(0,"\x1e\x04");break;case 237:t.append("[)>\x1e06\x1d"),n.insert(0,"\x1e\x04");break;case 238:return st.ANSIX12_ENCODE;case 239:return st.TEXT_ENCODE;case 240:return st.EDIFACT_ENCODE;default:if(254!==i||0!==e.available())throw new H}}while(e.available()>0);return st.ASCII_ENCODE}static decodeC40Segment(e,t){let n=!1;const r=[];let i=0;do{if(8===e.available())return;const s=e.readBits(8);if(254===s)return;this.parseTwoBytes(s,e.readBits(8),r);for(let o=0;o<3;o++){const a=r[o];switch(i){case 0:if(a<3)i=a+1;else{if(!(a<this.C40_BASIC_SET_CHARS.length))throw new H;{const c=this.C40_BASIC_SET_CHARS[a];n?(t.append(String.fromCharCode(c.charCodeAt(0)+128)),n=!1):t.append(c)}}break;case 1:n?(t.append(String.fromCharCode(a+128)),n=!1):t.append(String.fromCharCode(a)),i=0;break;case 2:if(a<this.C40_SHIFT2_SET_CHARS.length){const c=this.C40_SHIFT2_SET_CHARS[a];n?(t.append(String.fromCharCode(c.charCodeAt(0)+128)),n=!1):t.append(c)}else switch(a){case 27:t.append("\x1d");break;case 30:n=!0;break;default:throw new H}i=0;break;case 3:n?(t.append(String.fromCharCode(a+224)),n=!1):t.append(String.fromCharCode(a+96)),i=0;break;default:throw new H}}}while(e.available()>0)}static decodeTextSegment(e,t){let n=!1,r=[],i=0;do{if(8===e.available())return;const s=e.readBits(8);if(254===s)return;this.parseTwoBytes(s,e.readBits(8),r);for(let o=0;o<3;o++){const a=r[o];switch(i){case 0:if(a<3)i=a+1;else{if(!(a<this.TEXT_BASIC_SET_CHARS.length))throw new H;{const c=this.TEXT_BASIC_SET_CHARS[a];n?(t.append(String.fromCharCode(c.charCodeAt(0)+128)),n=!1):t.append(c)}}break;case 1:n?(t.append(String.fromCharCode(a+128)),n=!1):t.append(String.fromCharCode(a)),i=0;break;case 2:if(a<this.TEXT_SHIFT2_SET_CHARS.length){const c=this.TEXT_SHIFT2_SET_CHARS[a];n?(t.append(String.fromCharCode(c.charCodeAt(0)+128)),n=!1):t.append(c)}else switch(a){case 27:t.append("\x1d");break;case 30:n=!0;break;default:throw new H}i=0;break;case 3:if(!(a<this.TEXT_SHIFT3_SET_CHARS.length))throw new H;{const c=this.TEXT_SHIFT3_SET_CHARS[a];n?(t.append(String.fromCharCode(c.charCodeAt(0)+128)),n=!1):t.append(c),i=0}break;default:throw new H}}}while(e.available()>0)}static decodeAnsiX12Segment(e,t){const n=[];do{if(8===e.available())return;const r=e.readBits(8);if(254===r)return;this.parseTwoBytes(r,e.readBits(8),n);for(let i=0;i<3;i++){const s=n[i];switch(s){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(s<14)t.append(String.fromCharCode(s+44));else{if(!(s<40))throw new H;t.append(String.fromCharCode(s+51))}}}}while(e.available()>0)}static parseTwoBytes(e,t,n){let r=(e<<8)+t-1,i=Math.floor(r/1600);n[0]=i,r-=1600*i,i=Math.floor(r/40),n[1]=i,n[2]=r-40*i}static decodeEdifactSegment(e,t){do{if(e.available()<=16)return;for(let n=0;n<4;n++){let r=e.readBits(6);if(31===r){const i=8-e.getBitOffset();return void(8!==i&&e.readBits(i))}32&r||(r|=64),t.append(String.fromCharCode(r))}}while(e.available()>0)}static decodeBase256Segment(e,t,n){let r=1+e.getByteOffset();const i=this.unrandomize255State(e.readBits(8),r++);let s;if(s=0===i?e.available()/8|0:i<250?i:250*(i-249)+this.unrandomize255State(e.readBits(8),r++),s<0)throw new H;const o=new Uint8Array(s);for(let a=0;a<s;a++){if(e.available()<8)throw new H;o[a]=this.unrandomize255State(e.readBits(8),r++)}n.push(o);try{t.append(rt.decode(o,ne.ISO88591))}catch(a){throw new ot("Platform does not support required encoding: "+a.message)}}static unrandomize255State(e,t){const r=e-(149*t%255+1);return r>=0?r:r+256}}qt.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],qt.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],qt.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],qt.TEXT_SHIFT2_SET_CHARS=qt.C40_SHIFT2_SET_CHARS,qt.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~","\x7f"];class hr{constructor(){this.rsDecoder=new Rt(le.DATA_MATRIX_FIELD_256)}decode(e){const t=new On(e),n=t.getVersion(),r=t.readCodewords(),i=_n.getDataBlocks(r,n);let s=0;for(let c of i)s+=c.getNumDataCodewords();const o=new Uint8Array(s),a=i.length;for(let c=0;c<a;c++){const u=i[c],g=u.getCodewords(),A=u.getNumDataCodewords();this.correctErrors(g,A);for(let p=0;p<A;p++)o[p*a+c]=g[p]}return qt.decode(o)}correctErrors(e,t){const n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch{throw new ze}for(let r=0;r<t;r++)e[r]=n[r]}}class Ke{constructor(e){this.image=e,this.rectangleDetector=new Zt(this.image)}detect(){const e=this.rectangleDetector.detect();let t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new S;t=this.shiftToModuleCenter(t);const n=t[0],r=t[1],i=t[2],s=t[3];let o=this.transitionsBetween(n,s)+1,a=this.transitionsBetween(i,s)+1;!(1&~o)&&(o+=1),!(1&~a)&&(a+=1),4*o<7*a&&4*a<7*o&&(o=a=Math.max(o,a));let c=Ke.sampleGrid(this.image,n,r,i,s,o,a);return new St(c,[n,r,i,s])}static shiftPoint(e,t,n){let r=(t.getX()-e.getX())/(n+1),i=(t.getY()-e.getY())/(n+1);return new X(e.getX()+r,e.getY()+i)}static moveAway(e,t,n){let r=e.getX(),i=e.getY();return r<t?r-=1:r+=1,i<n?i-=1:i+=1,new X(r,i)}detectSolid1(e){let t=e[0],n=e[1],r=e[3],i=e[2],s=this.transitionsBetween(t,n),o=this.transitionsBetween(n,r),a=this.transitionsBetween(r,i),c=this.transitionsBetween(i,t),u=s,g=[i,t,n,r];return u>o&&(u=o,g[0]=t,g[1]=n,g[2]=r,g[3]=i),u>a&&(u=a,g[0]=n,g[1]=r,g[2]=i,g[3]=t),u>c&&(g[0]=r,g[1]=i,g[2]=t,g[3]=n),g}detectSolid2(e){let t=e[0],n=e[1],r=e[2],i=e[3],s=this.transitionsBetween(t,i),o=Ke.shiftPoint(n,r,4*(s+1)),a=Ke.shiftPoint(r,n,4*(s+1));return this.transitionsBetween(o,t)<this.transitionsBetween(a,i)?(e[0]=t,e[1]=n,e[2]=r,e[3]=i):(e[0]=n,e[1]=r,e[2]=i,e[3]=t),e}correctTopRight(e){let t=e[0],n=e[1],r=e[2],i=e[3],s=this.transitionsBetween(t,i),o=this.transitionsBetween(n,i),a=Ke.shiftPoint(t,n,4*(o+1)),c=Ke.shiftPoint(r,n,4*(s+1));s=this.transitionsBetween(a,i),o=this.transitionsBetween(c,i);let u=new X(i.getX()+(r.getX()-n.getX())/(s+1),i.getY()+(r.getY()-n.getY())/(s+1)),g=new X(i.getX()+(t.getX()-n.getX())/(o+1),i.getY()+(t.getY()-n.getY())/(o+1));return this.isValid(u)?this.isValid(g)?this.transitionsBetween(a,u)+this.transitionsBetween(c,u)>this.transitionsBetween(a,g)+this.transitionsBetween(c,g)?u:g:u:this.isValid(g)?g:null}shiftToModuleCenter(e){let t=e[0],n=e[1],r=e[2],i=e[3],s=this.transitionsBetween(t,i)+1,o=this.transitionsBetween(r,i)+1,a=Ke.shiftPoint(t,n,4*o),c=Ke.shiftPoint(r,n,4*s);s=this.transitionsBetween(a,i)+1,o=this.transitionsBetween(c,i)+1,!(1&~s)&&(s+=1),!(1&~o)&&(o+=1);let A,p,u=(t.getX()+n.getX()+r.getX()+i.getX())/4,g=(t.getY()+n.getY()+r.getY()+i.getY())/4;return t=Ke.moveAway(t,u,g),n=Ke.moveAway(n,u,g),r=Ke.moveAway(r,u,g),i=Ke.moveAway(i,u,g),a=Ke.shiftPoint(t,n,4*o),a=Ke.shiftPoint(a,i,4*s),A=Ke.shiftPoint(n,t,4*o),A=Ke.shiftPoint(A,r,4*s),c=Ke.shiftPoint(r,i,4*o),c=Ke.shiftPoint(c,n,4*s),p=Ke.shiftPoint(i,r,4*o),p=Ke.shiftPoint(p,t,4*s),[a,A,c,p]}isValid(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()}static sampleGrid(e,t,n,r,i,s,o){return At.getInstance().sampleGrid(e,s,o,.5,.5,s-.5,.5,s-.5,o-.5,.5,o-.5,t.getX(),t.getY(),i.getX(),i.getY(),r.getX(),r.getY(),n.getX(),n.getY())}transitionsBetween(e,t){let n=Math.trunc(e.getX()),r=Math.trunc(e.getY()),i=Math.trunc(t.getX()),s=Math.trunc(t.getY()),o=Math.abs(s-r)>Math.abs(i-n);if(o){let y=n;n=r,r=y,y=i,i=s,s=y}let a=Math.abs(i-n),c=Math.abs(s-r),u=-a/2,g=r<s?1:-1,A=n<i?1:-1,p=0,I=this.image.get(o?r:n,o?n:r);for(let y=n,b=r;y!==i;y+=A){let M=this.image.get(o?b:y,o?y:b);if(M!==I&&(p++,I=M),u+=c,u>0){if(b===s)break;b+=g,u-=a}}return p}}let pn=(()=>{class l{constructor(){this.decoder=new hr}decode(t,n=null){let r,i;if(null!=n&&n.has(se.PURE_BARCODE)){const u=l.extractPureBits(t.getBlackMatrix());r=this.decoder.decode(u),i=l.NO_POINTS}else{const u=new Ke(t.getBlackMatrix()).detect();r=this.decoder.decode(u.getBits()),i=u.getPoints()}const s=r.getRawBytes(),o=new ge(r.getText(),s,8*s.length,i,K.DATA_MATRIX,Ee.currentTimeMillis()),a=r.getByteSegments();null!=a&&o.putMetadata(he.BYTE_SEGMENTS,a);const c=r.getECLevel();return null!=c&&o.putMetadata(he.ERROR_CORRECTION_LEVEL,c),o}reset(){}static extractPureBits(t){const n=t.getTopLeftOnBit(),r=t.getBottomRightOnBit();if(null==n||null==r)throw new S;const i=this.moduleSize(n,t);let s=n[1],a=n[0];const u=(r[0]-a+1)/i,g=(r[1]-s+1)/i;if(u<=0||g<=0)throw new S;const A=i/2;s+=A,a+=A;const p=new Xe(u,g);for(let I=0;I<g;I++){const y=s+I*i;for(let b=0;b<u;b++)t.get(a+b*i,y)&&p.set(b,I)}return p}static moduleSize(t,n){const r=n.getWidth();let i=t[0];const s=t[1];for(;i<r&&n.get(i,s);)i++;if(i===r)throw new S;const o=i-t[0];if(0===o)throw new S;return o}}return l.NO_POINTS=[],l})();var fn=function(l){return l[l.L=0]="L",l[l.M=1]="M",l[l.Q=2]="Q",l[l.H=3]="H",l}(fn||{});class He{constructor(e,t,n){this.value=e,this.stringValue=t,this.bits=n,He.FOR_BITS.set(n,this),He.FOR_VALUE.set(e,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(e){switch(e){case"L":return He.L;case"M":return He.M;case"Q":return He.Q;case"H":return He.H;default:throw new Ze(e+"not available")}}toString(){return this.stringValue}equals(e){return e instanceof He&&this.value===e.value}static forBits(e){if(e<0||e>=He.FOR_BITS.size)throw new Z;return He.FOR_BITS.get(e)}}He.FOR_BITS=new Map,He.FOR_VALUE=new Map,He.L=new He(fn.L,"L",1),He.M=new He(fn.M,"M",0),He.Q=new He(fn.Q,"Q",3),He.H=new He(fn.H,"H",2);class dt{constructor(e){this.errorCorrectionLevel=He.forBits(e>>3&3),this.dataMask=7&e}static numBitsDiffering(e,t){return ae.bitCount(e^t)}static decodeFormatInformation(e,t){const n=dt.doDecodeFormatInformation(e,t);return null!==n?n:dt.doDecodeFormatInformation(e^dt.FORMAT_INFO_MASK_QR,t^dt.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(e,t){let n=Number.MAX_SAFE_INTEGER,r=0;for(const i of dt.FORMAT_INFO_DECODE_LOOKUP){const s=i[0];if(s===e||s===t)return new dt(i[1]);let o=dt.numBitsDiffering(e,s);o<n&&(r=i[1],n=o),e!==t&&(o=dt.numBitsDiffering(t,s),o<n&&(r=i[1],n=o))}return n<=3?new dt(r):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(e){return e instanceof dt&&this.errorCorrectionLevel===e.errorCorrectionLevel&&this.dataMask===e.dataMask}}dt.FORMAT_INFO_MASK_QR=21522,dt.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class N{constructor(e,...t){this.ecCodewordsPerBlock=e,this.ecBlocks=t}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let e=0;const t=this.ecBlocks;for(const n of t)e+=n.getCount();return e}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class m{constructor(e,t){this.count=e,this.dataCodewords=t}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ${constructor(e,t,...n){this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=n;let r=0;const i=n[0].getECCodewordsPerBlock(),s=n[0].getECBlocks();for(const o of s)r+=o.getCount()*(o.getDataCodewords()+i);this.totalCodewords=r}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(e){return this.ecBlocks[e.getValue()]}static getProvisionalVersionForDimension(e){if(e%4!=1)throw new H;try{return this.getVersionForNumber((e-17)/4)}catch{throw new H}}static getVersionForNumber(e){if(e<1||e>40)throw new Z;return $.VERSIONS[e-1]}static decodeVersionInformation(e){let t=Number.MAX_SAFE_INTEGER,n=0;for(let r=0;r<$.VERSION_DECODE_INFO.length;r++){const i=$.VERSION_DECODE_INFO[r];if(i===e)return $.getVersionForNumber(r+7);const s=dt.numBitsDiffering(e,i);s<t&&(n=r+7,t=s)}return t<=3?$.getVersionForNumber(n):null}buildFunctionPattern(){const e=this.getDimensionForVersion(),t=new Xe(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);const n=this.alignmentPatternCenters.length;for(let r=0;r<n;r++){const i=this.alignmentPatternCenters[r]-2;for(let s=0;s<n;s++)0===r&&(0===s||s===n-1)||r===n-1&&0===s||t.setRegion(this.alignmentPatternCenters[s]-2,i,5,5)}return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t}toString(){return""+this.versionNumber}}$.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),$.VERSIONS=[new $(1,new Int32Array(0),new N(7,new m(1,19)),new N(10,new m(1,16)),new N(13,new m(1,13)),new N(17,new m(1,9))),new $(2,Int32Array.from([6,18]),new N(10,new m(1,34)),new N(16,new m(1,28)),new N(22,new m(1,22)),new N(28,new m(1,16))),new $(3,Int32Array.from([6,22]),new N(15,new m(1,55)),new N(26,new m(1,44)),new N(18,new m(2,17)),new N(22,new m(2,13))),new $(4,Int32Array.from([6,26]),new N(20,new m(1,80)),new N(18,new m(2,32)),new N(26,new m(2,24)),new N(16,new m(4,9))),new $(5,Int32Array.from([6,30]),new N(26,new m(1,108)),new N(24,new m(2,43)),new N(18,new m(2,15),new m(2,16)),new N(22,new m(2,11),new m(2,12))),new $(6,Int32Array.from([6,34]),new N(18,new m(2,68)),new N(16,new m(4,27)),new N(24,new m(4,19)),new N(28,new m(4,15))),new $(7,Int32Array.from([6,22,38]),new N(20,new m(2,78)),new N(18,new m(4,31)),new N(18,new m(2,14),new m(4,15)),new N(26,new m(4,13),new m(1,14))),new $(8,Int32Array.from([6,24,42]),new N(24,new m(2,97)),new N(22,new m(2,38),new m(2,39)),new N(22,new m(4,18),new m(2,19)),new N(26,new m(4,14),new m(2,15))),new $(9,Int32Array.from([6,26,46]),new N(30,new m(2,116)),new N(22,new m(3,36),new m(2,37)),new N(20,new m(4,16),new m(4,17)),new N(24,new m(4,12),new m(4,13))),new $(10,Int32Array.from([6,28,50]),new N(18,new m(2,68),new m(2,69)),new N(26,new m(4,43),new m(1,44)),new N(24,new m(6,19),new m(2,20)),new N(28,new m(6,15),new m(2,16))),new $(11,Int32Array.from([6,30,54]),new N(20,new m(4,81)),new N(30,new m(1,50),new m(4,51)),new N(28,new m(4,22),new m(4,23)),new N(24,new m(3,12),new m(8,13))),new $(12,Int32Array.from([6,32,58]),new N(24,new m(2,92),new m(2,93)),new N(22,new m(6,36),new m(2,37)),new N(26,new m(4,20),new m(6,21)),new N(28,new m(7,14),new m(4,15))),new $(13,Int32Array.from([6,34,62]),new N(26,new m(4,107)),new N(22,new m(8,37),new m(1,38)),new N(24,new m(8,20),new m(4,21)),new N(22,new m(12,11),new m(4,12))),new $(14,Int32Array.from([6,26,46,66]),new N(30,new m(3,115),new m(1,116)),new N(24,new m(4,40),new m(5,41)),new N(20,new m(11,16),new m(5,17)),new N(24,new m(11,12),new m(5,13))),new $(15,Int32Array.from([6,26,48,70]),new N(22,new m(5,87),new m(1,88)),new N(24,new m(5,41),new m(5,42)),new N(30,new m(5,24),new m(7,25)),new N(24,new m(11,12),new m(7,13))),new $(16,Int32Array.from([6,26,50,74]),new N(24,new m(5,98),new m(1,99)),new N(28,new m(7,45),new m(3,46)),new N(24,new m(15,19),new m(2,20)),new N(30,new m(3,15),new m(13,16))),new $(17,Int32Array.from([6,30,54,78]),new N(28,new m(1,107),new m(5,108)),new N(28,new m(10,46),new m(1,47)),new N(28,new m(1,22),new m(15,23)),new N(28,new m(2,14),new m(17,15))),new $(18,Int32Array.from([6,30,56,82]),new N(30,new m(5,120),new m(1,121)),new N(26,new m(9,43),new m(4,44)),new N(28,new m(17,22),new m(1,23)),new N(28,new m(2,14),new m(19,15))),new $(19,Int32Array.from([6,30,58,86]),new N(28,new m(3,113),new m(4,114)),new N(26,new m(3,44),new m(11,45)),new N(26,new m(17,21),new m(4,22)),new N(26,new m(9,13),new m(16,14))),new $(20,Int32Array.from([6,34,62,90]),new N(28,new m(3,107),new m(5,108)),new N(26,new m(3,41),new m(13,42)),new N(30,new m(15,24),new m(5,25)),new N(28,new m(15,15),new m(10,16))),new $(21,Int32Array.from([6,28,50,72,94]),new N(28,new m(4,116),new m(4,117)),new N(26,new m(17,42)),new N(28,new m(17,22),new m(6,23)),new N(30,new m(19,16),new m(6,17))),new $(22,Int32Array.from([6,26,50,74,98]),new N(28,new m(2,111),new m(7,112)),new N(28,new m(17,46)),new N(30,new m(7,24),new m(16,25)),new N(24,new m(34,13))),new $(23,Int32Array.from([6,30,54,78,102]),new N(30,new m(4,121),new m(5,122)),new N(28,new m(4,47),new m(14,48)),new N(30,new m(11,24),new m(14,25)),new N(30,new m(16,15),new m(14,16))),new $(24,Int32Array.from([6,28,54,80,106]),new N(30,new m(6,117),new m(4,118)),new N(28,new m(6,45),new m(14,46)),new N(30,new m(11,24),new m(16,25)),new N(30,new m(30,16),new m(2,17))),new $(25,Int32Array.from([6,32,58,84,110]),new N(26,new m(8,106),new m(4,107)),new N(28,new m(8,47),new m(13,48)),new N(30,new m(7,24),new m(22,25)),new N(30,new m(22,15),new m(13,16))),new $(26,Int32Array.from([6,30,58,86,114]),new N(28,new m(10,114),new m(2,115)),new N(28,new m(19,46),new m(4,47)),new N(28,new m(28,22),new m(6,23)),new N(30,new m(33,16),new m(4,17))),new $(27,Int32Array.from([6,34,62,90,118]),new N(30,new m(8,122),new m(4,123)),new N(28,new m(22,45),new m(3,46)),new N(30,new m(8,23),new m(26,24)),new N(30,new m(12,15),new m(28,16))),new $(28,Int32Array.from([6,26,50,74,98,122]),new N(30,new m(3,117),new m(10,118)),new N(28,new m(3,45),new m(23,46)),new N(30,new m(4,24),new m(31,25)),new N(30,new m(11,15),new m(31,16))),new $(29,Int32Array.from([6,30,54,78,102,126]),new N(30,new m(7,116),new m(7,117)),new N(28,new m(21,45),new m(7,46)),new N(30,new m(1,23),new m(37,24)),new N(30,new m(19,15),new m(26,16))),new $(30,Int32Array.from([6,26,52,78,104,130]),new N(30,new m(5,115),new m(10,116)),new N(28,new m(19,47),new m(10,48)),new N(30,new m(15,24),new m(25,25)),new N(30,new m(23,15),new m(25,16))),new $(31,Int32Array.from([6,30,56,82,108,134]),new N(30,new m(13,115),new m(3,116)),new N(28,new m(2,46),new m(29,47)),new N(30,new m(42,24),new m(1,25)),new N(30,new m(23,15),new m(28,16))),new $(32,Int32Array.from([6,34,60,86,112,138]),new N(30,new m(17,115)),new N(28,new m(10,46),new m(23,47)),new N(30,new m(10,24),new m(35,25)),new N(30,new m(19,15),new m(35,16))),new $(33,Int32Array.from([6,30,58,86,114,142]),new N(30,new m(17,115),new m(1,116)),new N(28,new m(14,46),new m(21,47)),new N(30,new m(29,24),new m(19,25)),new N(30,new m(11,15),new m(46,16))),new $(34,Int32Array.from([6,34,62,90,118,146]),new N(30,new m(13,115),new m(6,116)),new N(28,new m(14,46),new m(23,47)),new N(30,new m(44,24),new m(7,25)),new N(30,new m(59,16),new m(1,17))),new $(35,Int32Array.from([6,30,54,78,102,126,150]),new N(30,new m(12,121),new m(7,122)),new N(28,new m(12,47),new m(26,48)),new N(30,new m(39,24),new m(14,25)),new N(30,new m(22,15),new m(41,16))),new $(36,Int32Array.from([6,24,50,76,102,128,154]),new N(30,new m(6,121),new m(14,122)),new N(28,new m(6,47),new m(34,48)),new N(30,new m(46,24),new m(10,25)),new N(30,new m(2,15),new m(64,16))),new $(37,Int32Array.from([6,28,54,80,106,132,158]),new N(30,new m(17,122),new m(4,123)),new N(28,new m(29,46),new m(14,47)),new N(30,new m(49,24),new m(10,25)),new N(30,new m(24,15),new m(46,16))),new $(38,Int32Array.from([6,32,58,84,110,136,162]),new N(30,new m(4,122),new m(18,123)),new N(28,new m(13,46),new m(32,47)),new N(30,new m(48,24),new m(14,25)),new N(30,new m(42,15),new m(32,16))),new $(39,Int32Array.from([6,26,54,82,110,138,166]),new N(30,new m(20,117),new m(4,118)),new N(28,new m(40,47),new m(7,48)),new N(30,new m(43,24),new m(22,25)),new N(30,new m(10,15),new m(67,16))),new $(40,Int32Array.from([6,30,58,86,114,142,170]),new N(30,new m(19,118),new m(6,119)),new N(28,new m(18,47),new m(31,48)),new N(30,new m(34,24),new m(34,25)),new N(30,new m(20,15),new m(61,16)))];var ct=function(l){return l[l.DATA_MASK_000=0]="DATA_MASK_000",l[l.DATA_MASK_001=1]="DATA_MASK_001",l[l.DATA_MASK_010=2]="DATA_MASK_010",l[l.DATA_MASK_011=3]="DATA_MASK_011",l[l.DATA_MASK_100=4]="DATA_MASK_100",l[l.DATA_MASK_101=5]="DATA_MASK_101",l[l.DATA_MASK_110=6]="DATA_MASK_110",l[l.DATA_MASK_111=7]="DATA_MASK_111",l}(ct||{});class Ot{constructor(e,t){this.value=e,this.isMasked=t}unmaskBitMatrix(e,t){for(let n=0;n<t;n++)for(let r=0;r<t;r++)this.isMasked(n,r)&&e.flip(r,n)}}Ot.values=new Map([[ct.DATA_MASK_000,new Ot(ct.DATA_MASK_000,(l,e)=>!(l+e&1))],[ct.DATA_MASK_001,new Ot(ct.DATA_MASK_001,(l,e)=>!(1&l))],[ct.DATA_MASK_010,new Ot(ct.DATA_MASK_010,(l,e)=>e%3==0)],[ct.DATA_MASK_011,new Ot(ct.DATA_MASK_011,(l,e)=>(l+e)%3==0)],[ct.DATA_MASK_100,new Ot(ct.DATA_MASK_100,(l,e)=>!(Math.floor(l/2)+Math.floor(e/3)&1))],[ct.DATA_MASK_101,new Ot(ct.DATA_MASK_101,(l,e)=>l*e%6==0)],[ct.DATA_MASK_110,new Ot(ct.DATA_MASK_110,(l,e)=>l*e%6<3)],[ct.DATA_MASK_111,new Ot(ct.DATA_MASK_111,(l,e)=>!(l+e+l*e%3&1))]]);class dr{constructor(e){const t=e.getHeight();if(t<21||1!=(3&t))throw new H;this.bitMatrix=e}readFormatInformation(){if(null!=this.parsedFormatInfo)return this.parsedFormatInfo;let e=0;for(let i=0;i<6;i++)e=this.copyBit(i,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(let i=5;i>=0;i--)e=this.copyBit(8,i,e);const t=this.bitMatrix.getHeight();let n=0;const r=t-7;for(let i=t-1;i>=r;i--)n=this.copyBit(8,i,n);for(let i=t-8;i<t;i++)n=this.copyBit(i,8,n);if(this.parsedFormatInfo=dt.decodeFormatInformation(e,n),null!==this.parsedFormatInfo)return this.parsedFormatInfo;throw new H}readVersion(){if(null!=this.parsedVersion)return this.parsedVersion;const e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return $.getVersionForNumber(t);let n=0;const r=e-11;for(let s=5;s>=0;s--)for(let o=e-9;o>=r;o--)n=this.copyBit(o,s,n);let i=$.decodeVersionInformation(n);if(null!==i&&i.getDimensionForVersion()===e)return this.parsedVersion=i,i;n=0;for(let s=5;s>=0;s--)for(let o=e-9;o>=r;o--)n=this.copyBit(s,o,n);if(i=$.decodeVersionInformation(n),null!==i&&i.getDimensionForVersion()===e)return this.parsedVersion=i,i;throw new H}copyBit(e,t,n){return(this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t))?n<<1|1:n<<1}readCodewords(){const e=this.readFormatInformation(),t=this.readVersion(),n=Ot.values.get(e.getDataMask()),r=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,r);const i=t.buildFunctionPattern();let s=!0;const o=new Uint8Array(t.getTotalCodewords());let a=0,c=0,u=0;for(let g=r-1;g>0;g-=2){6===g&&g--;for(let A=0;A<r;A++){const p=s?r-1-A:A;for(let I=0;I<2;I++)i.get(g-I,p)||(u++,c<<=1,this.bitMatrix.get(g-I,p)&&(c|=1),8===u&&(o[a++]=c,u=0,c=0))}s=!s}if(a!==t.getTotalCodewords())throw new H;return o}remask(){if(null===this.parsedFormatInfo)return;const e=Ot.values[this.parsedFormatInfo.getDataMask()],t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}setMirror(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e}mirror(){const e=this.bitMatrix;for(let t=0,n=e.getWidth();t<n;t++)for(let r=t+1,i=e.getHeight();r<i;r++)e.get(t,r)!==e.get(r,t)&&(e.flip(r,t),e.flip(t,r))}}class Rn{constructor(e,t){this.numDataCodewords=e,this.codewords=t}static getDataBlocks(e,t,n){if(e.length!==t.getTotalCodewords())throw new Z;const r=t.getECBlocksForLevel(n);let i=0;const s=r.getECBlocks();for(const I of s)i+=I.getCount();const o=new Array(i);let a=0;for(const I of s)for(let y=0;y<I.getCount();y++){const b=I.getDataCodewords(),M=r.getECCodewordsPerBlock()+b;o[a++]=new Rn(b,new Uint8Array(M))}const c=o[0].codewords.length;let u=o.length-1;for(;u>=0&&o[u].codewords.length!==c;)u--;u++;const g=c-r.getECCodewordsPerBlock();let A=0;for(let I=0;I<g;I++)for(let y=0;y<a;y++)o[y].codewords[I]=e[A++];for(let I=u;I<a;I++)o[I].codewords[g]=e[A++];const p=o[0].codewords.length;for(let I=g;I<p;I++)for(let y=0;y<a;y++)o[y].codewords[y<u?I:I+1]=e[A++];return o}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Bt=function(l){return l[l.TERMINATOR=0]="TERMINATOR",l[l.NUMERIC=1]="NUMERIC",l[l.ALPHANUMERIC=2]="ALPHANUMERIC",l[l.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",l[l.BYTE=4]="BYTE",l[l.ECI=5]="ECI",l[l.KANJI=6]="KANJI",l[l.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",l[l.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",l[l.HANZI=9]="HANZI",l}(Bt||{});class te{constructor(e,t,n,r){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=n,this.bits=r,te.FOR_BITS.set(r,this),te.FOR_VALUE.set(e,this)}static forBits(e){const t=te.FOR_BITS.get(e);if(void 0===t)throw new Z;return t}getCharacterCountBits(e){const t=e.getVersionNumber();let n;return n=t<=9?0:t<=26?1:2,this.characterCountBitsForVersions[n]}getValue(){return this.value}getBits(){return this.bits}equals(e){return e instanceof te&&this.value===e.value}toString(){return this.stringValue}}te.FOR_BITS=new Map,te.FOR_VALUE=new Map,te.TERMINATOR=new te(Bt.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),te.NUMERIC=new te(Bt.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),te.ALPHANUMERIC=new te(Bt.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),te.STRUCTURED_APPEND=new te(Bt.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),te.BYTE=new te(Bt.BYTE,"BYTE",Int32Array.from([8,16,16]),4),te.ECI=new te(Bt.ECI,"ECI",Int32Array.from([0,0,0]),7),te.KANJI=new te(Bt.KANJI,"KANJI",Int32Array.from([8,10,12]),8),te.FNC1_FIRST_POSITION=new te(Bt.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),te.FNC1_SECOND_POSITION=new te(Bt.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),te.HANZI=new te(Bt.HANZI,"HANZI",Int32Array.from([8,10,12]),13);let Gn=(()=>{class l{static decode(t,n,r,i){const s=new Dn(t);let o=new Ie;const a=new Array;let c=-1,u=-1;try{let p,g=null,A=!1;do{if(s.available()<4)p=te.TERMINATOR;else{const I=s.readBits(4);p=te.forBits(I)}switch(p){case te.TERMINATOR:break;case te.FNC1_FIRST_POSITION:case te.FNC1_SECOND_POSITION:A=!0;break;case te.STRUCTURED_APPEND:if(s.available()<16)throw new H;c=s.readBits(8),u=s.readBits(8);break;case te.ECI:const I=l.parseECIValue(s);if(g=z.getCharacterSetECIByValue(I),null===g)throw new H;break;case te.HANZI:const y=s.readBits(4),b=s.readBits(p.getCharacterCountBits(n));y===l.GB2312_SUBSET&&l.decodeHanziSegment(s,o,b);break;default:const M=s.readBits(p.getCharacterCountBits(n));switch(p){case te.NUMERIC:l.decodeNumericSegment(s,o,M);break;case te.ALPHANUMERIC:l.decodeAlphanumericSegment(s,o,M,A);break;case te.BYTE:l.decodeByteSegment(s,o,M,g,a,i);break;case te.KANJI:l.decodeKanjiSegment(s,o,M);break;default:throw new H}}}while(p!==te.TERMINATOR)}catch{throw new H}return new zt(t,o.toString(),0===a.length?null:a,null===r?null:r.toString(),c,u)}static decodeHanziSegment(t,n,r){if(13*r>t.available())throw new H;const i=new Uint8Array(2*r);let s=0;for(;r>0;){const o=t.readBits(13);let a=o/96<<8&4294967295|o%96;a+=a<959?41377:42657,i[s]=a>>8&255,i[s+1]=255&a,s+=2,r--}try{n.append(rt.decode(i,ne.GB2312))}catch(o){throw new H(o)}}static decodeKanjiSegment(t,n,r){if(13*r>t.available())throw new H;const i=new Uint8Array(2*r);let s=0;for(;r>0;){const o=t.readBits(13);let a=o/192<<8&4294967295|o%192;a+=a<7936?33088:49472,i[s]=a>>8,i[s+1]=a,s+=2,r--}try{n.append(rt.decode(i,ne.SHIFT_JIS))}catch(o){throw new H(o)}}static decodeByteSegment(t,n,r,i,s,o){if(8*r>t.available())throw new H;const a=new Uint8Array(r);for(let u=0;u<r;u++)a[u]=t.readBits(8);let c;c=null===i?ne.guessEncoding(a,o):i.getName();try{n.append(rt.decode(a,c))}catch(u){throw new H(u)}s.push(a)}static toAlphaNumericChar(t){if(t>=l.ALPHANUMERIC_CHARS.length)throw new H;return l.ALPHANUMERIC_CHARS[t]}static decodeAlphanumericSegment(t,n,r,i){const s=n.length();for(;r>1;){if(t.available()<11)throw new H;const o=t.readBits(11);n.append(l.toAlphaNumericChar(Math.floor(o/45))),n.append(l.toAlphaNumericChar(o%45)),r-=2}if(1===r){if(t.available()<6)throw new H;n.append(l.toAlphaNumericChar(t.readBits(6)))}if(i)for(let o=s;o<n.length();o++)"%"===n.charAt(o)&&(o<n.length()-1&&"%"===n.charAt(o+1)?n.deleteCharAt(o+1):n.setCharAt(o,"\x1d"))}static decodeNumericSegment(t,n,r){for(;r>=3;){if(t.available()<10)throw new H;const i=t.readBits(10);if(i>=1e3)throw new H;n.append(l.toAlphaNumericChar(Math.floor(i/100))),n.append(l.toAlphaNumericChar(Math.floor(i/10)%10)),n.append(l.toAlphaNumericChar(i%10)),r-=3}if(2===r){if(t.available()<7)throw new H;const i=t.readBits(7);if(i>=100)throw new H;n.append(l.toAlphaNumericChar(Math.floor(i/10))),n.append(l.toAlphaNumericChar(i%10))}else if(1===r){if(t.available()<4)throw new H;const i=t.readBits(4);if(i>=10)throw new H;n.append(l.toAlphaNumericChar(i))}}static parseECIValue(t){const n=t.readBits(8);if(!(128&n))return 127&n;if(128==(192&n))return(63&n)<<8&4294967295|t.readBits(8);if(192==(224&n))return(31&n)<<16&4294967295|t.readBits(16);throw new H}}return l.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",l.GB2312_SUBSET=1,l})();class Wn{constructor(e){this.mirrored=e}isMirrored(){return this.mirrored}applyMirroredCorrection(e){if(!this.mirrored||null===e||e.length<3)return;const t=e[0];e[0]=e[2],e[2]=t}}class gr{constructor(){this.rsDecoder=new Rt(le.QR_CODE_FIELD_256)}decodeBooleanArray(e,t){return this.decodeBitMatrix(Xe.parseFromBooleanArray(e),t)}decodeBitMatrix(e,t){const n=new dr(e);let r=null;try{return this.decodeBitMatrixParser(n,t)}catch(i){r=i}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();const i=this.decodeBitMatrixParser(n,t);return i.setOther(new Wn(!0)),i}catch(i){throw null!==r?r:i}}decodeBitMatrixParser(e,t){const n=e.readVersion(),r=e.readFormatInformation().getErrorCorrectionLevel(),i=e.readCodewords(),s=Rn.getDataBlocks(i,n,r);let o=0;for(const u of s)o+=u.getNumDataCodewords();const a=new Uint8Array(o);let c=0;for(const u of s){const g=u.getCodewords(),A=u.getNumDataCodewords();this.correctErrors(g,A);for(let p=0;p<A;p++)a[c++]=g[p]}return Gn.decode(a,n,r,t)}correctErrors(e,t){const n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch{throw new ze}for(let r=0;r<t;r++)e[r]=n[r]}}class vn extends X{constructor(e,t,n){super(e,t),this.estimatedModuleSize=n}aboutEquals(e,t,n){if(Math.abs(t-this.getY())<=e&&Math.abs(n-this.getX())<=e){const r=Math.abs(e-this.estimatedModuleSize);return r<=1||r<=this.estimatedModuleSize}return!1}combineEstimate(e,t,n){const r=(this.getX()+t)/2,i=(this.getY()+e)/2;return new vn(r,i,(this.estimatedModuleSize+n)/2)}}class In{constructor(e,t,n,r,i,s,o){this.image=e,this.startX=t,this.startY=n,this.width=r,this.height=i,this.moduleSize=s,this.resultPointCallback=o,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const e=this.startX,t=this.height,r=e+this.width,i=this.startY+t/2,s=new Int32Array(3),o=this.image;for(let a=0;a<t;a++){const c=i+(1&a?-Math.floor((a+1)/2):Math.floor((a+1)/2));s[0]=0,s[1]=0,s[2]=0;let u=e;for(;u<r&&!o.get(u,c);)u++;let g=0;for(;u<r;){if(o.get(u,c))if(1===g)s[1]++;else if(2===g){if(this.foundPatternCross(s)){const A=this.handlePossibleCenter(s,c,u);if(null!==A)return A}s[0]=s[2],s[1]=1,s[2]=0,g=1}else s[++g]++;else 1===g&&g++,s[g]++;u++}if(this.foundPatternCross(s)){const A=this.handlePossibleCenter(s,c,r);if(null!==A)return A}}if(0!==this.possibleCenters.length)return this.possibleCenters[0];throw new S}static centerFromEnd(e,t){return t-e[2]-e[1]/2}foundPatternCross(e){const t=this.moduleSize,n=t/2;for(let r=0;r<3;r++)if(Math.abs(t-e[r])>=n)return!1;return!0}crossCheckVertical(e,t,n,r){const i=this.image,s=i.getHeight(),o=this.crossCheckStateCount;o[0]=0,o[1]=0,o[2]=0;let a=e;for(;a>=0&&i.get(t,a)&&o[1]<=n;)o[1]++,a--;if(a<0||o[1]>n)return NaN;for(;a>=0&&!i.get(t,a)&&o[0]<=n;)o[0]++,a--;if(o[0]>n)return NaN;for(a=e+1;a<s&&i.get(t,a)&&o[1]<=n;)o[1]++,a++;if(a===s||o[1]>n)return NaN;for(;a<s&&!i.get(t,a)&&o[2]<=n;)o[2]++,a++;return o[2]>n||5*Math.abs(o[0]+o[1]+o[2]-r)>=2*r?NaN:this.foundPatternCross(o)?In.centerFromEnd(o,a):NaN}handlePossibleCenter(e,t,n){const r=e[0]+e[1]+e[2],i=In.centerFromEnd(e,n),s=this.crossCheckVertical(t,i,2*e[1],r);if(!isNaN(s)){const o=(e[0]+e[1]+e[2])/3;for(const c of this.possibleCenters)if(c.aboutEquals(o,s,i))return c.combineEstimate(s,i,o);const a=new vn(i,s,o);this.possibleCenters.push(a),null!=this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(a)}return null}}class Ln extends X{constructor(e,t,n,r){super(e,t),this.estimatedModuleSize=n,this.count=r,void 0===r&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(e,t,n){if(Math.abs(t-this.getY())<=e&&Math.abs(n-this.getX())<=e){const r=Math.abs(e-this.estimatedModuleSize);return r<=1||r<=this.estimatedModuleSize}return!1}combineEstimate(e,t,n){const r=this.count+1,i=(this.count*this.getX()+t)/r,s=(this.count*this.getY()+e)/r;return new Ln(i,s,(this.count*this.estimatedModuleSize+n)/r,r)}}class xr{constructor(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}let wr=(()=>{class l{constructor(t,n){this.image=t,this.resultPointCallback=n,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=n}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(t){const n=null!=t&&void 0!==t.get(se.TRY_HARDER),r=null!=t&&void 0!==t.get(se.PURE_BARCODE),i=this.image,s=i.getHeight(),o=i.getWidth();let a=Math.floor(3*s/(4*l.MAX_MODULES));(a<l.MIN_SKIP||n)&&(a=l.MIN_SKIP);let c=!1;const u=new Int32Array(5);for(let A=a-1;A<s&&!c;A+=a){u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0;let p=0;for(let I=0;I<o;I++)if(i.get(I,A))!(1&~p)&&p++,u[p]++;else if(1&p)u[p]++;else if(4===p)if(l.foundPatternCross(u)){if(!0!==this.handlePossibleCenter(u,A,I,r)){u[0]=u[2],u[1]=u[3],u[2]=u[4],u[3]=1,u[4]=0,p=3;continue}if(a=2,!0===this.hasSkipped)c=this.haveMultiplyConfirmedCenters();else{const b=this.findRowSkip();b>u[2]&&(A+=b-u[2]-a,I=o-1)}p=0,u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0}else u[0]=u[2],u[1]=u[3],u[2]=u[4],u[3]=1,u[4]=0,p=3;else u[++p]++;l.foundPatternCross(u)&&!0===this.handlePossibleCenter(u,A,o,r)&&(a=u[0],this.hasSkipped&&(c=this.haveMultiplyConfirmedCenters()))}const g=this.selectBestPatterns();return X.orderBestPatterns(g),new xr(g)}static centerFromEnd(t,n){return n-t[4]-t[3]-t[2]/2}static foundPatternCross(t){let n=0;for(let s=0;s<5;s++){const o=t[s];if(0===o)return!1;n+=o}if(n<7)return!1;const r=n/7,i=r/2;return Math.abs(r-t[0])<i&&Math.abs(r-t[1])<i&&Math.abs(3*r-t[2])<3*i&&Math.abs(r-t[3])<i&&Math.abs(r-t[4])<i}getCrossCheckStateCount(){const t=this.crossCheckStateCount;return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t}crossCheckDiagonal(t,n,r,i){const s=this.getCrossCheckStateCount();let o=0;const a=this.image;for(;t>=o&&n>=o&&a.get(n-o,t-o);)s[2]++,o++;if(t<o||n<o)return!1;for(;t>=o&&n>=o&&!a.get(n-o,t-o)&&s[1]<=r;)s[1]++,o++;if(t<o||n<o||s[1]>r)return!1;for(;t>=o&&n>=o&&a.get(n-o,t-o)&&s[0]<=r;)s[0]++,o++;if(s[0]>r)return!1;const c=a.getHeight(),u=a.getWidth();for(o=1;t+o<c&&n+o<u&&a.get(n+o,t+o);)s[2]++,o++;if(t+o>=c||n+o>=u)return!1;for(;t+o<c&&n+o<u&&!a.get(n+o,t+o)&&s[3]<r;)s[3]++,o++;if(t+o>=c||n+o>=u||s[3]>=r)return!1;for(;t+o<c&&n+o<u&&a.get(n+o,t+o)&&s[4]<r;)s[4]++,o++;return!(s[4]>=r)&&Math.abs(s[0]+s[1]+s[2]+s[3]+s[4]-i)<2*i&&l.foundPatternCross(s)}crossCheckVertical(t,n,r,i){const s=this.image,o=s.getHeight(),a=this.getCrossCheckStateCount();let c=t;for(;c>=0&&s.get(n,c);)a[2]++,c--;if(c<0)return NaN;for(;c>=0&&!s.get(n,c)&&a[1]<=r;)a[1]++,c--;if(c<0||a[1]>r)return NaN;for(;c>=0&&s.get(n,c)&&a[0]<=r;)a[0]++,c--;if(a[0]>r)return NaN;for(c=t+1;c<o&&s.get(n,c);)a[2]++,c++;if(c===o)return NaN;for(;c<o&&!s.get(n,c)&&a[3]<r;)a[3]++,c++;if(c===o||a[3]>=r)return NaN;for(;c<o&&s.get(n,c)&&a[4]<r;)a[4]++,c++;return a[4]>=r||5*Math.abs(a[0]+a[1]+a[2]+a[3]+a[4]-i)>=2*i?NaN:l.foundPatternCross(a)?l.centerFromEnd(a,c):NaN}crossCheckHorizontal(t,n,r,i){const s=this.image,o=s.getWidth(),a=this.getCrossCheckStateCount();let c=t;for(;c>=0&&s.get(c,n);)a[2]++,c--;if(c<0)return NaN;for(;c>=0&&!s.get(c,n)&&a[1]<=r;)a[1]++,c--;if(c<0||a[1]>r)return NaN;for(;c>=0&&s.get(c,n)&&a[0]<=r;)a[0]++,c--;if(a[0]>r)return NaN;for(c=t+1;c<o&&s.get(c,n);)a[2]++,c++;if(c===o)return NaN;for(;c<o&&!s.get(c,n)&&a[3]<r;)a[3]++,c++;if(c===o||a[3]>=r)return NaN;for(;c<o&&s.get(c,n)&&a[4]<r;)a[4]++,c++;return a[4]>=r||5*Math.abs(a[0]+a[1]+a[2]+a[3]+a[4]-i)>=i?NaN:l.foundPatternCross(a)?l.centerFromEnd(a,c):NaN}handlePossibleCenter(t,n,r,i){const s=t[0]+t[1]+t[2]+t[3]+t[4];let o=l.centerFromEnd(t,r),a=this.crossCheckVertical(n,Math.floor(o),t[2],s);if(!isNaN(a)&&(o=this.crossCheckHorizontal(Math.floor(o),Math.floor(a),t[2],s),!isNaN(o)&&(!i||this.crossCheckDiagonal(Math.floor(a),Math.floor(o),t[2],s)))){const c=s/7;let u=!1;const g=this.possibleCenters;for(let A=0,p=g.length;A<p;A++){const I=g[A];if(I.aboutEquals(c,a,o)){g[A]=I.combineEstimate(a,o,c),u=!0;break}}if(!u){const A=new Ln(o,a,c);g.push(A),null!=this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(A)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let n=null;for(const r of this.possibleCenters)if(r.getCount()>=l.CENTER_QUORUM){if(null!=n)return this.hasSkipped=!0,Math.floor((Math.abs(n.getX()-r.getX())-Math.abs(n.getY()-r.getY()))/2);n=r}return 0}haveMultiplyConfirmedCenters(){let t=0,n=0;const r=this.possibleCenters.length;for(const o of this.possibleCenters)o.getCount()>=l.CENTER_QUORUM&&(t++,n+=o.getEstimatedModuleSize());if(t<3)return!1;const i=n/r;let s=0;for(const o of this.possibleCenters)s+=Math.abs(o.getEstimatedModuleSize()-i);return s<=.05*n}selectBestPatterns(){const t=this.possibleCenters.length;if(t<3)throw new S;const n=this.possibleCenters;let r;if(t>3){let i=0,s=0;for(const c of this.possibleCenters){const u=c.getEstimatedModuleSize();i+=u,s+=u*u}r=i/t;let o=Math.sqrt(s/t-r*r);n.sort((c,u)=>{const g=Math.abs(u.getEstimatedModuleSize()-r),A=Math.abs(c.getEstimatedModuleSize()-r);return g<A?-1:g>A?1:0});const a=Math.max(.2*r,o);for(let c=0;c<n.length&&n.length>3;c++)Math.abs(n[c].getEstimatedModuleSize()-r)>a&&(n.splice(c,1),c--)}if(n.length>3){let i=0;for(const s of n)i+=s.getEstimatedModuleSize();r=i/n.length,n.sort((s,o)=>{if(o.getCount()===s.getCount()){const a=Math.abs(o.getEstimatedModuleSize()-r),c=Math.abs(s.getEstimatedModuleSize()-r);return a<c?1:a>c?-1:0}return o.getCount()-s.getCount()}),n.splice(3)}return[n[0],n[1],n[2]]}}return l.CENTER_QUORUM=2,l.MIN_SKIP=3,l.MAX_MODULES=57,l})();class dn{constructor(e){this.image=e}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(e){this.resultPointCallback=null==e?null:e.get(se.NEED_RESULT_POINT_CALLBACK);const n=new wr(this.image,this.resultPointCallback).find(e);return this.processFinderPatternInfo(n)}processFinderPatternInfo(e){const t=e.getTopLeft(),n=e.getTopRight(),r=e.getBottomLeft(),i=this.calculateModuleSize(t,n,r);if(i<1)throw new S("No pattern found in proccess finder.");const s=dn.computeDimension(t,n,r,i),o=$.getProvisionalVersionForDimension(s),a=o.getDimensionForVersion()-7;let c=null;if(o.getAlignmentPatternCenters().length>0){const p=n.getX()-t.getX()+r.getX(),I=n.getY()-t.getY()+r.getY(),y=1-3/a,b=Math.floor(t.getX()+y*(p-t.getX())),M=Math.floor(t.getY()+y*(I-t.getY()));for(let U=4;U<=16;U<<=1)try{c=this.findAlignmentInRegion(i,b,M,U);break}catch(Y){if(!(Y instanceof S))throw Y}}const u=dn.createTransform(t,n,r,c,s),g=dn.sampleGrid(this.image,u,s);let A;return A=null===c?[r,t,n]:[r,t,n,c],new St(g,A)}static createTransform(e,t,n,r,i){const s=i-3.5;let o,a,c,u;return null!==r?(o=r.getX(),a=r.getY(),c=s-3,u=c):(o=t.getX()-e.getX()+n.getX(),a=t.getY()-e.getY()+n.getY(),c=s,u=s),at.quadrilateralToQuadrilateral(3.5,3.5,s,3.5,c,u,3.5,s,e.getX(),e.getY(),t.getX(),t.getY(),o,a,n.getX(),n.getY())}static sampleGrid(e,t,n){return At.getInstance().sampleGridWithTransform(e,n,n,t)}static computeDimension(e,t,n,r){const i=J.round(X.distance(e,t)/r),s=J.round(X.distance(e,n)/r);let o=Math.floor((i+s)/2)+7;switch(3&o){case 0:o++;break;case 2:o--;break;case 3:throw new S("Dimensions could be not found.")}return o}calculateModuleSize(e,t,n){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,n))/2}calculateModuleSizeOneWay(e,t){const n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?r/7:isNaN(r)?n/7:(n+r)/14}sizeOfBlackWhiteBlackRunBothWays(e,t,n,r){let i=this.sizeOfBlackWhiteBlackRun(e,t,n,r),s=1,o=e-(n-e);o<0?(s=e/(e-o),o=0):o>=this.image.getWidth()&&(s=(this.image.getWidth()-1-e)/(o-e),o=this.image.getWidth()-1);let a=Math.floor(t-(r-t)*s);return s=1,a<0?(s=t/(t-a),a=0):a>=this.image.getHeight()&&(s=(this.image.getHeight()-1-t)/(a-t),a=this.image.getHeight()-1),o=Math.floor(e+(o-e)*s),i+=this.sizeOfBlackWhiteBlackRun(e,t,o,a),i-1}sizeOfBlackWhiteBlackRun(e,t,n,r){const i=Math.abs(r-t)>Math.abs(n-e);if(i){let p=e;e=t,t=p,p=n,n=r,r=p}const s=Math.abs(n-e),o=Math.abs(r-t);let a=-s/2;const c=e<n?1:-1,u=t<r?1:-1;let g=0;const A=n+c;for(let p=e,I=t;p!==A;p+=c){if(1===g===this.image.get(i?I:p,i?p:I)){if(2===g)return J.distance(p,I,e,t);g++}if(a+=o,a>0){if(I===r)break;I+=u,a-=s}}return 2===g?J.distance(n+c,r,e,t):NaN}findAlignmentInRegion(e,t,n,r){const i=Math.floor(r*e),s=Math.max(0,t-i),o=Math.min(this.image.getWidth()-1,t+i);if(o-s<3*e)throw new S("Alignment top exceeds estimated module size.");const a=Math.max(0,n-i),c=Math.min(this.image.getHeight()-1,n+i);if(c-a<3*e)throw new S("Alignment bottom exceeds estimated module size.");return new In(this.image,s,a,o-s,c-a,e,this.resultPointCallback).find()}}class Jt{constructor(){this.decoder=new gr}getDecoder(){return this.decoder}decode(e,t){let n,r;if(null!=t&&void 0!==t.get(se.PURE_BARCODE)){const a=Jt.extractPureBits(e.getBlackMatrix());n=this.decoder.decodeBitMatrix(a,t),r=Jt.NO_POINTS}else{const a=new dn(e.getBlackMatrix()).detect(t);n=this.decoder.decodeBitMatrix(a.getBits(),t),r=a.getPoints()}n.getOther()instanceof Wn&&n.getOther().applyMirroredCorrection(r);const i=new ge(n.getText(),n.getRawBytes(),void 0,r,K.QR_CODE,void 0),s=n.getByteSegments();null!==s&&i.putMetadata(he.BYTE_SEGMENTS,s);const o=n.getECLevel();return null!==o&&i.putMetadata(he.ERROR_CORRECTION_LEVEL,o),n.hasStructuredAppend()&&(i.putMetadata(he.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),i.putMetadata(he.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),i}reset(){}static extractPureBits(e){const t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(null===t||null===n)throw new S;const r=this.moduleSize(t,e);let i=t[1],s=n[1],o=t[0],a=n[0];if(o>=a||i>=s)throw new S;if(s-i!=a-o&&(a=o+(s-i),a>=e.getWidth()))throw new S;const c=Math.round((a-o+1)/r),u=Math.round((s-i+1)/r);if(c<=0||u<=0)throw new S;if(u!==c)throw new S;const g=Math.floor(r/2);i+=g,o+=g;const A=o+Math.floor((c-1)*r)-a;if(A>0){if(A>g)throw new S;o-=A}const p=i+Math.floor((u-1)*r)-s;if(p>0){if(p>g)throw new S;i-=p}const I=new Xe(c,u);for(let y=0;y<u;y++){const b=i+Math.floor(y*r);for(let M=0;M<c;M++)e.get(o+Math.floor(M*r),b)&&I.set(M,y)}return I}static moduleSize(e,t){const n=t.getHeight(),r=t.getWidth();let i=e[0],s=e[1],o=!0,a=0;for(;i<r&&s<n;){if(o!==t.get(i,s)){if(5==++a)break;o=!o}i++,s++}if(i===r||s===n)throw new S;return(i-e[0])/7}}Jt.NO_POINTS=new Array;class oe{PDF417Common(){}static getBitCountSum(e){return J.sum(e)}static toIntArray(e){if(null==e||!e.length)return oe.EMPTY_INT_ARRAY;const t=new Int32Array(e.length);let n=0;for(const r of e)t[n++]=r;return t}static getCodeword(e){const t=Ye.binarySearch(oe.SYMBOL_TABLE,262143&e);return t<0?-1:(oe.CODEWORD_TABLE[t]-1)%oe.NUMBER_OF_CODEWORDS}}oe.NUMBER_OF_CODEWORDS=929,oe.MAX_CODEWORDS_IN_BARCODE=oe.NUMBER_OF_CODEWORDS-1,oe.MIN_ROWS_IN_BARCODE=3,oe.MAX_ROWS_IN_BARCODE=90,oe.MODULES_IN_CODEWORD=17,oe.MODULES_IN_STOP_PATTERN=18,oe.BARS_IN_MODULE=8,oe.EMPTY_INT_ARRAY=new Int32Array([]),oe.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),oe.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Ar{constructor(e,t){this.bits=e,this.points=t}getBits(){return this.bits}getPoints(){return this.points}}class we{static detectMultiple(e,t,n){let r=e.getBlackMatrix(),i=we.detect(n,r);return i.length||(r=r.clone(),r.rotate180(),i=we.detect(n,r)),new Ar(r,i)}static detect(e,t){const n=new Array;let r=0,i=0,s=!1;for(;r<t.getHeight();){const o=we.findVertices(t,r,i);if(null!=o[0]||null!=o[3]){if(s=!0,n.push(o),!e)break;null!=o[2]?(i=Math.trunc(o[2].getX()),r=Math.trunc(o[2].getY())):(i=Math.trunc(o[4].getX()),r=Math.trunc(o[4].getY()))}else{if(!s)break;s=!1,i=0;for(const a of n)null!=a[1]&&(r=Math.trunc(Math.max(r,a[1].getY()))),null!=a[3]&&(r=Math.max(r,Math.trunc(a[3].getY())));r+=we.ROW_STEP}}return n}static findVertices(e,t,n){const r=e.getHeight(),i=e.getWidth(),s=new Array(8);return we.copyToResult(s,we.findRowsWithPattern(e,r,i,t,n,we.START_PATTERN),we.INDEXES_START_PATTERN),null!=s[4]&&(n=Math.trunc(s[4].getX()),t=Math.trunc(s[4].getY())),we.copyToResult(s,we.findRowsWithPattern(e,r,i,t,n,we.STOP_PATTERN),we.INDEXES_STOP_PATTERN),s}static copyToResult(e,t,n){for(let r=0;r<n.length;r++)e[n[r]]=t[r]}static findRowsWithPattern(e,t,n,r,i,s){const o=new Array(4);let a=!1;const c=new Int32Array(s.length);for(;r<t;r+=we.ROW_STEP){let g=we.findGuardPattern(e,i,r,n,!1,s,c);if(null!=g){for(;r>0;){const A=we.findGuardPattern(e,i,--r,n,!1,s,c);if(null==A){r++;break}g=A}o[0]=new X(g[0],r),o[1]=new X(g[1],r),a=!0;break}}let u=r+1;if(a){let g=0,A=Int32Array.from([Math.trunc(o[0].getX()),Math.trunc(o[1].getX())]);for(;u<t;u++){const p=we.findGuardPattern(e,A[0],u,n,!1,s,c);if(null!=p&&Math.abs(A[0]-p[0])<we.MAX_PATTERN_DRIFT&&Math.abs(A[1]-p[1])<we.MAX_PATTERN_DRIFT)A=p,g=0;else{if(g>we.SKIPPED_ROW_COUNT_MAX)break;g++}}u-=g+1,o[2]=new X(A[0],u),o[3]=new X(A[1],u)}return u-r<we.BARCODE_MIN_HEIGHT&&Ye.fill(o,null),o}static findGuardPattern(e,t,n,r,i,s,o){Ye.fillWithin(o,0,o.length,0);let a=t,c=0;for(;e.get(a,n)&&a>0&&c++<we.MAX_PIXEL_DRIFT;)a--;let u=a,g=0,A=s.length;for(let p=i;u<r;u++)if(e.get(u,n)!==p)o[g]++;else{if(g===A-1){if(we.patternMatchVariance(o,s,we.MAX_INDIVIDUAL_VARIANCE)<we.MAX_AVG_VARIANCE)return new Int32Array([a,u]);a+=o[0]+o[1],Ee.arraycopy(o,2,o,0,g-1),o[g-1]=0,o[g]=0,g--}else g++;o[g]=1,p=!p}return g===A-1&&we.patternMatchVariance(o,s,we.MAX_INDIVIDUAL_VARIANCE)<we.MAX_AVG_VARIANCE?new Int32Array([a,u-1]):null}static patternMatchVariance(e,t,n){let r=e.length,i=0,s=0;for(let c=0;c<r;c++)i+=e[c],s+=t[c];if(i<s)return 1/0;let o=i/s;n*=o;let a=0;for(let c=0;c<r;c++){let u=e[c],g=t[c]*o,A=u>g?u-g:g-u;if(A>n)return 1/0;a+=A}return a/i}}we.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),we.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),we.MAX_AVG_VARIANCE=.42,we.MAX_INDIVIDUAL_VARIANCE=.8,we.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),we.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),we.MAX_PIXEL_DRIFT=3,we.MAX_PATTERN_DRIFT=5,we.SKIPPED_ROW_COUNT_MAX=25,we.ROW_STEP=5,we.BARCODE_MIN_HEIGHT=10;class lt{constructor(e,t){if(0===t.length)throw new Z;this.field=e;let n=t.length;if(n>1&&0===t[0]){let r=1;for(;r<n&&0===t[r];)r++;r===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-r),Ee.arraycopy(t,r,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return 0===this.coefficients[0]}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(0===e)return this.getCoefficient(0);if(1===e){let r=0;for(let i of this.coefficients)r=this.field.add(r,i);return r}let t=this.coefficients[0],n=this.coefficients.length;for(let r=1;r<n;r++)t=this.field.add(this.field.multiply(e,t),this.coefficients[r]);return t}add(e){if(!this.field.equals(e.field))throw new Z("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;let t=this.coefficients,n=e.coefficients;if(t.length>n.length){let s=t;t=n,n=s}let r=new Int32Array(n.length),i=n.length-t.length;Ee.arraycopy(n,0,r,0,i);for(let s=i;s<n.length;s++)r[s]=this.field.add(t[s-i],n[s]);return new lt(this.field,r)}subtract(e){if(!this.field.equals(e.field))throw new Z("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())}multiply(e){return e instanceof lt?this.multiplyOther(e):this.multiplyScalar(e)}multiplyOther(e){if(!this.field.equals(e.field))throw new Z("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new lt(this.field,new Int32Array([0]));let t=this.coefficients,n=t.length,r=e.coefficients,i=r.length,s=new Int32Array(n+i-1);for(let o=0;o<n;o++){let a=t[o];for(let c=0;c<i;c++)s[o+c]=this.field.add(s[o+c],this.field.multiply(a,r[c]))}return new lt(this.field,s)}negative(){let e=this.coefficients.length,t=new Int32Array(e);for(let n=0;n<e;n++)t[n]=this.field.subtract(0,this.coefficients[n]);return new lt(this.field,t)}multiplyScalar(e){if(0===e)return new lt(this.field,new Int32Array([0]));if(1===e)return this;let t=this.coefficients.length,n=new Int32Array(t);for(let r=0;r<t;r++)n[r]=this.field.multiply(this.coefficients[r],e);return new lt(this.field,n)}multiplyByMonomial(e,t){if(e<0)throw new Z;if(0===t)return new lt(this.field,new Int32Array([0]));let n=this.coefficients.length,r=new Int32Array(n+e);for(let i=0;i<n;i++)r[i]=this.field.multiply(this.coefficients[i],t);return new lt(this.field,r)}toString(){let e=new Ie;for(let t=this.getDegree();t>=0;t--){let n=this.getCoefficient(t);0!==n&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),(0===t||1!==n)&&e.append(n),0!==t&&(1===t?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()}}class Cr{add(e,t){return(e+t)%this.modulus}subtract(e,t){return(this.modulus+e-t)%this.modulus}exp(e){return this.expTable[e]}log(e){if(0===e)throw new Z;return this.logTable[e]}inverse(e){if(0===e)throw new Xt;return this.expTable[this.modulus-this.logTable[e]-1]}multiply(e,t){return 0===e||0===t?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]}getSize(){return this.modulus}equals(e){return e===this}}class Bn extends Cr{constructor(e,t){super(),this.modulus=e,this.expTable=new Int32Array(e),this.logTable=new Int32Array(e);let n=1;for(let r=0;r<e;r++)this.expTable[r]=n,n=n*t%e;for(let r=0;r<e-1;r++)this.logTable[this.expTable[r]]=r;this.zero=new lt(this,new Int32Array([0])),this.one=new lt(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,t){if(e<0)throw new Z;if(0===t)return this.zero;let n=new Int32Array(e+1);return n[0]=t,new lt(this,n)}}Bn.PDF417_GF=new Bn(oe.NUMBER_OF_CODEWORDS,3);class Yn{constructor(){this.field=Bn.PDF417_GF}decode(e,t,n){let r=new lt(this.field,e),i=new Int32Array(t),s=!1;for(let I=t;I>0;I--){let y=r.evaluateAt(this.field.exp(I));i[t-I]=y,0!==y&&(s=!0)}if(!s)return 0;let o=this.field.getOne();if(null!=n)for(const I of n){let y=this.field.exp(e.length-1-I),b=new lt(this.field,new Int32Array([this.field.subtract(0,y),1]));o=o.multiply(b)}let a=new lt(this.field,i),c=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),a,t),u=c[0],g=c[1],A=this.findErrorLocations(u),p=this.findErrorMagnitudes(g,u,A);for(let I=0;I<A.length;I++){let y=e.length-1-this.field.log(A[I]);if(y<0)throw ze.getChecksumInstance();e[y]=this.field.subtract(e[y],p[I])}return A.length}runEuclideanAlgorithm(e,t,n){if(e.getDegree()<t.getDegree()){let A=e;e=t,t=A}let r=e,i=t,s=this.field.getZero(),o=this.field.getOne();for(;i.getDegree()>=Math.round(n/2);){let A=r,p=s;if(r=i,s=o,r.isZero())throw ze.getChecksumInstance();i=A;let I=this.field.getZero(),y=r.getCoefficient(r.getDegree()),b=this.field.inverse(y);for(;i.getDegree()>=r.getDegree()&&!i.isZero();){let M=i.getDegree()-r.getDegree(),U=this.field.multiply(i.getCoefficient(i.getDegree()),b);I=I.add(this.field.buildMonomial(M,U)),i=i.subtract(r.multiplyByMonomial(M,U))}o=I.multiply(s).subtract(p).negative()}let a=o.getCoefficient(0);if(0===a)throw ze.getChecksumInstance();let c=this.field.inverse(a);return[o.multiply(c),i.multiply(c)]}findErrorLocations(e){let t=e.getDegree(),n=new Int32Array(t),r=0;for(let i=1;i<this.field.getSize()&&r<t;i++)0===e.evaluateAt(i)&&(n[r]=this.field.inverse(i),r++);if(r!==t)throw ze.getChecksumInstance();return n}findErrorMagnitudes(e,t,n){let r=t.getDegree(),i=new Int32Array(r);for(let c=1;c<=r;c++)i[r-c]=this.field.multiply(c,t.getCoefficient(c));let s=new lt(this.field,i),o=n.length,a=new Int32Array(o);for(let c=0;c<o;c++){let u=this.field.inverse(n[c]),g=this.field.subtract(0,e.evaluateAt(u)),A=this.field.inverse(s.evaluateAt(u));a[c]=this.field.multiply(g,A)}return a}}class rn{constructor(e,t,n,r,i){e instanceof rn?this.constructor_2(e):this.constructor_1(e,t,n,r,i)}constructor_1(e,t,n,r,i){const s=null==t||null==n,o=null==r||null==i;if(s&&o)throw new S;s?(t=new X(0,r.getY()),n=new X(0,i.getY())):o&&(r=new X(e.getWidth()-1,t.getY()),i=new X(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=t,this.bottomLeft=n,this.topRight=r,this.bottomRight=i,this.minX=Math.trunc(Math.min(t.getX(),n.getX())),this.maxX=Math.trunc(Math.max(r.getX(),i.getX())),this.minY=Math.trunc(Math.min(t.getY(),r.getY())),this.maxY=Math.trunc(Math.max(n.getY(),i.getY()))}constructor_2(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()}static merge(e,t){return null==e?t:null==t?e:new rn(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)}addMissingRows(e,t,n){let r=this.topLeft,i=this.bottomLeft,s=this.topRight,o=this.bottomRight;if(e>0){let a=n?this.topLeft:this.topRight,c=Math.trunc(a.getY()-e);c<0&&(c=0);let u=new X(a.getX(),c);n?r=u:s=u}if(t>0){let a=n?this.bottomLeft:this.bottomRight,c=Math.trunc(a.getY()+t);c>=this.image.getHeight()&&(c=this.image.getHeight()-1);let u=new X(a.getX(),c);n?i=u:o=u}return new rn(this.image,r,i,s,o)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Er{constructor(e,t,n,r){this.columnCount=e,this.errorCorrectionLevel=r,this.rowCountUpperPart=t,this.rowCountLowerPart=n,this.rowCount=t+n}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class gn{constructor(){this.buffer=""}static form(e,t){let n=-1;return e.replace(/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g,function r(s,o,a,c,u,g){if("%%"===s)return"%";if(void 0===t[++n])return;s=c?parseInt(c.substr(1)):void 0;let p,A=u?parseInt(u.substr(1)):void 0;switch(g){case"s":p=t[n];break;case"c":p=t[n][0];break;case"f":p=parseFloat(t[n]).toFixed(s);break;case"p":p=parseFloat(t[n]).toPrecision(s);break;case"e":p=parseFloat(t[n]).toExponential(s);break;case"x":p=parseInt(t[n]).toString(A||16);break;case"d":p=parseFloat(parseInt(t[n],A||10).toPrecision(s)).toFixed(0)}p="object"==typeof p?JSON.stringify(p):(+p).toString(A);let I=parseInt(a),y=a&&a[0]+""=="0"?"0":" ";for(;p.length<I;)p=void 0!==o?p+y:y+p;return p})}format(e,...t){this.buffer+=gn.form(e,t)}toString(){return this.buffer}}let Xn=(()=>{class l{constructor(t){this.boundingBox=new rn(t),this.codewords=new Array(t.getMaxY()-t.getMinY()+1)}getCodewordNearby(t){let n=this.getCodeword(t);if(null!=n)return n;for(let r=1;r<l.MAX_NEARBY_DISTANCE;r++){let i=this.imageRowToCodewordIndex(t)-r;if(i>=0&&(n=this.codewords[i],null!=n)||(i=this.imageRowToCodewordIndex(t)+r,i<this.codewords.length&&(n=this.codewords[i],null!=n)))return n}return null}imageRowToCodewordIndex(t){return t-this.boundingBox.getMinY()}setCodeword(t,n){this.codewords[this.imageRowToCodewordIndex(t)]=n}getCodeword(t){return this.codewords[this.imageRowToCodewordIndex(t)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const t=new gn;let n=0;for(const r of this.codewords)null!=r?t.format("%3d: %3d|%3d%n",n++,r.getRowNumber(),r.getValue()):t.format("%3d:    |   %n",n++);return t.toString()}}return l.MAX_NEARBY_DISTANCE=5,l})();class xn{constructor(){this.values=new Map}setValue(e){e=Math.trunc(e);let t=this.values.get(e);null==t&&(t=0),t++,this.values.set(e,t)}getValue(){let e=-1,t=new Array;for(const[n,r]of this.values.entries()){const i={getKey:()=>n,getValue:()=>r};i.getValue()>e?(e=i.getValue(),t=[],t.push(i.getKey())):i.getValue()===e&&t.push(i.getKey())}return oe.toIntArray(t)}getConfidence(e){return this.values.get(e)}}class Zn extends Xn{constructor(e,t){super(e),this._isLeft=t}setRowNumbers(){for(let e of this.getCodewords())null!=e&&e.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(e){let t=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(t,e);let n=this.getBoundingBox(),r=this._isLeft?n.getTopLeft():n.getTopRight(),i=this._isLeft?n.getBottomLeft():n.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(r.getY())),o=this.imageRowToCodewordIndex(Math.trunc(i.getY())),a=-1,c=1,u=0;for(let g=s;g<o;g++){if(null==t[g])continue;let A=t[g],p=A.getRowNumber()-a;if(0===p)u++;else if(1===p)c=Math.max(c,u),u=1,a=A.getRowNumber();else if(p<0||A.getRowNumber()>=e.getRowCount()||p>g)t[g]=null;else{let I;I=c>2?(c-2)*p:p;let y=I>=g;for(let b=1;b<=I&&!y;b++)y=null!=t[g-b];y?t[g]=null:(a=A.getRowNumber(),u=1)}}}getRowHeights(){let e=this.getBarcodeMetadata();if(null==e)return null;this.adjustIncompleteIndicatorColumnRowNumbers(e);let t=new Int32Array(e.getRowCount());for(let n of this.getCodewords())if(null!=n){let r=n.getRowNumber();if(r>=t.length)continue;t[r]++}return t}adjustIncompleteIndicatorColumnRowNumbers(e){let t=this.getBoundingBox(),n=this._isLeft?t.getTopLeft():t.getTopRight(),r=this._isLeft?t.getBottomLeft():t.getBottomRight(),i=this.imageRowToCodewordIndex(Math.trunc(n.getY())),s=this.imageRowToCodewordIndex(Math.trunc(r.getY())),o=this.getCodewords(),a=-1;for(let c=i;c<s;c++){if(null==o[c])continue;let u=o[c];u.setRowNumberAsRowIndicatorColumn();let g=u.getRowNumber()-a;0===g||(1===g?a=u.getRowNumber():u.getRowNumber()>=e.getRowCount()?o[c]=null:a=u.getRowNumber())}}getBarcodeMetadata(){let e=this.getCodewords(),t=new xn,n=new xn,r=new xn,i=new xn;for(let o of e){if(null==o)continue;o.setRowNumberAsRowIndicatorColumn();let a=o.getValue()%30,c=o.getRowNumber();switch(this._isLeft||(c+=2),c%3){case 0:n.setValue(3*a+1);break;case 1:i.setValue(a/3),r.setValue(a%3);break;case 2:t.setValue(a+1)}}if(0===t.getValue().length||0===n.getValue().length||0===r.getValue().length||0===i.getValue().length||t.getValue()[0]<1||n.getValue()[0]+r.getValue()[0]<oe.MIN_ROWS_IN_BARCODE||n.getValue()[0]+r.getValue()[0]>oe.MAX_ROWS_IN_BARCODE)return null;let s=new Er(t.getValue()[0],n.getValue()[0],r.getValue()[0],i.getValue()[0]);return this.removeIncorrectCodewords(e,s),s}removeIncorrectCodewords(e,t){for(let n=0;n<e.length;n++){let r=e[n];if(null==e[n])continue;let i=r.getValue()%30,s=r.getRowNumber();if(s>t.getRowCount())e[n]=null;else switch(this._isLeft||(s+=2),s%3){case 0:3*i+1!==t.getRowCountUpperPart()&&(e[n]=null);break;case 1:(Math.trunc(i/3)!==t.getErrorCorrectionLevel()||i%3!==t.getRowCountLowerPart())&&(e[n]=null);break;case 2:i+1!==t.getColumnCount()&&(e[n]=null)}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+"\n"+super.toString()}}class wn{constructor(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let t,e=oe.MAX_CODEWORDS_IN_BARCODE;do{t=e,e=this.adjustRowNumbersAndGetCount()}while(e>0&&e<t);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(e){null!=e&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let e=this.adjustRowNumbersByRow();if(0===e)return 0;for(let t=1;t<this.barcodeColumnCount+1;t++){let n=this.detectionResultColumns[t].getCodewords();for(let r=0;r<n.length;r++)null!=n[r]&&(n[r].hasValidRowNumber()||this.adjustRowNumbers(t,r,n))}return e}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(null==this.detectionResultColumns[0]||null==this.detectionResultColumns[this.barcodeColumnCount+1])return;let e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let n=0;n<e.length;n++)if(null!=e[n]&&null!=t[n]&&e[n].getRowNumber()===t[n].getRowNumber())for(let r=1;r<=this.barcodeColumnCount;r++){let i=this.detectionResultColumns[r].getCodewords()[n];null!=i&&(i.setRowNumber(e[n].getRowNumber()),i.hasValidRowNumber()||(this.detectionResultColumns[r].getCodewords()[n]=null))}}adjustRowNumbersFromRRI(){if(null==this.detectionResultColumns[this.barcodeColumnCount+1])return 0;let e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let n=0;n<t.length;n++){if(null==t[n])continue;let r=t[n].getRowNumber(),i=0;for(let s=this.barcodeColumnCount+1;s>0&&i<this.ADJUST_ROW_NUMBER_SKIP;s--){let o=this.detectionResultColumns[s].getCodewords()[n];null!=o&&(i=wn.adjustRowNumberIfValid(r,i,o),o.hasValidRowNumber()||e++)}}return e}adjustRowNumbersFromLRI(){if(null==this.detectionResultColumns[0])return 0;let e=0,t=this.detectionResultColumns[0].getCodewords();for(let n=0;n<t.length;n++){if(null==t[n])continue;let r=t[n].getRowNumber(),i=0;for(let s=1;s<this.barcodeColumnCount+1&&i<this.ADJUST_ROW_NUMBER_SKIP;s++){let o=this.detectionResultColumns[s].getCodewords()[n];null!=o&&(i=wn.adjustRowNumberIfValid(r,i,o),o.hasValidRowNumber()||e++)}}return e}static adjustRowNumberIfValid(e,t,n){return null==n||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),t=0):++t),t}adjustRowNumbers(e,t,n){if(!this.detectionResultColumns[e-1])return;let r=n[t],i=this.detectionResultColumns[e-1].getCodewords(),s=i;null!=this.detectionResultColumns[e+1]&&(s=this.detectionResultColumns[e+1].getCodewords());let o=new Array(14);o[2]=i[t],o[3]=s[t],t>0&&(o[0]=n[t-1],o[4]=i[t-1],o[5]=s[t-1]),t>1&&(o[8]=n[t-2],o[10]=i[t-2],o[11]=s[t-2]),t<n.length-1&&(o[1]=n[t+1],o[6]=i[t+1],o[7]=s[t+1]),t<n.length-2&&(o[9]=n[t+2],o[12]=i[t+2],o[13]=s[t+2]);for(let a of o)if(wn.adjustRowNumber(r,a))return}static adjustRowNumber(e,t){return!(null==t||!t.hasValidRowNumber()||t.getBucket()!==e.getBucket()||(e.setRowNumber(t.getRowNumber()),0))}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(e){this.boundingBox=e}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(e,t){this.detectionResultColumns[e]=t}getDetectionResultColumn(e){return this.detectionResultColumns[e]}toString(){let e=this.detectionResultColumns[0];null==e&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);let t=new gn;for(let n=0;n<e.getCodewords().length;n++){t.format("CW %3d:",n);for(let r=0;r<this.barcodeColumnCount+2;r++){if(null==this.detectionResultColumns[r]){t.format("    |   ");continue}let i=this.detectionResultColumns[r].getCodewords()[n];null!=i?t.format(" %3d|%3d",i.getRowNumber(),i.getValue()):t.format("    |   ")}t.format("%n")}return t.toString()}}let mr=(()=>{class l{constructor(t,n,r,i){this.rowNumber=l.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(t),this.endX=Math.trunc(n),this.bucket=Math.trunc(r),this.value=Math.trunc(i)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(t){return t!==l.BARCODE_ROW_UNKNOWN&&this.bucket===t%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(3*Math.trunc(this.value/30)+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(t){this.rowNumber=t}toString(){return this.rowNumber+"|"+this.value}}return l.BARCODE_ROW_UNKNOWN=-1,l})();class mt{static initialize(){for(let e=0;e<oe.SYMBOL_TABLE.length;e++){let t=oe.SYMBOL_TABLE[e],n=1&t;for(let r=0;r<oe.BARS_IN_MODULE;r++){let i=0;for(;(1&t)===n;)i+=1,t>>=1;n=1&t,mt.RATIOS_TABLE[e]||(mt.RATIOS_TABLE[e]=new Array(oe.BARS_IN_MODULE)),mt.RATIOS_TABLE[e][oe.BARS_IN_MODULE-r-1]=Math.fround(i/oe.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(e){let t=mt.getDecodedCodewordValue(mt.sampleBitCounts(e));return-1!==t?t:mt.getClosestDecodedValue(e)}static sampleBitCounts(e){let t=J.sum(e),n=new Int32Array(oe.BARS_IN_MODULE),r=0,i=0;for(let s=0;s<oe.MODULES_IN_CODEWORD;s++)i+e[r]<=t/(2*oe.MODULES_IN_CODEWORD)+s*t/oe.MODULES_IN_CODEWORD&&(i+=e[r],r++),n[r]++;return n}static getDecodedCodewordValue(e){let t=mt.getBitValue(e);return-1===oe.getCodeword(t)?-1:t}static getBitValue(e){let t=0;for(let n=0;n<e.length;n++)for(let r=0;r<e[n];r++)t=t<<1|(n%2==0?1:0);return Math.trunc(t)}static getClosestDecodedValue(e){let t=J.sum(e),n=new Array(oe.BARS_IN_MODULE);if(t>1)for(let s=0;s<n.length;s++)n[s]=Math.fround(e[s]/t);let r=Tt.MAX_VALUE,i=-1;this.bSymbolTableReady||mt.initialize();for(let s=0;s<mt.RATIOS_TABLE.length;s++){let o=0,a=mt.RATIOS_TABLE[s];for(let c=0;c<oe.BARS_IN_MODULE;c++){let u=Math.fround(a[c]-n[c]);if(o+=Math.fround(u*u),o>=r)break}o<r&&(r=o,i=oe.SYMBOL_TABLE[s])}return i}}mt.bSymbolTableReady=!1,mt.RATIOS_TABLE=new Array(oe.SYMBOL_TABLE.length).map(l=>new Array(oe.BARS_IN_MODULE));class Qn{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(e){this.segmentIndex=e}getFileId(){return this.fileId}setFileId(e){this.fileId=e}getOptionalData(){return this.optionalData}setOptionalData(e){this.optionalData=e}isLastSegment(){return this.lastSegment}setLastSegment(e){this.lastSegment=e}getSegmentCount(){return this.segmentCount}setSegmentCount(e){this.segmentCount=e}getSender(){return this.sender||null}setSender(e){this.sender=e}getAddressee(){return this.addressee||null}setAddressee(e){this.addressee=e}getFileName(){return this.fileName}setFileName(e){this.fileName=e}getFileSize(){return this.fileSize}setFileSize(e){this.fileSize=e}getChecksum(){return this.checksum}setChecksum(e){this.checksum=e}getTimestamp(){return this.timestamp}setTimestamp(e){this.timestamp=e}}class Kn{static parseLong(e,t=void 0){return parseInt(e,t)}}let pr=(()=>{class l extends ue{}return l.kind="NullPointerException",l})();class Ir{writeBytes(e){this.writeBytesOffset(e,0,e.length)}writeBytesOffset(e,t,n){if(null==e)throw new pr;if(t<0||t>e.length||n<0||t+n>e.length||t+n<0)throw new xt;if(0!==n)for(let r=0;r<n;r++)this.write(e[t+r])}flush(){}close(){}}class yr extends ue{}class Tr extends Ir{constructor(e=32){if(super(),this.count=0,e<0)throw new Z("Negative initial size: "+e);this.buf=new Uint8Array(e)}ensureCapacity(e){e-this.buf.length>0&&this.grow(e)}grow(e){let n=this.buf.length<<1;if(n-e<0&&(n=e),n<0){if(e<0)throw new yr;n=ae.MAX_VALUE}this.buf=Ye.copyOfUint8Array(this.buf,n)}write(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1}writeBytesOffset(e,t,n){if(t<0||t>e.length||n<0||t+n-e.length>0)throw new xt;this.ensureCapacity(this.count+n),Ee.arraycopy(e,t,this.buf,this.count,n),this.count+=n}writeTo(e){e.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return Ye.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(e){return e?"string"==typeof e?this.toString_string(e):this.toString_number(e):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(e){return new String(this.buf).toString()}toString_number(e){return new String(this.buf).toString()}close(){}}var Be=function(l){return l[l.ALPHA=0]="ALPHA",l[l.LOWER=1]="LOWER",l[l.MIXED=2]="MIXED",l[l.PUNCT=3]="PUNCT",l[l.ALPHA_SHIFT=4]="ALPHA_SHIFT",l[l.PUNCT_SHIFT=5]="PUNCT_SHIFT",l}(Be||{});function qn(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let yn;function $t(l){if(typeof yn>"u"&&(yn=qn()),null===yn)throw new Error("BigInt is not supported!");return yn(l)}class O{static decode(e,t){let n=new Ie(""),r=z.ISO8859_1;n.enableDecoding(r);let i=1,s=e[i++],o=new Qn;for(;i<e[0];){switch(s){case O.TEXT_COMPACTION_MODE_LATCH:i=O.textCompaction(e,i,n);break;case O.BYTE_COMPACTION_MODE_LATCH:case O.BYTE_COMPACTION_MODE_LATCH_6:i=O.byteCompaction(s,e,r,i,n);break;case O.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[i++]);break;case O.NUMERIC_COMPACTION_MODE_LATCH:i=O.numericCompaction(e,i,n);break;case O.ECI_CHARSET:z.getCharacterSetECIByValue(e[i++]);break;case O.ECI_GENERAL_PURPOSE:i+=2;break;case O.ECI_USER_DEFINED:i++;break;case O.BEGIN_MACRO_PDF417_CONTROL_BLOCK:i=O.decodeMacroBlock(e,i,o);break;case O.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case O.MACRO_PDF417_TERMINATOR:throw new H;default:i--,i=O.textCompaction(e,i,n)}if(!(i<e.length))throw H.getFormatInstance();s=e[i++]}if(0===n.length())throw H.getFormatInstance();let a=new zt(null,n.toString(),null,t);return a.setOther(o),a}static decodeMacroBlock(e,t,n){if(t+O.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw H.getFormatInstance();let r=new Int32Array(O.NUMBER_OF_SEQUENCE_CODEWORDS);for(let o=0;o<O.NUMBER_OF_SEQUENCE_CODEWORDS;o++,t++)r[o]=e[t];n.setSegmentIndex(ae.parseInt(O.decodeBase900toBase10(r,O.NUMBER_OF_SEQUENCE_CODEWORDS)));let i=new Ie;t=O.textCompaction(e,t,i),n.setFileId(i.toString());let s=-1;for(e[t]===O.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(s=t+1);t<e[0];)switch(e[t]){case O.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(e[++t]){case O.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let o=new Ie;t=O.textCompaction(e,t+1,o),n.setFileName(o.toString());break;case O.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let a=new Ie;t=O.textCompaction(e,t+1,a),n.setSender(a.toString());break;case O.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let c=new Ie;t=O.textCompaction(e,t+1,c),n.setAddressee(c.toString());break;case O.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let u=new Ie;t=O.numericCompaction(e,t+1,u),n.setSegmentCount(ae.parseInt(u.toString()));break;case O.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let g=new Ie;t=O.numericCompaction(e,t+1,g),n.setTimestamp(Kn.parseLong(g.toString()));break;case O.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let A=new Ie;t=O.numericCompaction(e,t+1,A),n.setChecksum(ae.parseInt(A.toString()));break;case O.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let p=new Ie;t=O.numericCompaction(e,t+1,p),n.setFileSize(Kn.parseLong(p.toString()));break;default:throw H.getFormatInstance()}break;case O.MACRO_PDF417_TERMINATOR:t++,n.setLastSegment(!0);break;default:throw H.getFormatInstance()}if(-1!==s){let o=t-s;n.isLastSegment()&&o--,n.setOptionalData(Ye.copyOfRange(e,s,s+o))}return t}static textCompaction(e,t,n){let r=new Int32Array(2*(e[0]-t)),i=new Int32Array(2*(e[0]-t)),s=0,o=!1;for(;t<e[0]&&!o;){let a=e[t++];if(a<O.TEXT_COMPACTION_MODE_LATCH)r[s]=a/30,r[s+1]=a%30,s+=2;else switch(a){case O.TEXT_COMPACTION_MODE_LATCH:r[s++]=O.TEXT_COMPACTION_MODE_LATCH;break;case O.BYTE_COMPACTION_MODE_LATCH:case O.BYTE_COMPACTION_MODE_LATCH_6:case O.NUMERIC_COMPACTION_MODE_LATCH:case O.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case O.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case O.MACRO_PDF417_TERMINATOR:t--,o=!0;break;case O.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r[s]=O.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,a=e[t++],i[s]=a,s++}}return O.decodeTextCompaction(r,i,s,n),t}static decodeTextCompaction(e,t,n,r){let i=Be.ALPHA,s=Be.ALPHA,o=0;for(;o<n;){let a=e[o],c="";switch(i){case Be.ALPHA:if(a<26)c=String.fromCharCode(65+a);else switch(a){case 26:c=" ";break;case O.LL:i=Be.LOWER;break;case O.ML:i=Be.MIXED;break;case O.PS:s=i,i=Be.PUNCT_SHIFT;break;case O.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[o]);break;case O.TEXT_COMPACTION_MODE_LATCH:i=Be.ALPHA}break;case Be.LOWER:if(a<26)c=String.fromCharCode(97+a);else switch(a){case 26:c=" ";break;case O.AS:s=i,i=Be.ALPHA_SHIFT;break;case O.ML:i=Be.MIXED;break;case O.PS:s=i,i=Be.PUNCT_SHIFT;break;case O.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[o]);break;case O.TEXT_COMPACTION_MODE_LATCH:i=Be.ALPHA}break;case Be.MIXED:if(a<O.PL)c=O.MIXED_CHARS[a];else switch(a){case O.PL:i=Be.PUNCT;break;case 26:c=" ";break;case O.LL:i=Be.LOWER;break;case O.AL:i=Be.ALPHA;break;case O.PS:s=i,i=Be.PUNCT_SHIFT;break;case O.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[o]);break;case O.TEXT_COMPACTION_MODE_LATCH:i=Be.ALPHA}break;case Be.PUNCT:if(a<O.PAL)c=O.PUNCT_CHARS[a];else switch(a){case O.PAL:i=Be.ALPHA;break;case O.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[o]);break;case O.TEXT_COMPACTION_MODE_LATCH:i=Be.ALPHA}break;case Be.ALPHA_SHIFT:if(i=s,a<26)c=String.fromCharCode(65+a);else switch(a){case 26:c=" ";break;case O.TEXT_COMPACTION_MODE_LATCH:i=Be.ALPHA}break;case Be.PUNCT_SHIFT:if(i=s,a<O.PAL)c=O.PUNCT_CHARS[a];else switch(a){case O.PAL:i=Be.ALPHA;break;case O.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[o]);break;case O.TEXT_COMPACTION_MODE_LATCH:i=Be.ALPHA}}""!==c&&r.append(c),o++}}static byteCompaction(e,t,n,r,i){let s=new Tr,o=0,a=0,c=!1;switch(e){case O.BYTE_COMPACTION_MODE_LATCH:let u=new Int32Array(6),g=t[r++];for(;r<t[0]&&!c;)switch(u[o++]=g,a=900*a+g,g=t[r++],g){case O.TEXT_COMPACTION_MODE_LATCH:case O.BYTE_COMPACTION_MODE_LATCH:case O.NUMERIC_COMPACTION_MODE_LATCH:case O.BYTE_COMPACTION_MODE_LATCH_6:case O.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case O.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case O.MACRO_PDF417_TERMINATOR:r--,c=!0;break;default:if(o%5==0&&o>0){for(let A=0;A<6;++A)s.write(Number($t(a)>>$t(8*(5-A))));a=0,o=0}}r===t[0]&&g<O.TEXT_COMPACTION_MODE_LATCH&&(u[o++]=g);for(let A=0;A<o;A++)s.write(u[A]);break;case O.BYTE_COMPACTION_MODE_LATCH_6:for(;r<t[0]&&!c;){let A=t[r++];if(A<O.TEXT_COMPACTION_MODE_LATCH)o++,a=900*a+A;else switch(A){case O.TEXT_COMPACTION_MODE_LATCH:case O.BYTE_COMPACTION_MODE_LATCH:case O.NUMERIC_COMPACTION_MODE_LATCH:case O.BYTE_COMPACTION_MODE_LATCH_6:case O.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case O.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case O.MACRO_PDF417_TERMINATOR:r--,c=!0}if(o%5==0&&o>0){for(let p=0;p<6;++p)s.write(Number($t(a)>>$t(8*(5-p))));a=0,o=0}}}return i.append(rt.decode(s.toByteArray(),n)),r}static numericCompaction(e,t,n){let r=0,i=!1,s=new Int32Array(O.MAX_NUMERIC_CODEWORDS);for(;t<e[0]&&!i;){let o=e[t++];if(t===e[0]&&(i=!0),o<O.TEXT_COMPACTION_MODE_LATCH)s[r]=o,r++;else switch(o){case O.TEXT_COMPACTION_MODE_LATCH:case O.BYTE_COMPACTION_MODE_LATCH:case O.BYTE_COMPACTION_MODE_LATCH_6:case O.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case O.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case O.MACRO_PDF417_TERMINATOR:t--,i=!0}(r%O.MAX_NUMERIC_CODEWORDS==0||o===O.NUMERIC_COMPACTION_MODE_LATCH||i)&&r>0&&(n.append(O.decodeBase900toBase10(s,r)),r=0)}return t}static decodeBase900toBase10(e,t){let n=$t(0);for(let i=0;i<t;i++)n+=O.EXP900[t-i-1]*$t(e[i]);let r=n.toString();if("1"!==r.charAt(0))throw new H;return r.substring(1)}}O.TEXT_COMPACTION_MODE_LATCH=900,O.BYTE_COMPACTION_MODE_LATCH=901,O.NUMERIC_COMPACTION_MODE_LATCH=902,O.BYTE_COMPACTION_MODE_LATCH_6=924,O.ECI_USER_DEFINED=925,O.ECI_GENERAL_PURPOSE=926,O.ECI_CHARSET=927,O.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,O.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,O.MACRO_PDF417_TERMINATOR=922,O.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,O.MAX_NUMERIC_CODEWORDS=15,O.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,O.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,O.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,O.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,O.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,O.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,O.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,O.PL=25,O.LL=27,O.AS=27,O.ML=28,O.AL=28,O.PS=29,O.PAL=29,O.PUNCT_CHARS=";<>@[\\]_`~!\r\t,:\n-.$/\"|*()?{}'",O.MIXED_CHARS="0123456789&\r\t,:#-.$/+%*=^",O.EXP900=qn()?function Sr(){let l=[];l[0]=$t(1);let e=$t(900);l[1]=e;for(let t=2;t<16;t++)l[t]=l[t-1]*e;return l}():[],O.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Ae{constructor(){}static decode(e,t,n,r,i,s,o){let g,a=new rn(e,t,n,r,i),c=null,u=null;for(let I=!0;;I=!1){if(null!=t&&(c=Ae.getRowIndicatorColumn(e,a,t,!0,s,o)),null!=r&&(u=Ae.getRowIndicatorColumn(e,a,r,!1,s,o)),g=Ae.merge(c,u),null==g)throw S.getNotFoundInstance();let y=g.getBoundingBox();if(!I||null==y||!(y.getMinY()<a.getMinY()||y.getMaxY()>a.getMaxY()))break;a=y}g.setBoundingBox(a);let A=g.getBarcodeColumnCount()+1;g.setDetectionResultColumn(0,c),g.setDetectionResultColumn(A,u);let p=null!=c;for(let I=1;I<=A;I++){let b,y=p?I:A-I;if(void 0!==g.getDetectionResultColumn(y))continue;b=0===y||y===A?new Zn(a,0===y):new Xn(a),g.setDetectionResultColumn(y,b);let M=-1,U=M;for(let Y=a.getMinY();Y<=a.getMaxY();Y++){if(M=Ae.getStartColumn(g,y,Y,p),M<0||M>a.getMaxX()){if(-1===U)continue;M=U}let L=Ae.detectCodeword(e,a.getMinX(),a.getMaxX(),p,M,Y,s,o);null!=L&&(b.setCodeword(Y,L),U=M,s=Math.min(s,L.getWidth()),o=Math.max(o,L.getWidth()))}}return Ae.createDecoderResult(g)}static merge(e,t){if(null==e&&null==t)return null;let n=Ae.getBarcodeMetadata(e,t);if(null==n)return null;let r=rn.merge(Ae.adjustBoundingBox(e),Ae.adjustBoundingBox(t));return new wn(n,r)}static adjustBoundingBox(e){if(null==e)return null;let t=e.getRowHeights();if(null==t)return null;let n=Ae.getMax(t),r=0;for(let o of t)if(r+=n-o,o>0)break;let i=e.getCodewords();for(let o=0;r>0&&null==i[o];o++)r--;let s=0;for(let o=t.length-1;o>=0&&(s+=n-t[o],!(t[o]>0));o--);for(let o=i.length-1;s>0&&null==i[o];o--)s--;return e.getBoundingBox().addMissingRows(r,s,e.isLeft())}static getMax(e){let t=-1;for(let n of e)t=Math.max(t,n);return t}static getBarcodeMetadata(e,t){let n,r;return null==e||null==(n=e.getBarcodeMetadata())?null==t?null:t.getBarcodeMetadata():null==t||null==(r=t.getBarcodeMetadata())?n:n.getColumnCount()!==r.getColumnCount()&&n.getErrorCorrectionLevel()!==r.getErrorCorrectionLevel()&&n.getRowCount()!==r.getRowCount()?null:n}static getRowIndicatorColumn(e,t,n,r,i,s){let o=new Zn(t,r);for(let a=0;a<2;a++){let c=0===a?1:-1,u=Math.trunc(Math.trunc(n.getX()));for(let g=Math.trunc(Math.trunc(n.getY()));g<=t.getMaxY()&&g>=t.getMinY();g+=c){let A=Ae.detectCodeword(e,0,e.getWidth(),r,u,g,i,s);null!=A&&(o.setCodeword(g,A),u=r?A.getStartX():A.getEndX())}}return o}static adjustCodewordCount(e,t){let n=t[0][1],r=n.getValue(),i=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-Ae.getNumberOfECCodeWords(e.getBarcodeECLevel());if(0===r.length){if(i<1||i>oe.MAX_CODEWORDS_IN_BARCODE)throw S.getNotFoundInstance();n.setValue(i)}else r[0]!==i&&n.setValue(i)}static createDecoderResult(e){let t=Ae.createBarcodeMatrix(e);Ae.adjustCodewordCount(e,t);let n=new Array,r=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),i=[],s=new Array;for(let a=0;a<e.getBarcodeRowCount();a++)for(let c=0;c<e.getBarcodeColumnCount();c++){let u=t[a][c+1].getValue(),g=a*e.getBarcodeColumnCount()+c;0===u.length?n.push(g):1===u.length?r[g]=u[0]:(s.push(g),i.push(u))}let o=new Array(i.length);for(let a=0;a<o.length;a++)o[a]=i[a];return Ae.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),r,oe.toIntArray(n),oe.toIntArray(s),o)}static createDecoderResultFromAmbiguousValues(e,t,n,r,i){let s=new Int32Array(r.length),o=100;for(;o-- >0;){for(let a=0;a<s.length;a++)t[r[a]]=i[a][s[a]];try{return Ae.decodeCodewords(t,e,n)}catch(a){if(!(a instanceof ze))throw a}if(0===s.length)throw ze.getChecksumInstance();for(let a=0;a<s.length;a++){if(s[a]<i[a].length-1){s[a]++;break}if(s[a]=0,a===s.length-1)throw ze.getChecksumInstance()}}throw ze.getChecksumInstance()}static createBarcodeMatrix(e){let t=Array.from({length:e.getBarcodeRowCount()},()=>new Array(e.getBarcodeColumnCount()+2));for(let r=0;r<t.length;r++)for(let i=0;i<t[r].length;i++)t[r][i]=new xn;let n=0;for(let r of e.getDetectionResultColumns()){if(null!=r)for(let i of r.getCodewords())if(null!=i){let s=i.getRowNumber();if(s>=0){if(s>=t.length)continue;t[s][n].setValue(i.getValue())}}n++}return t}static isValidBarcodeColumn(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1}static getStartColumn(e,t,n,r){let i=r?1:-1,s=null;if(Ae.isValidBarcodeColumn(e,t-i)&&(s=e.getDetectionResultColumn(t-i).getCodeword(n)),null!=s)return r?s.getEndX():s.getStartX();if(s=e.getDetectionResultColumn(t).getCodewordNearby(n),null!=s)return r?s.getStartX():s.getEndX();if(Ae.isValidBarcodeColumn(e,t-i)&&(s=e.getDetectionResultColumn(t-i).getCodewordNearby(n)),null!=s)return r?s.getEndX():s.getStartX();let o=0;for(;Ae.isValidBarcodeColumn(e,t-i);){t-=i;for(let a of e.getDetectionResultColumn(t).getCodewords())if(null!=a)return(r?a.getEndX():a.getStartX())+i*o*(a.getEndX()-a.getStartX());o++}return r?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()}static detectCodeword(e,t,n,r,i,s,o,a){i=Ae.adjustCodewordStartColumn(e,t,n,r,i,s);let c=Ae.getModuleBitCount(e,t,n,r,i,s);if(null==c)return null;let u,g=J.sum(c);if(r)u=i+g;else{for(let I=0;I<c.length/2;I++){let y=c[I];c[I]=c[c.length-1-I],c[c.length-1-I]=y}u=i,i=u-g}if(!Ae.checkCodewordSkew(g,o,a))return null;let A=mt.getDecodedValue(c),p=oe.getCodeword(A);return-1===p?null:new mr(i,u,Ae.getCodewordBucketNumber(A),p)}static getModuleBitCount(e,t,n,r,i,s){let o=i,a=new Int32Array(8),c=0,u=r?1:-1,g=r;for(;(r?o<n:o>=t)&&c<a.length;)e.get(o,s)===g?(a[c]++,o+=u):(c++,g=!g);return c===a.length||o===(r?n:t)&&c===a.length-1?a:null}static getNumberOfECCodeWords(e){return 2<<e}static adjustCodewordStartColumn(e,t,n,r,i,s){let o=i,a=r?-1:1;for(let c=0;c<2;c++){for(;(r?o>=t:o<n)&&r===e.get(o,s);){if(Math.abs(i-o)>Ae.CODEWORD_SKEW_SIZE)return i;o+=a}a=-a,r=!r}return o}static checkCodewordSkew(e,t,n){return t-Ae.CODEWORD_SKEW_SIZE<=e&&e<=n+Ae.CODEWORD_SKEW_SIZE}static decodeCodewords(e,t,n){if(0===e.length)throw H.getFormatInstance();let r=1<<t+1,i=Ae.correctErrors(e,n,r);Ae.verifyCodewordCount(e,r);let s=O.decode(e,""+t);return s.setErrorsCorrected(i),s.setErasures(n.length),s}static correctErrors(e,t,n){if(null!=t&&t.length>n/2+Ae.MAX_ERRORS||n<0||n>Ae.MAX_EC_CODEWORDS)throw ze.getChecksumInstance();return Ae.errorCorrection.decode(e,n,t)}static verifyCodewordCount(e,t){if(e.length<4)throw H.getFormatInstance();let n=e[0];if(n>e.length)throw H.getFormatInstance();if(0===n){if(!(t<e.length))throw H.getFormatInstance();e[0]=e.length-t}}static getBitCountForCodeword(e){let t=new Int32Array(8),n=0,r=t.length-1;for(;!((1&e)!==n&&(n=1&e,r--,r<0));)t[r]++,e>>=1;return t}static getCodewordBucketNumber(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)}static getCodewordBucketNumber_number(e){return Ae.getCodewordBucketNumber(Ae.getBitCountForCodeword(e))}static getCodewordBucketNumber_Int32Array(e){return(e[0]-e[2]+e[4]-e[6]+9)%9}static toString(e){let t=new gn;for(let n=0;n<e.length;n++){t.format("Row %2d: ",n);for(let r=0;r<e[n].length;r++){let i=e[n][r];0===i.getValue().length?t.format("        ",null):t.format("%4d(%2d)",i.getValue()[0],i.getConfidence(i.getValue()[0]))}t.format("%n")}return t.toString()}}Ae.CODEWORD_SKEW_SIZE=2,Ae.MAX_ERRORS=3,Ae.MAX_EC_CODEWORDS=512,Ae.errorCorrection=new Yn;class ut{decode(e,t=null){let n=ut.decode(e,t,!1);if(null==n||0===n.length||null==n[0])throw S.getNotFoundInstance();return n[0]}decodeMultiple(e,t=null){try{return ut.decode(e,t,!0)}catch(n){throw n instanceof H||n instanceof ze?S.getNotFoundInstance():n}}static decode(e,t,n){const r=new Array,i=we.detectMultiple(e,t,n);for(const s of i.getPoints()){const o=Ae.decode(i.getBits(),s[4],s[5],s[6],s[7],ut.getMinCodewordWidth(s),ut.getMaxCodewordWidth(s)),a=new ge(o.getText(),o.getRawBytes(),void 0,s,K.PDF_417);a.putMetadata(he.ERROR_CORRECTION_LEVEL,o.getECLevel());const c=o.getOther();null!=c&&a.putMetadata(he.PDF417_EXTRA_METADATA,c),r.push(a)}return r.map(s=>s)}static getMaxWidth(e,t){return null==e||null==t?0:Math.trunc(Math.abs(e.getX()-t.getX()))}static getMinWidth(e,t){return null==e||null==t?ae.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))}static getMaxCodewordWidth(e){return Math.floor(Math.max(Math.max(ut.getMaxWidth(e[0],e[4]),ut.getMaxWidth(e[6],e[2])*oe.MODULES_IN_CODEWORD/oe.MODULES_IN_STOP_PATTERN),Math.max(ut.getMaxWidth(e[1],e[5]),ut.getMaxWidth(e[7],e[3])*oe.MODULES_IN_CODEWORD/oe.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(e){return Math.floor(Math.min(Math.min(ut.getMinWidth(e[0],e[4]),ut.getMinWidth(e[6],e[2])*oe.MODULES_IN_CODEWORD/oe.MODULES_IN_STOP_PATTERN),Math.min(ut.getMinWidth(e[1],e[5]),ut.getMinWidth(e[7],e[3])*oe.MODULES_IN_CODEWORD/oe.MODULES_IN_STOP_PATTERN)))}reset(){}}let Pn=(()=>{class l extends ue{}return l.kind="ReaderException",l})();class Jn{constructor(e,t){this.verbose=!0===e,t&&this.setHints(t)}decode(e,t){return t&&this.setHints(t),this.decodeInternal(e)}decodeWithState(e){return null==this.readers&&this.setHints(null),this.decodeInternal(e)}setHints(e){this.hints=e;const t=!k(e)&&!0===e.get(se.TRY_HARDER),n=k(e)?null:e.get(se.POSSIBLE_FORMATS),r=new Array;if(!k(n)){const i=n.some(s=>s===K.UPC_A||s===K.UPC_E||s===K.EAN_13||s===K.EAN_8||s===K.CODABAR||s===K.CODE_39||s===K.CODE_93||s===K.CODE_128||s===K.ITF||s===K.RSS_14||s===K.RSS_EXPANDED);i&&!t&&r.push(new sn(e,this.verbose)),n.includes(K.QR_CODE)&&r.push(new Jt),n.includes(K.DATA_MATRIX)&&r.push(new pn),n.includes(K.AZTEC)&&r.push(new be),n.includes(K.PDF_417)&&r.push(new ut),i&&t&&r.push(new sn(e,this.verbose))}0===r.length&&(t||r.push(new sn(e,this.verbose)),r.push(new Jt),r.push(new pn),r.push(new be),r.push(new ut),t&&r.push(new sn(e,this.verbose))),this.readers=r}reset(){if(null!==this.readers)for(const e of this.readers)e.reset()}decodeInternal(e){if(null===this.readers)throw new Pn("No readers where selected, nothing can be read.");for(const t of this.readers)try{return t.decode(e,this.hints)}catch(n){if(n instanceof Pn)continue}throw new S("No MultiFormat Readers were able to detect the code.")}}var $n=function(l){return l[l.ERROR_CORRECTION=0]="ERROR_CORRECTION",l[l.CHARACTER_SET=1]="CHARACTER_SET",l[l.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",l[l.MIN_SIZE=3]="MIN_SIZE",l[l.MAX_SIZE=4]="MAX_SIZE",l[l.MARGIN=5]="MARGIN",l[l.PDF417_COMPACT=6]="PDF417_COMPACT",l[l.PDF417_COMPACTION=7]="PDF417_COMPACTION",l[l.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",l[l.AZTEC_LAYERS=9]="AZTEC_LAYERS",l[l.QR_VERSION=10]="QR_VERSION",l}($n||{}),tt=$n;class Fn{constructor(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new it(e,Int32Array.from([1])))}buildGenerator(e){const t=this.cachedGenerators;if(e>=t.length){let n=t[t.length-1];const r=this.field;for(let i=t.length;i<=e;i++){const s=n.multiply(new it(r,Int32Array.from([1,r.exp(i-1+r.getGeneratorBase())])));t.push(s),n=s}}return t[e]}encode(e,t){if(0===t)throw new Z("No error correction bytes");const n=e.length-t;if(n<=0)throw new Z("No data bytes provided");const r=this.buildGenerator(t),i=new Int32Array(n);Ee.arraycopy(e,0,i,0,n);let s=new it(this.field,i);s=s.multiplyByMonomial(t,1);const a=s.divide(r)[1].getCoefficients(),c=t-a.length;for(let u=0;u<c;u++)e[n+u]=0;Ee.arraycopy(a,0,e,n+c,a.length)}}let on=(()=>{class l{constructor(){}static applyMaskPenaltyRule1(t){return l.applyMaskPenaltyRule1Internal(t,!0)+l.applyMaskPenaltyRule1Internal(t,!1)}static applyMaskPenaltyRule2(t){let n=0;const r=t.getArray(),i=t.getWidth(),s=t.getHeight();for(let o=0;o<s-1;o++){const a=r[o];for(let c=0;c<i-1;c++){const u=a[c];u===a[c+1]&&u===r[o+1][c]&&u===r[o+1][c+1]&&n++}}return l.N2*n}static applyMaskPenaltyRule3(t){let n=0;const r=t.getArray(),i=t.getWidth(),s=t.getHeight();for(let o=0;o<s;o++)for(let a=0;a<i;a++){const c=r[o];a+6<i&&1===c[a]&&0===c[a+1]&&1===c[a+2]&&1===c[a+3]&&1===c[a+4]&&0===c[a+5]&&1===c[a+6]&&(l.isWhiteHorizontal(c,a-4,a)||l.isWhiteHorizontal(c,a+7,a+11))&&n++,o+6<s&&1===r[o][a]&&0===r[o+1][a]&&1===r[o+2][a]&&1===r[o+3][a]&&1===r[o+4][a]&&0===r[o+5][a]&&1===r[o+6][a]&&(l.isWhiteVertical(r,a,o-4,o)||l.isWhiteVertical(r,a,o+7,o+11))&&n++}return n*l.N3}static isWhiteHorizontal(t,n,r){n=Math.max(n,0),r=Math.min(r,t.length);for(let i=n;i<r;i++)if(1===t[i])return!1;return!0}static isWhiteVertical(t,n,r,i){r=Math.max(r,0),i=Math.min(i,t.length);for(let s=r;s<i;s++)if(1===t[s][n])return!1;return!0}static applyMaskPenaltyRule4(t){let n=0;const r=t.getArray(),i=t.getWidth(),s=t.getHeight();for(let c=0;c<s;c++){const u=r[c];for(let g=0;g<i;g++)1===u[g]&&n++}const o=t.getHeight()*t.getWidth();return Math.floor(10*Math.abs(2*n-o)/o)*l.N4}static getDataMaskBit(t,n,r){let i,s;switch(t){case 0:i=r+n&1;break;case 1:i=1&r;break;case 2:i=n%3;break;case 3:i=(r+n)%3;break;case 4:i=Math.floor(r/2)+Math.floor(n/3)&1;break;case 5:s=r*n,i=(1&s)+s%3;break;case 6:s=r*n,i=(1&s)+s%3&1;break;case 7:s=r*n,i=s%3+(r+n&1)&1;break;default:throw new Z("Invalid mask pattern: "+t)}return 0===i}static applyMaskPenaltyRule1Internal(t,n){let r=0;const i=n?t.getHeight():t.getWidth(),s=n?t.getWidth():t.getHeight(),o=t.getArray();for(let a=0;a<i;a++){let c=0,u=-1;for(let g=0;g<s;g++){const A=n?o[a][g]:o[g][a];A===u?c++:(c>=5&&(r+=l.N1+(c-5)),c=1,u=A)}c>=5&&(r+=l.N1+(c-5))}return r}}return l.N1=3,l.N2=3,l.N3=40,l.N4=10,l})();class Tn{constructor(e,t){this.width=e,this.height=t;const n=new Array(t);for(let r=0;r!==t;r++)n[r]=new Uint8Array(e);this.bytes=n}getHeight(){return this.height}getWidth(){return this.width}get(e,t){return this.bytes[t][e]}getArray(){return this.bytes}setNumber(e,t,n){this.bytes[t][e]=n}setBoolean(e,t,n){this.bytes[t][e]=n?1:0}clear(e){for(const t of this.bytes)Ye.fill(t,e)}equals(e){if(!(e instanceof Tn))return!1;const t=e;if(this.width!==t.width||this.height!==t.height)return!1;for(let n=0,r=this.height;n<r;++n){const i=this.bytes[n],s=t.bytes[n];for(let o=0,a=this.width;o<a;++o)if(i[o]!==s[o])return!1}return!0}toString(){const e=new Ie;for(let t=0,n=this.height;t<n;++t){const r=this.bytes[t];for(let i=0,s=this.width;i<s;++i)switch(r[i]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ")}e.append("\n")}return e.toString()}}let Sn=(()=>{class l{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const t=new Ie;return t.append("<<\n"),t.append(" mode: "),t.append(this.mode?this.mode.toString():"null"),t.append("\n ecLevel: "),t.append(this.ecLevel?this.ecLevel.toString():"null"),t.append("\n version: "),t.append(this.version?this.version.toString():"null"),t.append("\n maskPattern: "),t.append(this.maskPattern.toString()),this.matrix?(t.append("\n matrix:\n"),t.append(this.matrix.toString())):t.append("\n matrix: null\n"),t.append(">>\n"),t.toString()}setMode(t){this.mode=t}setECLevel(t){this.ecLevel=t}setVersion(t){this.version=t}setMaskPattern(t){this.maskPattern=t}setMatrix(t){this.matrix=t}static isValidMaskPattern(t){return t>=0&&t<l.NUM_MASK_PATTERNS}}return l.NUM_MASK_PATTERNS=8,l})(),Ve=(()=>{class l extends ue{}return l.kind="WriterException",l})();class ie{constructor(){}static clearMatrix(e){e.clear(255)}static buildMatrix(e,t,n,r,i){ie.clearMatrix(i),ie.embedBasicPatterns(n,i),ie.embedTypeInfo(t,r,i),ie.maybeEmbedVersionInfo(n,i),ie.embedDataBits(e,r,i)}static embedBasicPatterns(e,t){ie.embedPositionDetectionPatternsAndSeparators(t),ie.embedDarkDotAtLeftBottomCorner(t),ie.maybeEmbedPositionAdjustmentPatterns(e,t),ie.embedTimingPatterns(t)}static embedTypeInfo(e,t,n){const r=new W;ie.makeTypeInfoBits(e,t,r);for(let i=0,s=r.getSize();i<s;++i){const o=r.get(r.getSize()-1-i),a=ie.TYPE_INFO_COORDINATES[i];if(n.setBoolean(a[0],a[1],o),i<8){const g=n.getWidth()-i-1;n.setBoolean(g,8,o)}else{const A=n.getHeight()-7+(i-8);n.setBoolean(8,A,o)}}}static maybeEmbedVersionInfo(e,t){if(e.getVersionNumber()<7)return;const n=new W;ie.makeVersionInfoBits(e,n);let r=17;for(let i=0;i<6;++i)for(let s=0;s<3;++s){const o=n.get(r);r--,t.setBoolean(i,t.getHeight()-11+s,o),t.setBoolean(t.getHeight()-11+s,i,o)}}static embedDataBits(e,t,n){let r=0,i=-1,s=n.getWidth()-1,o=n.getHeight()-1;for(;s>0;){for(6===s&&(s-=1);o>=0&&o<n.getHeight();){for(let a=0;a<2;++a){const c=s-a;if(!ie.isEmpty(n.get(c,o)))continue;let u;r<e.getSize()?(u=e.get(r),++r):u=!1,255!==t&&on.getDataMaskBit(t,c,o)&&(u=!u),n.setBoolean(c,o,u)}o+=i}i=-i,o+=i,s-=2}if(r!==e.getSize())throw new Ve("Not all bits consumed: "+r+"/"+e.getSize())}static findMSBSet(e){return 32-ae.numberOfLeadingZeros(e)}static calculateBCHCode(e,t){if(0===t)throw new Z("0 polynomial");const n=ie.findMSBSet(t);for(e<<=n-1;ie.findMSBSet(e)>=n;)e^=t<<ie.findMSBSet(e)-n;return e}static makeTypeInfoBits(e,t,n){if(!Sn.isValidMaskPattern(t))throw new Ve("Invalid mask pattern");const r=e.getBits()<<3|t;n.appendBits(r,5);const i=ie.calculateBCHCode(r,ie.TYPE_INFO_POLY);n.appendBits(i,10);const s=new W;if(s.appendBits(ie.TYPE_INFO_MASK_PATTERN,15),n.xor(s),15!==n.getSize())throw new Ve("should not happen but we got: "+n.getSize())}static makeVersionInfoBits(e,t){t.appendBits(e.getVersionNumber(),6);const n=ie.calculateBCHCode(e.getVersionNumber(),ie.VERSION_INFO_POLY);if(t.appendBits(n,12),18!==t.getSize())throw new Ve("should not happen but we got: "+t.getSize())}static isEmpty(e){return 255===e}static embedTimingPatterns(e){for(let t=8;t<e.getWidth()-8;++t){const n=(t+1)%2;ie.isEmpty(e.get(t,6))&&e.setNumber(t,6,n),ie.isEmpty(e.get(6,t))&&e.setNumber(6,t,n)}}static embedDarkDotAtLeftBottomCorner(e){if(0===e.get(8,e.getHeight()-8))throw new Ve;e.setNumber(8,e.getHeight()-8,1)}static embedHorizontalSeparationPattern(e,t,n){for(let r=0;r<8;++r){if(!ie.isEmpty(n.get(e+r,t)))throw new Ve;n.setNumber(e+r,t,0)}}static embedVerticalSeparationPattern(e,t,n){for(let r=0;r<7;++r){if(!ie.isEmpty(n.get(e,t+r)))throw new Ve;n.setNumber(e,t+r,0)}}static embedPositionAdjustmentPattern(e,t,n){for(let r=0;r<5;++r){const i=ie.POSITION_ADJUSTMENT_PATTERN[r];for(let s=0;s<5;++s)n.setNumber(e+s,t+r,i[s])}}static embedPositionDetectionPattern(e,t,n){for(let r=0;r<7;++r){const i=ie.POSITION_DETECTION_PATTERN[r];for(let s=0;s<7;++s)n.setNumber(e+s,t+r,i[s])}}static embedPositionDetectionPatternsAndSeparators(e){const t=ie.POSITION_DETECTION_PATTERN[0].length;ie.embedPositionDetectionPattern(0,0,e),ie.embedPositionDetectionPattern(e.getWidth()-t,0,e),ie.embedPositionDetectionPattern(0,e.getWidth()-t,e);ie.embedHorizontalSeparationPattern(0,7,e),ie.embedHorizontalSeparationPattern(e.getWidth()-8,7,e),ie.embedHorizontalSeparationPattern(0,e.getWidth()-8,e);ie.embedVerticalSeparationPattern(7,0,e),ie.embedVerticalSeparationPattern(e.getHeight()-7-1,0,e),ie.embedVerticalSeparationPattern(7,e.getHeight()-7,e)}static maybeEmbedPositionAdjustmentPatterns(e,t){if(e.getVersionNumber()<2)return;const n=e.getVersionNumber()-1,r=ie.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n];for(let i=0,s=r.length;i!==s;i++){const o=r[i];if(o>=0)for(let a=0;a!==s;a++){const c=r[a];c>=0&&ie.isEmpty(t.get(c,o))&&ie.embedPositionAdjustmentPattern(c-2,o-2,t)}}}}ie.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),ie.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),ie.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),ie.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),ie.VERSION_INFO_POLY=7973,ie.TYPE_INFO_POLY=1335,ie.TYPE_INFO_MASK_PATTERN=21522;class Or{constructor(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class We{constructor(){}static calculateMaskPenalty(e){return on.applyMaskPenaltyRule1(e)+on.applyMaskPenaltyRule2(e)+on.applyMaskPenaltyRule3(e)+on.applyMaskPenaltyRule4(e)}static encode(e,t,n=null){let r=We.DEFAULT_BYTE_MODE_ENCODING;const i=null!==n&&void 0!==n.get(tt.CHARACTER_SET);i&&(r=n.get(tt.CHARACTER_SET).toString());const s=this.chooseMode(e,r),o=new W;if(s===te.BYTE&&(i||We.DEFAULT_BYTE_MODE_ENCODING!==r)){const Y=z.getCharacterSetECIByName(r);void 0!==Y&&this.appendECI(Y,o)}this.appendModeInfo(s,o);const a=new W;let c;if(this.appendBytes(e,s,a,r),null!==n&&void 0!==n.get(tt.QR_VERSION)){const Y=Number.parseInt(n.get(tt.QR_VERSION).toString(),10);c=$.getVersionForNumber(Y);const L=this.calculateBitsNeeded(s,o,a,c);if(!this.willFit(L,c,t))throw new Ve("Data too big for requested version")}else c=this.recommendVersion(t,s,o,a);const u=new W;u.appendBitArray(o);const g=s===te.BYTE?a.getSizeInBytes():e.length;this.appendLengthInfo(g,c,s,u),u.appendBitArray(a);const A=c.getECBlocksForLevel(t),p=c.getTotalCodewords()-A.getTotalECCodewords();this.terminateBits(p,u);const I=this.interleaveWithECBytes(u,c.getTotalCodewords(),p,A.getNumBlocks()),y=new Sn;y.setECLevel(t),y.setMode(s),y.setVersion(c);const b=c.getDimensionForVersion(),M=new Tn(b,b),U=this.chooseMaskPattern(I,t,c,M);return y.setMaskPattern(U),ie.buildMatrix(I,t,c,U,M),y.setMatrix(M),y}static recommendVersion(e,t,n,r){const i=this.calculateBitsNeeded(t,n,r,$.getVersionForNumber(1)),s=this.chooseVersion(i,e),o=this.calculateBitsNeeded(t,n,r,s);return this.chooseVersion(o,e)}static calculateBitsNeeded(e,t,n,r){return t.getSize()+e.getCharacterCountBits(r)+n.getSize()}static getAlphanumericCode(e){return e<We.ALPHANUMERIC_TABLE.length?We.ALPHANUMERIC_TABLE[e]:-1}static chooseMode(e,t=null){if(z.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return te.KANJI;let n=!1,r=!1;for(let i=0,s=e.length;i<s;++i){const o=e.charAt(i);if(We.isDigit(o))n=!0;else{if(-1===this.getAlphanumericCode(o.charCodeAt(0)))return te.BYTE;r=!0}}return r?te.ALPHANUMERIC:n?te.NUMERIC:te.BYTE}static isOnlyDoubleByteKanji(e){let t;try{t=rt.encode(e,z.SJIS)}catch{return!1}const n=t.length;if(n%2!=0)return!1;for(let r=0;r<n;r+=2){const i=255&t[r];if((i<129||i>159)&&(i<224||i>235))return!1}return!0}static chooseMaskPattern(e,t,n,r){let i=Number.MAX_SAFE_INTEGER,s=-1;for(let o=0;o<Sn.NUM_MASK_PATTERNS;o++){ie.buildMatrix(e,t,n,o,r);let a=this.calculateMaskPenalty(r);a<i&&(i=a,s=o)}return s}static chooseVersion(e,t){for(let n=1;n<=40;n++){const r=$.getVersionForNumber(n);if(We.willFit(e,r,t))return r}throw new Ve("Data too big")}static willFit(e,t,n){return t.getTotalCodewords()-t.getECBlocksForLevel(n).getTotalECCodewords()>=(e+7)/8}static terminateBits(e,t){const n=8*e;if(t.getSize()>n)throw new Ve("data bits cannot fit in the QR Code"+t.getSize()+" > "+n);for(let s=0;s<4&&t.getSize()<n;++s)t.appendBit(!1);const r=7&t.getSize();if(r>0)for(let s=r;s<8;s++)t.appendBit(!1);const i=e-t.getSizeInBytes();for(let s=0;s<i;++s)t.appendBits(1&s?17:236,8);if(t.getSize()!==n)throw new Ve("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(e,t,n,r,i,s){if(r>=n)throw new Ve("Block ID too large");const o=e%n,a=n-o,c=Math.floor(e/n),u=c+1,g=Math.floor(t/n),A=g+1,p=c-g,I=u-A;if(p!==I)throw new Ve("EC bytes mismatch");if(n!==a+o)throw new Ve("RS blocks mismatch");if(e!==(g+p)*a+(A+I)*o)throw new Ve("Total bytes mismatch");r<a?(i[0]=g,s[0]=p):(i[0]=A,s[0]=I)}static interleaveWithECBytes(e,t,n,r){if(e.getSizeInBytes()!==n)throw new Ve("Number of bits and data bytes does not match");let i=0,s=0,o=0;const a=new Array;for(let u=0;u<r;++u){const g=new Int32Array(1),A=new Int32Array(1);We.getNumDataBytesAndNumECBytesForBlockID(t,n,r,u,g,A);const p=g[0],I=new Uint8Array(p);e.toBytes(8*i,I,0,p);const y=We.generateECBytes(I,A[0]);a.push(new Or(I,y)),s=Math.max(s,p),o=Math.max(o,y.length),i+=g[0]}if(n!==i)throw new Ve("Data bytes does not match offset");const c=new W;for(let u=0;u<s;++u)for(const g of a){const A=g.getDataBytes();u<A.length&&c.appendBits(A[u],8)}for(let u=0;u<o;++u)for(const g of a){const A=g.getErrorCorrectionBytes();u<A.length&&c.appendBits(A[u],8)}if(t!==c.getSizeInBytes())throw new Ve("Interleaving error: "+t+" and "+c.getSizeInBytes()+" differ.");return c}static generateECBytes(e,t){const n=e.length,r=new Int32Array(n+t);for(let s=0;s<n;s++)r[s]=255&e[s];new Fn(le.QR_CODE_FIELD_256).encode(r,t);const i=new Uint8Array(t);for(let s=0;s<t;s++)i[s]=r[n+s];return i}static appendModeInfo(e,t){t.appendBits(e.getBits(),4)}static appendLengthInfo(e,t,n,r){const i=n.getCharacterCountBits(t);if(e>=1<<i)throw new Ve(e+" is bigger than "+((1<<i)-1));r.appendBits(e,i)}static appendBytes(e,t,n,r){switch(t){case te.NUMERIC:We.appendNumericBytes(e,n);break;case te.ALPHANUMERIC:We.appendAlphanumericBytes(e,n);break;case te.BYTE:We.append8BitBytes(e,n,r);break;case te.KANJI:We.appendKanjiBytes(e,n);break;default:throw new Ve("Invalid mode: "+t)}}static getDigit(e){return e.charCodeAt(0)-48}static isDigit(e){const t=We.getDigit(e);return t>=0&&t<=9}static appendNumericBytes(e,t){const n=e.length;let r=0;for(;r<n;){const i=We.getDigit(e.charAt(r));if(r+2<n){const s=We.getDigit(e.charAt(r+1)),o=We.getDigit(e.charAt(r+2));t.appendBits(100*i+10*s+o,10),r+=3}else if(r+1<n){const s=We.getDigit(e.charAt(r+1));t.appendBits(10*i+s,7),r+=2}else t.appendBits(i,4),r++}}static appendAlphanumericBytes(e,t){const n=e.length;let r=0;for(;r<n;){const i=We.getAlphanumericCode(e.charCodeAt(r));if(-1===i)throw new Ve;if(r+1<n){const s=We.getAlphanumericCode(e.charCodeAt(r+1));if(-1===s)throw new Ve;t.appendBits(45*i+s,11),r+=2}else t.appendBits(i,6),r++}}static append8BitBytes(e,t,n){let r;try{r=rt.encode(e,n)}catch(i){throw new Ve(i)}for(let i=0,s=r.length;i!==s;i++)t.appendBits(r[i],8)}static appendKanjiBytes(e,t){let n;try{n=rt.encode(e,z.SJIS)}catch(i){throw new Ve(i)}const r=n.length;for(let i=0;i<r;i+=2){const a=(255&n[i])<<8&4294967295|255&n[i+1];let c=-1;if(a>=33088&&a<=40956?c=a-33088:a>=57408&&a<=60351&&(c=a-49472),-1===c)throw new Ve("Invalid byte sequence");t.appendBits(192*(c>>8)+(255&c),13)}}static appendECI(e,t){t.appendBits(te.ECI.getBits(),4),t.appendBits(e.getValue(),8)}}We.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),We.DEFAULT_BYTE_MODE_ENCODING=z.UTF8.getName();let _r=(()=>{class l{write(t,n,r,i=null){if(0===t.length)throw new Z("Found empty contents");if(n<0||r<0)throw new Z("Requested dimensions are too small: "+n+"x"+r);let s=He.L,o=l.QUIET_ZONE_SIZE;null!==i&&(void 0!==i.get(tt.ERROR_CORRECTION)&&(s=He.fromString(i.get(tt.ERROR_CORRECTION).toString())),void 0!==i.get(tt.MARGIN)&&(o=Number.parseInt(i.get(tt.MARGIN).toString(),10)));const a=We.encode(t,s,i);return this.renderResult(a,n,r,o)}writeToDom(t,n,r,i,s=null){"string"==typeof t&&(t=document.querySelector(t));const o=this.write(n,r,i,s);t&&t.appendChild(o)}renderResult(t,n,r,i){const s=t.getMatrix();if(null===s)throw new ot;const o=s.getWidth(),a=s.getHeight(),c=o+2*i,u=a+2*i,g=Math.max(n,c),A=Math.max(r,u),p=Math.min(Math.floor(g/c),Math.floor(A/u)),I=Math.floor((g-o*p)/2),y=Math.floor((A-a*p)/2),b=this.createSVGElement(g,A);for(let M=0,U=y;M<a;M++,U+=p)for(let Y=0,L=I;Y<o;Y++,L+=p)if(1===s.get(Y,M)){const Ce=this.createSvgRectElement(L,U,p,p);b.appendChild(Ce)}return b}createSVGElement(t,n){const r=document.createElementNS(l.SVG_NS,"svg");return r.setAttributeNS(null,"height",t.toString()),r.setAttributeNS(null,"width",n.toString()),r}createSvgRectElement(t,n,r,i){const s=document.createElementNS(l.SVG_NS,"rect");return s.setAttributeNS(null,"x",t.toString()),s.setAttributeNS(null,"y",n.toString()),s.setAttributeNS(null,"height",r.toString()),s.setAttributeNS(null,"width",i.toString()),s.setAttributeNS(null,"fill","#000000"),s}}return l.QUIET_ZONE_SIZE=4,l.SVG_NS="http://www.w3.org/2000/svg",l})(),er=(()=>{class l{encode(t,n,r,i,s){if(0===t.length)throw new Z("Found empty contents");if(n!==K.QR_CODE)throw new Z("Can only encode QR_CODE, but got "+n);if(r<0||i<0)throw new Z(`Requested dimensions are too small: ${r}x${i}`);let o=He.L,a=l.QUIET_ZONE_SIZE;null!==s&&(void 0!==s.get(tt.ERROR_CORRECTION)&&(o=He.fromString(s.get(tt.ERROR_CORRECTION).toString())),void 0!==s.get(tt.MARGIN)&&(a=Number.parseInt(s.get(tt.MARGIN).toString(),10)));const c=We.encode(t,o,s);return l.renderResult(c,r,i,a)}static renderResult(t,n,r,i){const s=t.getMatrix();if(null===s)throw new ot;const o=s.getWidth(),a=s.getHeight(),c=o+2*i,u=a+2*i,g=Math.max(n,c),A=Math.max(r,u),p=Math.min(Math.floor(g/c),Math.floor(A/u)),I=Math.floor((g-o*p)/2),y=Math.floor((A-a*p)/2),b=new Xe(g,A);for(let M=0,U=y;M<a;M++,U+=p)for(let Y=0,L=I;Y<o;Y++,L+=p)1===s.get(Y,M)&&b.setRegion(L,U,p,p);return b}}return l.QUIET_ZONE_SIZE=4,l})();let Rr=(()=>{class l extends ee{constructor(t,n,r,i,s,o,a,c){if(super(o,a),this.yuvData=t,this.dataWidth=n,this.dataHeight=r,this.left=i,this.top=s,i+o>n||s+a>r)throw new Z("Crop rectangle does not fit within image data.");c&&this.reverseHorizontal(o,a)}getRow(t,n){if(t<0||t>=this.getHeight())throw new Z("Requested row is outside the image: "+t);const r=this.getWidth();return(null==n||n.length<r)&&(n=new Uint8ClampedArray(r)),Ee.arraycopy(this.yuvData,(t+this.top)*this.dataWidth+this.left,n,0,r),n}getMatrix(){const t=this.getWidth(),n=this.getHeight();if(t===this.dataWidth&&n===this.dataHeight)return this.yuvData;const r=t*n,i=new Uint8ClampedArray(r);let s=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return Ee.arraycopy(this.yuvData,s,i,0,r),i;for(let o=0;o<n;o++)Ee.arraycopy(this.yuvData,s,i,o*t,t),s+=this.dataWidth;return i}isCropSupported(){return!0}crop(t,n,r,i){return new l(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+n,r,i,!1)}renderThumbnail(){const t=this.getWidth()/l.THUMBNAIL_SCALE_FACTOR,n=this.getHeight()/l.THUMBNAIL_SCALE_FACTOR,r=new Int32Array(t*n),i=this.yuvData;let s=this.top*this.dataWidth+this.left;for(let o=0;o<n;o++){const a=o*t;for(let c=0;c<t;c++)r[a+c]=4278190080|65793*(255&i[s+c*l.THUMBNAIL_SCALE_FACTOR]);s+=this.dataWidth*l.THUMBNAIL_SCALE_FACTOR}return r}getThumbnailWidth(){return this.getWidth()/l.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/l.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(t,n){const r=this.yuvData;for(let i=0,s=this.top*this.dataWidth+this.left;i<n;i++,s+=this.dataWidth){const o=s+t/2;for(let a=s,c=s+t-1;a<o;a++,c--){const u=r[a];r[a]=r[c],r[c]=u}}}invert(){return new re(this)}}return l.THUMBNAIL_SCALE_FACTOR=2,l})();class kn extends ee{constructor(e,t,n,r,i,s,o){if(super(t,n),this.dataWidth=r,this.dataHeight=i,this.left=s,this.top=o,4===e.BYTES_PER_ELEMENT){const a=t*n,c=new Uint8ClampedArray(a);for(let u=0;u<a;u++){const g=e[u];c[u]=((g>>16&255)+(g>>7&510)+(255&g))/4&255}this.luminances=c}else this.luminances=e;if(void 0===r&&(this.dataWidth=t),void 0===i&&(this.dataHeight=n),void 0===s&&(this.left=0),void 0===o&&(this.top=0),this.left+t>this.dataWidth||this.top+n>this.dataHeight)throw new Z("Crop rectangle does not fit within image data.")}getRow(e,t){if(e<0||e>=this.getHeight())throw new Z("Requested row is outside the image: "+e);const n=this.getWidth();return(null==t||t.length<n)&&(t=new Uint8ClampedArray(n)),Ee.arraycopy(this.luminances,(e+this.top)*this.dataWidth+this.left,t,0,n),t}getMatrix(){const e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.luminances;const n=e*t,r=new Uint8ClampedArray(n);let i=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return Ee.arraycopy(this.luminances,i,r,0,n),r;for(let s=0;s<t;s++)Ee.arraycopy(this.luminances,i,r,s*e,e),i+=this.dataWidth;return r}isCropSupported(){return!0}crop(e,t,n,r){return new kn(this.luminances,n,r,this.dataWidth,this.dataHeight,this.left+e,this.top+t)}invert(){return new re(this)}}class tr extends z{static forName(e){return this.getCharacterSetECIByName(e)}}class Un{}Un.ISO_8859_1=z.ISO8859_1;class nr{isCompact(){return this.compact}setCompact(e){this.compact=e}getSize(){return this.size}setSize(e){this.size=e}getLayers(){return this.layers}setLayers(e){this.layers=e}getCodeWords(){return this.codeWords}setCodeWords(e){this.codeWords=e}getMatrix(){return this.matrix}setMatrix(e){this.matrix=e}}class rr{static singletonList(e){return[e]}static min(e,t){return e.sort(t)[0]}}class vr{constructor(e){this.previous=e}getPrevious(){return this.previous}}class an extends vr{constructor(e,t,n){super(e),this.value=t,this.bitCount=n}appendTo(e,t){e.appendBits(this.value,this.bitCount)}add(e,t){return new an(this,e,t)}addBinaryShift(e,t){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new an(this,e,t)}toString(){let e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+ae.toBinaryString(e|1<<this.bitCount).substring(1)+">"}}class Hn extends an{constructor(e,t,n){super(e,0,0),this.binaryShiftStart=t,this.binaryShiftByteCount=n}appendTo(e,t){for(let n=0;n<this.binaryShiftByteCount;n++)(0===n||31===n&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):e.appendBits(0===n?Math.min(this.binaryShiftByteCount,31):this.binaryShiftByteCount-31,5)),e.appendBits(t[this.binaryShiftStart+n],8)}addBinaryShift(e,t){return new Hn(this,e,t)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function An(l,e,t){return new an(l,e,t)}const Br=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Pr=new an(null,0,0),Vn=[Int32Array.from([0,327708,327710,327709,656318]),Int32Array.from([590318,0,327710,327709,656318]),Int32Array.from([262158,590300,0,590301,932798]),Int32Array.from([327709,327708,656318,0,327710]),Int32Array.from([327711,656380,656382,656381,0])];const sr=function Fr(l){for(let e of l)Ye.fill(e,-1);return l[0][4]=0,l[1][4]=0,l[1][0]=28,l[3][4]=0,l[2][4]=0,l[2][0]=15,l}(Ye.createInt32Array(6,6));class Vt{constructor(e,t,n,r){this.token=e,this.mode=t,this.binaryShiftByteCount=n,this.bitCount=r}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(e,t){let n=this.bitCount,r=this.token;if(e!==this.mode){let s=Vn[this.mode][e];r=An(r,65535&s,s>>16),n+=s>>16}let i=2===e?4:5;return r=An(r,t,i),new Vt(r,e,0,n+i)}shiftAndAppend(e,t){let n=this.token,r=2===this.mode?4:5;return n=An(n,sr[this.mode][e],r),n=An(n,t,5),new Vt(n,this.mode,0,this.bitCount+r+5)}addBinaryShiftChar(e){let t=this.token,n=this.mode,r=this.bitCount;if(4===this.mode||2===this.mode){let o=Vn[n][0];t=An(t,65535&o,o>>16),r+=o>>16,n=0}let s=new Vt(t,n,this.binaryShiftByteCount+1,r+(0===this.binaryShiftByteCount||31===this.binaryShiftByteCount?18:62===this.binaryShiftByteCount?9:8));return 2078===s.binaryShiftByteCount&&(s=s.endBinaryShift(e+1)),s}endBinaryShift(e){if(0===this.binaryShiftByteCount)return this;let t=this.token;return t=function Lr(l,e,t){return new Hn(l,e,t)}(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new Vt(t,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(e){let t=this.bitCount+(Vn[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=Vt.calculateBinaryShiftCost(e)-Vt.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount}toBitArray(e){let t=[];for(let r=this.endBinaryShift(e.length).token;null!==r;r=r.getPrevious())t.unshift(r);let n=new W;for(const r of t)r.appendTo(n,e);return n}toString(){return ne.format("%s bits=%d bytes=%d",Br[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0}}Vt.INITIAL_STATE=new Vt(Pr,0,0,0);const zn=function kr(l){const e=ne.getCharCode(" "),t=ne.getCharCode("."),n=ne.getCharCode(",");l[0][e]=1;const r=ne.getCharCode("Z"),i=ne.getCharCode("A");for(let A=i;A<=r;A++)l[0][A]=A-i+2;l[1][e]=1;const s=ne.getCharCode("z"),o=ne.getCharCode("a");for(let A=o;A<=s;A++)l[1][A]=A-o+2;l[2][e]=1;const a=ne.getCharCode("9"),c=ne.getCharCode("0");for(let A=c;A<=a;A++)l[2][A]=A-c+2;l[2][n]=12,l[2][t]=13;const u=["\0"," ","\x01","\x02","\x03","\x04","\x05","\x06","\x07","\b","\t","\n","\v","\f","\r","\x1b","\x1c","\x1d","\x1e","\x1f","@","\\","^","_","`","|","~","\x7f"];for(let A=0;A<u.length;A++)l[3][ne.getCharCode(u[A])]=A;const g=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let A=0;A<g.length;A++)ne.getCharCode(g[A])>0&&(l[4][ne.getCharCode(g[A])]=A);return l}(Ye.createInt32Array(5,256));class Cn{constructor(e){this.text=e}encode(){const e=ne.getCharCode(" "),t=ne.getCharCode("\n");let n=rr.singletonList(Vt.INITIAL_STATE);for(let i=0;i<this.text.length;i++){let s,o=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case ne.getCharCode("\r"):s=o===t?2:0;break;case ne.getCharCode("."):s=o===e?3:0;break;case ne.getCharCode(","):s=o===e?4:0;break;case ne.getCharCode(":"):s=o===e?5:0;break;default:s=0}s>0?(n=Cn.updateStateListForPair(n,i,s),i++):n=this.updateStateListForChar(n,i)}return rr.min(n,(i,s)=>i.getBitCount()-s.getBitCount()).toBitArray(this.text)}updateStateListForChar(e,t){const n=[];for(let r of e)this.updateStateForChar(r,t,n);return Cn.simplifyStates(n)}updateStateForChar(e,t,n){let r=255&this.text[t],i=zn[e.getMode()][r]>0,s=null;for(let o=0;o<=4;o++){let a=zn[o][r];if(a>0){if(null==s&&(s=e.endBinaryShift(t)),!i||o===e.getMode()||2===o){const c=s.latchAndAppend(o,a);n.push(c)}if(!i&&sr[e.getMode()][o]>=0){const c=s.shiftAndAppend(o,a);n.push(c)}}}if(e.getBinaryShiftByteCount()>0||0===zn[e.getMode()][r]){let o=e.addBinaryShiftChar(t);n.push(o)}}static updateStateListForPair(e,t,n){const r=[];for(let i of e)this.updateStateForPair(i,t,n,r);return this.simplifyStates(r)}static updateStateForPair(e,t,n,r){let i=e.endBinaryShift(t);if(r.push(i.latchAndAppend(4,n)),4!==e.getMode()&&r.push(i.shiftAndAppend(4,n)),3===n||4===n){let s=i.latchAndAppend(2,16-n).latchAndAppend(2,1);r.push(s)}if(e.getBinaryShiftByteCount()>0){let s=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);r.push(s)}}static simplifyStates(e){let t=[];for(const n of e){let r=!0;for(const i of t){if(i.isBetterThanOrEqualTo(n)){r=!1;break}n.isBetterThanOrEqualTo(i)&&(t=t.filter(s=>s!==i))}r&&t.push(n)}return t}}class Me{constructor(){}static encodeBytes(e){return Me.encode(e,Me.DEFAULT_EC_PERCENT,Me.DEFAULT_AZTEC_LAYERS)}static encode(e,t,n){let o,a,c,u,g,r=new Cn(e).encode(),i=ae.truncDivision(r.getSize()*t,100)+11,s=r.getSize()+i;if(n!==Me.DEFAULT_AZTEC_LAYERS){if(o=n<0,a=Math.abs(n),a>(o?Me.MAX_NB_BITS_COMPACT:Me.MAX_NB_BITS))throw new Z(ne.format("Illegal value %s for layers",n));c=Me.totalBitsInLayer(a,o),u=Me.WORD_SIZE[a];let L=c-c%u;if(g=Me.stuffBits(r,u),g.getSize()+i>L)throw new Z("Data to large for user specified layer");if(o&&g.getSize()>64*u)throw new Z("Data to large for user specified layer")}else{u=0,g=null;for(let L=0;;L++){if(L>Me.MAX_NB_BITS)throw new Z("Data too large for an Aztec code");if(o=L<=3,a=o?L+1:L,c=Me.totalBitsInLayer(a,o),s>c)continue;(null==g||u!==Me.WORD_SIZE[a])&&(u=Me.WORD_SIZE[a],g=Me.stuffBits(r,u));let Ce=c-c%u;if(!(o&&g.getSize()>64*u)&&g.getSize()+i<=Ce)break}}let M,A=Me.generateCheckWords(g,c,u),p=g.getSize()/u,I=Me.generateModeMessage(o,a,p),y=(o?11:14)+4*a,b=new Int32Array(y);if(o){M=y;for(let L=0;L<b.length;L++)b[L]=L}else{M=y+1+2*ae.truncDivision(ae.truncDivision(y,2)-1,15);let L=ae.truncDivision(y,2),Ce=ae.truncDivision(M,2);for(let fe=0;fe<L;fe++){let pt=fe+ae.truncDivision(fe,15);b[L-fe-1]=Ce-pt-1,b[L+fe]=Ce+pt+1}}let U=new Xe(M);for(let L=0,Ce=0;L<a;L++){let fe=4*(a-L)+(o?9:12);for(let pt=0;pt<fe;pt++){let Pt=2*pt;for(let It=0;It<2;It++)A.get(Ce+Pt+It)&&U.set(b[2*L+It],b[2*L+pt]),A.get(Ce+2*fe+Pt+It)&&U.set(b[2*L+pt],b[y-1-2*L-It]),A.get(Ce+4*fe+Pt+It)&&U.set(b[y-1-2*L-It],b[y-1-2*L-pt]),A.get(Ce+6*fe+Pt+It)&&U.set(b[y-1-2*L-pt],b[2*L+It])}Ce+=8*fe}if(Me.drawModeMessage(U,o,M,I),o)Me.drawBullsEye(U,ae.truncDivision(M,2),5);else{Me.drawBullsEye(U,ae.truncDivision(M,2),7);for(let L=0,Ce=0;L<ae.truncDivision(y,2)-1;L+=15,Ce+=16)for(let fe=1&ae.truncDivision(M,2);fe<M;fe+=2)U.set(ae.truncDivision(M,2)-Ce,fe),U.set(ae.truncDivision(M,2)+Ce,fe),U.set(fe,ae.truncDivision(M,2)-Ce),U.set(fe,ae.truncDivision(M,2)+Ce)}let Y=new nr;return Y.setCompact(o),Y.setSize(M),Y.setLayers(a),Y.setCodeWords(p),Y.setMatrix(U),Y}static drawBullsEye(e,t,n){for(let r=0;r<n;r+=2)for(let i=t-r;i<=t+r;i++)e.set(i,t-r),e.set(i,t+r),e.set(t-r,i),e.set(t+r,i);e.set(t-n,t-n),e.set(t-n+1,t-n),e.set(t-n,t-n+1),e.set(t+n,t-n),e.set(t+n,t-n+1),e.set(t+n,t+n-1)}static generateModeMessage(e,t,n){let r=new W;return e?(r.appendBits(t-1,2),r.appendBits(n-1,6),r=Me.generateCheckWords(r,28,4)):(r.appendBits(t-1,5),r.appendBits(n-1,11),r=Me.generateCheckWords(r,40,4)),r}static drawModeMessage(e,t,n,r){let i=ae.truncDivision(n,2);if(t)for(let s=0;s<7;s++){let o=i-3+s;r.get(s)&&e.set(o,i-5),r.get(s+7)&&e.set(i+5,o),r.get(20-s)&&e.set(o,i+5),r.get(27-s)&&e.set(i-5,o)}else for(let s=0;s<10;s++){let o=i-5+s+ae.truncDivision(s,5);r.get(s)&&e.set(o,i-7),r.get(s+10)&&e.set(i+7,o),r.get(29-s)&&e.set(o,i+7),r.get(39-s)&&e.set(i-7,o)}}static generateCheckWords(e,t,n){let r=e.getSize()/n,i=new Fn(Me.getGF(n)),s=ae.truncDivision(t,n),o=Me.bitsToWords(e,n,s);i.encode(o,s-r);let a=t%n,c=new W;c.appendBits(0,a);for(const u of Array.from(o))c.appendBits(u,n);return c}static bitsToWords(e,t,n){let i,s,r=new Int32Array(n);for(i=0,s=e.getSize()/t;i<s;i++){let o=0;for(let a=0;a<t;a++)o|=e.get(i*t+a)?1<<t-a-1:0;r[i]=o}return r}static getGF(e){switch(e){case 4:return le.AZTEC_PARAM;case 6:return le.AZTEC_DATA_6;case 8:return le.AZTEC_DATA_8;case 10:return le.AZTEC_DATA_10;case 12:return le.AZTEC_DATA_12;default:throw new Z("Unsupported word size "+e)}}static stuffBits(e,t){let n=new W,r=e.getSize(),i=(1<<t)-2;for(let s=0;s<r;s+=t){let o=0;for(let a=0;a<t;a++)(s+a>=r||e.get(s+a))&&(o|=1<<t-1-a);(o&i)===i?(n.appendBits(o&i,t),s--):o&i?n.appendBits(o,t):(n.appendBits(1|o,t),s--)}return n}static totalBitsInLayer(e,t){return((t?88:112)+16*e)*e}}Me.DEFAULT_EC_PERCENT=33,Me.DEFAULT_AZTEC_LAYERS=0,Me.MAX_NB_BITS=32,Me.MAX_NB_BITS_COMPACT=4,Me.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Nn{encode(e,t,n,r){return this.encodeWithHints(e,t,n,r,null)}encodeWithHints(e,t,n,r,i){let s=Un.ISO_8859_1,o=Me.DEFAULT_EC_PERCENT,a=Me.DEFAULT_AZTEC_LAYERS;return null!=i&&(i.has(tt.CHARACTER_SET)&&(s=tr.forName(i.get(tt.CHARACTER_SET).toString())),i.has(tt.ERROR_CORRECTION)&&(o=ae.parseInt(i.get(tt.ERROR_CORRECTION).toString())),i.has(tt.AZTEC_LAYERS)&&(a=ae.parseInt(i.get(tt.AZTEC_LAYERS).toString()))),Nn.encodeLayers(e,t,n,r,s,o,a)}static encodeLayers(e,t,n,r,i,s,o){if(t!==K.AZTEC)throw new Z("Can only encode AZTEC, but got "+t);let a=Me.encode(ne.getBytes(e,i),s,o);return Nn.renderResult(a,n,r)}static renderResult(e,t,n){let r=e.getMatrix();if(null==r)throw new ot;let i=r.getWidth(),s=r.getHeight(),o=Math.max(t,i),a=Math.max(n,s),c=Math.min(o/i,a/s),u=(o-i*c)/2,g=(a-s*c)/2,A=new Xe(o,a);for(let p=0,I=g;p<s;p++,I+=c)for(let y=0,b=u;y<i;y++,b+=c)r.get(y,p)&&A.setRegion(b,I,c,c);return A}}v.AbstractExpandedDecoder=je,v.ArgumentException=Ze,v.ArithmeticException=Xt,v.AztecCode=nr,v.AztecCodeReader=be,v.AztecCodeWriter=Nn,v.AztecDecoder=ke,v.AztecDetector=Je,v.AztecDetectorResult=wt,v.AztecEncoder=Me,v.AztecHighLevelEncoder=Cn,v.AztecPoint=Ue,v.BarcodeFormat=K,v.Binarizer=ce,v.BinaryBitmap=yt,v.BitArray=W,v.BitMatrix=Xe,v.BitSource=Dn,v.BrowserAztecCodeReader=class $e extends Fe{constructor(e=500){super(new be,e)}},v.BrowserBarcodeReader=class ur extends Fe{constructor(e=500,t){super(new sn(t),e,t)}},v.BrowserCodeReader=Fe,v.BrowserDatamatrixCodeReader=class fr extends Fe{constructor(e=500){super(new pn,e)}},v.BrowserMultiFormatReader=class br extends Fe{constructor(e=null,t=500){const n=new Jn;n.setHints(e),super(n,t)}decodeBitmap(e){return this.reader.decodeWithState(e)}},v.BrowserPDF417Reader=class Nr extends Fe{constructor(e=500){super(new ut,e)}},v.BrowserQRCodeReader=class Mr extends Fe{constructor(e=500){super(new Jt,e)}},v.BrowserQRCodeSvgWriter=_r,v.CharacterSetECI=z,v.ChecksumException=ze,v.Code128Reader=V,v.Code39Reader=Ct,v.DataMatrixDecodedBitStreamParser=qt,v.DataMatrixReader=pn,v.DecodeHintType=se,v.DecoderResult=zt,v.DefaultGridSampler=nn,v.DetectorResult=St,v.EAN13Reader=un,v.EncodeHintType=tt,v.Exception=ue,v.FormatException=H,v.GenericGF=le,v.GenericGFPoly=it,v.GlobalHistogramBinarizer=D,v.GridSampler=tn,v.GridSamplerInstance=At,v.HTMLCanvasElementLuminanceSource=Q,v.HybridBinarizer=B,v.ITFReader=xe,v.IllegalArgumentException=Z,v.IllegalStateException=ot,v.InvertedLuminanceSource=re,v.LuminanceSource=ee,v.MathUtils=J,v.MultiFormatOneDReader=sn,v.MultiFormatReader=Jn,v.MultiFormatWriter=class Dr{encode(e,t,n,r,i){let s;if(t!==K.QR_CODE)throw new Z("No encoder available for format "+t);return s=new er,s.encode(e,t,n,r,i)}},v.NotFoundException=S,v.OneDReader=Te,v.PDF417DecodedBitStreamParser=O,v.PDF417DecoderErrorCorrection=Yn,v.PDF417Reader=ut,v.PDF417ResultMetadata=Qn,v.PerspectiveTransform=at,v.PlanarYUVLuminanceSource=Rr,v.QRCodeByteMatrix=Tn,v.QRCodeDataMask=Ot,v.QRCodeDecodedBitStreamParser=Gn,v.QRCodeDecoderErrorCorrectionLevel=He,v.QRCodeDecoderFormatInformation=dt,v.QRCodeEncoder=We,v.QRCodeEncoderQRCode=Sn,v.QRCodeMaskUtil=on,v.QRCodeMatrixUtil=ie,v.QRCodeMode=te,v.QRCodeReader=Jt,v.QRCodeVersion=$,v.QRCodeWriter=er,v.RGBLuminanceSource=kn,v.RSS14Reader=Qe,v.RSSExpandedReader=F,v.ReaderException=Pn,v.ReedSolomonDecoder=Rt,v.ReedSolomonEncoder=Fn,v.ReedSolomonException=Gt,v.Result=ge,v.ResultMetadataType=he,v.ResultPoint=X,v.StringUtils=ne,v.UnsupportedOperationException=kt,v.VideoInputDevice=Re,v.WhiteRectangleDetector=Zt,v.WriterException=Ve,v.ZXingArrays=Ye,v.ZXingCharset=tr,v.ZXingInteger=ae,v.ZXingStandardCharsets=Un,v.ZXingStringBuilder=Ie,v.ZXingStringEncoding=rt,v.ZXingSystem=Ee,v.createAbstractExpandedDecoder=jn,Object.defineProperty(v,"__esModule",{value:!0})}(Ft)}}]);